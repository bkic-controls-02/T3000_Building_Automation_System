import{c as jt,F as ko,G as _o,H as Do,r as ye,a as be,I as _u,J as Du,K as Fu,L as Fo,M as Pu,w as Lt,f as xa,N as zr,O as jr,j as Ou,h as ne,T as Po,g as La,b as hi,P as Oo,Q as xo,R as Io,S as Ao,U as $n,V as xu,o as sr,W as pt,X as ct,Y as Iu,Z as Au,$ as Mo,a0 as Le,a1 as oe,a2 as Mu,y as He,A as I,a3 as J,_ as We,a4 as pe,a5 as Zi,a6 as Qi,a7 as si,a8 as Bo,z as Me,a9 as Q,aa as je,B as j,C as E,D as S,ab as gt,ac as Mi,v as No,ad as Vr,ae as Bu,af as sn,ag as ve,ah as vt,ai as Hr,aj as Wr,ak as ga,al as qr,am as on,an as Nu}from"./index.abd6ebe2.js";import{u as Ru,v as Gr,a as $u,p as Yr,b as Uu,c as Lu,r as Xr,s as zu,d as Kr,e as ju,Q as Ro,f as le,g as Mt,h as U,M as Vu,P as Un,i as $o,j as Hu,E as Wu,k as ka,l as Ln,m as zn,n as _a,o as Uo,q as qu,D as Gu,t as Yu,w as Xu,x as Zr,y as ln,z as Da,A as Ku,B as Zu,G as Qu,C as Ju,F as Qr,H as ed,I as td,J as id,K as ad,L as un,N as nd,O as rd,R as sd,S as Jr,T as jn,U as St,V as Lo,W as od,X as Ne,Y as es,Z as ld,_ as ud,$ as dn,a0 as dd,a1 as cd,a2 as Ft,a3 as hd,a4 as he}from"./common.279059bc.js";import"./QResizeObserver.a645824c.js";var Zt=jt({name:"QTooltip",inheritAttrs:!1,props:{...Ru,...ko,..._o,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Gr},self:{type:String,default:"top middle",validator:Gr},offset:{type:Array,default:()=>[14,14],validator:$u},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Do],setup(t,{slots:e,emit:i,attrs:a}){let r,n;const s=La(),{proxy:{$q:o}}=s,d=ye(null),u=ye(!1),l=be(()=>Yr(t.anchor,o.lang.rtl)),c=be(()=>Yr(t.self,o.lang.rtl)),p=be(()=>t.persistent!==!0),{registerTick:m,removeTick:v}=_u(),{registerTimeout:f}=Du(),{transitionProps:b,transitionStyle:C}=Fu(t),{localScrollTarget:k,changeScrollEvent:F,unconfigureScrollTarget:_}=Uu(t,ce),{anchorEl:N,canShow:y,anchorEvents:D}=Lu({showing:u,configureAnchorEl:Z}),{show:x,hide:$}=Fo({showing:u,canShow:y,handleShow:V,handleHide:ae,hideOnRouteChange:p,processOnMount:!0});Object.assign(D,{delayShow:A,delayHide:q});const{showPortal:z,hidePortal:X,renderPortal:W}=Pu(s,d,me,"tooltip");if(o.platform.is.mobile===!0){const H={anchorEl:N,innerRef:d,onClickOutside(_e){return $(_e),_e.target.classList.contains("q-dialog__backdrop")&&Oo(_e),!0}},ke=be(()=>t.modelValue===null&&t.persistent!==!0&&u.value===!0);Lt(ke,_e=>{(_e===!0?ju:Xr)(H)}),xa(()=>{Xr(H)})}function V(H){z(),m(()=>{n=new MutationObserver(()=>ee()),n.observe(d.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),ee(),ce()}),r===void 0&&(r=Lt(()=>o.screen.width+"|"+o.screen.height+"|"+t.self+"|"+t.anchor+"|"+o.lang.rtl,ee)),f(()=>{z(!0),i("show",H)},t.transitionDuration)}function ae(H){v(),X(),K(),f(()=>{X(!0),i("hide",H)},t.transitionDuration)}function K(){n!==void 0&&(n.disconnect(),n=void 0),r!==void 0&&(r(),r=void 0),_(),zr(D,"tooltipTemp")}function ee(){const H=d.value;N.value===null||!H||zu({el:H,offset:t.offset,anchorEl:N.value,anchorOrigin:l.value,selfOrigin:c.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function A(H){if(o.platform.is.mobile===!0){Kr(),document.body.classList.add("non-selectable");const ke=N.value,_e=["touchmove","touchcancel","touchend","click"].map(Qe=>[ke,Qe,"delayHide","passiveCapture"]);jr(D,"tooltipTemp",_e)}f(()=>{x(H)},t.delay)}function q(H){o.platform.is.mobile===!0&&(zr(D,"tooltipTemp"),Kr(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),f(()=>{$(H)},t.hideDelay)}function Z(){if(t.noParentEvent===!0||N.value===null)return;const H=o.platform.is.mobile===!0?[[N.value,"touchstart","delayShow","passive"]]:[[N.value,"mouseenter","delayShow","passive"],[N.value,"mouseleave","delayHide","passive"]];jr(D,"anchor",H)}function ce(){if(N.value!==null||t.scrollTarget!==void 0){k.value=Ou(N.value,t.scrollTarget);const H=t.noParentEvent===!0?ee:$;F(k.value,H)}}function fe(){return u.value===!0?ne("div",{...a,ref:d,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",a.class],style:[a.style,C.value],role:"tooltip"},hi(e.default)):null}function me(){return ne(Po,b.value,fe)}return xa(K),Object.assign(s.proxy,{updatePosition:ee}),W}}),bi=jt({name:"QList",props:{...xo,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(t,{slots:e}){const i=La(),a=Io(t,i.proxy.$q),r=be(()=>"q-list"+(t.bordered===!0?" q-list--bordered":"")+(t.dense===!0?" q-list--dense":"")+(t.separator===!0?" q-list--separator":"")+(a.value===!0?" q-list--dark":"")+(t.padding===!0?" q-list--padding":""));return()=>ne(t.tag,{class:r.value},hi(e.default))}}),pd=jt({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(t,{slots:e}){const i=be(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(r=>t[r]===!0).map(r=>`q-btn-group--${r}`).join(" ");return`q-btn-group row no-wrap${a.length>0?" "+a:""}`+(t.spread===!0?" q-btn-group--spread":" inline")});return()=>ne("div",{class:i.value},hi(e.default))}});const fd=Object.keys(Ao),md=t=>fd.reduce((e,i)=>{const a=t[i];return a!==void 0&&(e[i]=a),e},{});var cn=jt({name:"QBtnDropdown",props:{...Ao,..._o,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(t,{slots:e,emit:i}){const{proxy:a}=La(),r=ye(t.modelValue),n=ye(null),s=$n(),o=be(()=>{const _={"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s,"aria-label":t.toggleAriaLabel||a.$q.lang.label[r.value===!0?"collapse":"expand"](t.label)};return(t.disable===!0||t.split===!1&&t.disableMainBtn===!0||t.disableDropdown===!0)&&(_["aria-disabled"]="true"),_}),d=be(()=>"q-btn-dropdown__arrow"+(r.value===!0&&t.noIconAnimation===!1?" rotate-180":"")+(t.split===!1?" q-btn-dropdown__arrow-container":"")),u=be(()=>xu(t)),l=be(()=>md(t));Lt(()=>t.modelValue,_=>{n.value!==null&&n.value[_?"show":"hide"]()}),Lt(()=>t.split,F);function c(_){r.value=!0,i("beforeShow",_)}function p(_){i("show",_),i("update:modelValue",!0)}function m(_){r.value=!1,i("beforeHide",_)}function v(_){i("hide",_),i("update:modelValue",!1)}function f(_){i("click",_)}function b(_){Iu(_),F(),i("click",_)}function C(_){n.value!==null&&n.value.toggle(_)}function k(_){n.value!==null&&n.value.show(_)}function F(_){n.value!==null&&n.value.hide(_)}return Object.assign(a,{show:k,hide:F,toggle:C}),sr(()=>{t.modelValue===!0&&k()}),()=>{const _=[ne(pt,{class:d.value,name:t.dropdownIcon||a.$q.iconSet.arrow.dropdown})];return t.disableDropdown!==!0&&_.push(ne(Ro,{ref:n,id:s,class:t.contentClass,style:t.contentStyle,cover:t.cover,fit:!0,persistent:t.persistent,noRouteDismiss:t.noRouteDismiss,autoClose:t.autoClose,anchor:t.menuAnchor,self:t.menuSelf,offset:t.menuOffset,separateClosePopup:!0,transitionShow:t.transitionShow,transitionHide:t.transitionHide,transitionDuration:t.transitionDuration,onBeforeShow:c,onShow:p,onBeforeHide:m,onHide:v},e.default)),t.split===!1?ne(ct,{class:"q-btn-dropdown q-btn-dropdown--simple",...l.value,...o.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:f},{default:()=>hi(e.label,[]).concat(_),loading:e.loading}):ne(pd,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:t.rounded,square:t.square,...u.value,glossy:t.glossy,stretch:t.stretch},()=>[ne(ct,{class:"q-btn-dropdown--current",...l.value,disable:t.disable===!0||t.disableMainBtn===!0,noWrap:!0,round:!1,onClick:b},{default:e.label,loading:e.loading}),ne(ct,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...o.value,...u.value,disable:t.disable===!0||t.disableDropdown===!0,rounded:t.rounded,color:t.color,textColor:t.textColor,dense:t.dense,size:t.size,padding:t.padding,ripple:t.ripple},()=>_)])}}}),gd=jt({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:e}){const i=be(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>ne("div",{class:i.value,role:"toolbar"},hi(e.default))}}),vd=jt({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:e,emit:i}){let a=!1,r,n,s=null,o=null,d,u;function l(){r&&r(),r=null,a=!1,s!==null&&(clearTimeout(s),s=null),o!==null&&(clearTimeout(o),o=null),n!==void 0&&n.removeEventListener("transitionend",d),d=null}function c(f,b,C){b!==void 0&&(f.style.height=`${b}px`),f.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,a=!0,r=C}function p(f,b){f.style.overflowY=null,f.style.height=null,f.style.transition=null,l(),b!==u&&i(b)}function m(f,b){let C=0;n=f,a===!0?(l(),C=f.offsetHeight===f.scrollHeight?0:void 0):(u="hide",f.style.overflowY="hidden"),c(f,C,b),s=setTimeout(()=>{s=null,f.style.height=`${f.scrollHeight}px`,d=k=>{o=null,(Object(k)!==k||k.target===f)&&p(f,"show")},f.addEventListener("transitionend",d),o=setTimeout(d,t.duration*1.1)},100)}function v(f,b){let C;n=f,a===!0?l():(u="show",f.style.overflowY="hidden",C=f.scrollHeight),c(f,C,b),s=setTimeout(()=>{s=null,f.style.height=0,d=k=>{o=null,(Object(k)!==k||k.target===f)&&p(f,"hide")},f.addEventListener("transitionend",d),o=setTimeout(d,t.duration*1.1)},100)}return xa(()=>{a===!0&&l()}),()=>ne(Po,{css:!1,appear:t.appear,onEnter:m,onLeave:v},e.default)}});const Pt=Au({}),yd=Object.keys(Mo);var ts=jt({name:"QExpansionItem",props:{...Mo,...ko,...xo,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Do,"click","afterShow","afterHide"],setup(t,{slots:e,emit:i}){const{proxy:{$q:a}}=La(),r=Io(t,a),n=ye(t.modelValue!==null?t.modelValue:t.defaultOpened),s=ye(null),o=$n(),{show:d,hide:u,toggle:l}=Fo({showing:n});let c,p;const m=be(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${t.popup===!0?"popup":"standard"}`),v=be(()=>{if(t.contentInsetLevel===void 0)return null;const A=a.lang.rtl===!0?"Right":"Left";return{["padding"+A]:t.contentInsetLevel*56+"px"}}),f=be(()=>t.disable!==!0&&(t.href!==void 0||t.to!==void 0&&t.to!==null&&t.to!=="")),b=be(()=>{const A={};return yd.forEach(q=>{A[q]=t[q]}),A}),C=be(()=>f.value===!0||t.expandIconToggle!==!0),k=be(()=>t.expandedIcon!==void 0&&n.value===!0?t.expandedIcon:t.expandIcon||a.iconSet.expansionItem[t.denseToggle===!0?"denseIcon":"icon"]),F=be(()=>t.disable!==!0&&(f.value===!0||t.expandIconToggle===!0)),_=be(()=>({expanded:n.value===!0,detailsId:t.targetUid,toggle:l,show:d,hide:u})),N=be(()=>{const A=t.toggleAriaLabel!==void 0?t.toggleAriaLabel:a.lang.label[n.value===!0?"collapse":"expand"](t.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-controls":o,"aria-label":A}});Lt(()=>t.group,A=>{p!==void 0&&p(),A!==void 0&&X()});function y(A){f.value!==!0&&l(A),i("click",A)}function D(A){A.keyCode===13&&x(A,!0)}function x(A,q){q!==!0&&s.value!==null&&s.value.focus(),l(A),Oo(A)}function $(){i("afterShow")}function z(){i("afterHide")}function X(){c===void 0&&(c=$n()),n.value===!0&&(Pt[t.group]=c);const A=Lt(n,Z=>{Z===!0?Pt[t.group]=c:Pt[t.group]===c&&delete Pt[t.group]}),q=Lt(()=>Pt[t.group],(Z,ce)=>{ce===c&&Z!==void 0&&Z!==c&&u()});p=()=>{A(),q(),Pt[t.group]===c&&delete Pt[t.group],p=void 0}}function W(){const A={class:[`q-focusable relative-position cursor-pointer${t.denseToggle===!0&&t.switchToggleSide===!0?" items-end":""}`,t.expandIconClass],side:t.switchToggleSide!==!0,avatar:t.switchToggleSide},q=[ne(pt,{class:"q-expansion-item__toggle-icon"+(t.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:k.value})];return F.value===!0&&(Object.assign(A,{tabindex:0,...N.value,onClick:x,onKeyup:D}),q.unshift(ne("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),ne(U,A,()=>q)}function V(){let A;return e.header!==void 0?A=[].concat(e.header(_.value)):(A=[ne(U,()=>[ne(Mt,{lines:t.labelLines},()=>t.label||""),t.caption?ne(Mt,{lines:t.captionLines,caption:!0},()=>t.caption):null])],t.icon&&A[t.switchToggleSide===!0?"push":"unshift"](ne(U,{side:t.switchToggleSide===!0,avatar:t.switchToggleSide!==!0},()=>ne(pt,{name:t.icon})))),t.disable!==!0&&t.hideExpandIcon!==!0&&A[t.switchToggleSide===!0?"unshift":"push"](W()),A}function ae(){const A={ref:"item",style:t.headerStyle,class:t.headerClass,dark:r.value,disable:t.disable,dense:t.dense,insetLevel:t.headerInsetLevel};return C.value===!0&&(A.clickable=!0,A.onClick=y,Object.assign(A,f.value===!0?b.value:N.value)),ne(le,A,V)}function K(){return oe(ne("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:v.value,id:o},hi(e.default)),[[Mu,n.value]])}function ee(){const A=[ae(),ne(vd,{duration:t.duration,onShow:$,onHide:z},K)];return t.expandSeparator===!0&&A.push(ne(Le,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),ne(Le,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),A}return t.group!==void 0&&X(),xa(()=>{p!==void 0&&p()}),()=>ne("div",{class:m.value},[ne("div",{class:"q-expansion-item__container relative-position"},ee())])}}),$i=function(){return $i=Object.assign||function(e){for(var i,a=1,r=arguments.length;a<r;a++){i=arguments[a];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$i.apply(this,arguments)},zo={};Vu.forEach(function(t){zo[t]=function(){for(var e,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return(e=this.$_moveable)[t].apply(e,i)}});var jo={};Un.forEach(function(t){jo[t]=function(e){this.$_moveable[t]=e}});var or=He({name:"moveable",methods:zo,props:Un,watch:jo,mounted:function(){var t=this,e={},i=this.$props;Un.forEach(function(s){var o=i[s];$o(o)||(e[s]=i[s])});var a=this.$refs,r=a.moveableElement,n=new Hu(r,$i($i({},e),{portalContainer:r}));Wu.forEach(function(s){n.on(s,function(o){t.$emit(s,$i({},o))})}),this.$_moveable=n},beforeUnmount:function(){this.$_moveable.destroy()}});const bd={ref:"moveableElement"};function wd(t,e,i,a,r,n){return I(),J("div",bd,null,512)}or.render=wd;or.__file="src/Moveable.vue";var Vn=function(t,e){return Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])},Vn(t,e)};function Sd(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vn(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function Cd(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Ji=Cd(function(t,e){function i(d){if(d&&typeof d=="object"){var u=d.which||d.keyCode||d.charCode;u&&(d=u)}if(typeof d=="number")return s[d];var l=String(d),c=a[l.toLowerCase()];if(c)return c;var c=r[l.toLowerCase()];if(c)return c;if(l.length===1)return l.charCodeAt(0)}i.isEventKey=function(u,l){if(u&&typeof u=="object"){var c=u.which||u.keyCode||u.charCode;if(c==null)return!1;if(typeof l=="string"){var p=a[l.toLowerCase()];if(p)return p===c;var p=r[l.toLowerCase()];if(p)return p===c}else if(typeof l=="number")return l===c;return!1}},e=t.exports=i;var a=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(n=97;n<123;n++)a[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)a[n-48]=n;for(n=1;n<13;n++)a["f"+n]=n+111;for(n=0;n<10;n++)a["numpad "+n]=n+96;var s=e.names=e.title={};for(n in a)s[a[n]]=n;for(var o in r)a[o]=r[o]});Ji.code;Ji.codes;Ji.aliases;var Ed=Ji.names;Ji.title;var is={"+":"plus","left command":"meta","right command":"meta"},as={shift:1,ctrl:2,alt:3,meta:4};function Vo(t,e){var i=(Ed[t]||e||"").toLowerCase();for(var a in is)i=i.replace(a,is[a]);return i.replace(/\s/g,"")}function Ho(t,e){e===void 0&&(e=Vo(t.keyCode,t.key));var i=Td(t);return i.indexOf(e)===-1&&i.push(e),i.filter(Boolean)}function Td(t){var e=[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"];return e.filter(Boolean)}function ns(t){var e=t.slice();return e.sort(function(i,a){var r=as[i]||5,n=as[a]||5;return r-n}),e}var rs,kd=function(t){Sd(e,t);function e(a){a===void 0&&(a=window);var r=t.call(this)||this;return r.container=a,r.ctrlKey=!1,r.altKey=!1,r.shiftKey=!1,r.metaKey=!1,r.clear=function(){return r.ctrlKey=!1,r.altKey=!1,r.shiftKey=!1,r.metaKey=!1,r},r.keydownEvent=function(n){r.triggerEvent("keydown",n)},r.keyupEvent=function(n){r.triggerEvent("keyup",n)},r.blur=function(){r.clear(),r.trigger("blur")},_a(a,"blur",r.blur),_a(a,"keydown",r.keydownEvent),_a(a,"keyup",r.keyupEvent),r}var i=e.prototype;return Object.defineProperty(e,"global",{get:function(){return rs||(rs=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},i.destroy=function(){var a=this.container;this.clear(),this.off(),ka(a,"blur",this.blur),ka(a,"keydown",this.keydownEvent),ka(a,"keyup",this.keyupEvent)},i.keydown=function(a,r){return this.addEvent("keydown",a,r)},i.offKeydown=function(a,r){return this.removeEvent("keydown",a,r)},i.offKeyup=function(a,r){return this.removeEvent("keyup",a,r)},i.keyup=function(a,r){return this.addEvent("keyup",a,r)},i.addEvent=function(a,r,n){return Ln(r)?this.on("".concat(a,".").concat(ns(r).join(".")),n):zn(r)?this.on("".concat(a,".").concat(r),n):this.on(a,r),this},i.removeEvent=function(a,r,n){return Ln(r)?this.off("".concat(a,".").concat(ns(r).join(".")),n):zn(r)?this.off("".concat(a,".").concat(r),n):this.off(a,r),this},i.triggerEvent=function(a,r){this.ctrlKey=r.ctrlKey,this.shiftKey=r.shiftKey,this.altKey=r.altKey,this.metaKey=r.metaKey;var n=Vo(r.keyCode,r.key),s=n==="ctrl"||n==="shift"||n==="meta"||n==="alt",o={key:n,isToggle:s,inputEvent:r,keyCode:r.keyCode,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey};this.trigger(a,o),this.trigger("".concat(a,".").concat(n),o);var d=Ho(r,n);d.length>1&&this.trigger("".concat(a,".").concat(d.join(".")),o)},e}(Uo),Wo=kd,Hn=function(t,e){return Hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])},Hn(t,e)};function qo(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Hn(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var De=function(){return De=Object.assign||function(e){for(var i,a=1,r=arguments.length;a<r;a++){i=arguments[a];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},De.apply(this,arguments)};function _d(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(i[a[r]]=t[a[r]]);return i}function Dd(t,e,i,a){var r=arguments.length,n=r<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,i):a,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,i,a);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(n=(r<3?s(n):r>3?s(e,i,n):s(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n}function Ui(t,e,i){if(i||arguments.length===2)for(var a=0,r=e.length,n;a<r;a++)(n||!(a in e))&&(n||(n=Array.prototype.slice.call(e,0,a)),n[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))}function Fd(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}else return{clientX:t.clientX,clientY:t.clientY}}function Pd(t){if(typeof Map=="undefined")return t.filter(function(i,a){return t.indexOf(i)===a});var e=new Map;return t.filter(function(i){return e.has(i)?!1:(e.set(i,!0),!0)})}function ss(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function Go(t,e,i){var a=t.tag,r=t.children,n=t.attributes,s=t.className,o=t.style,d=e||document.createElement(a);for(var u in n)d.setAttribute(u,n[u]);var l=d.children;if(r.forEach(function(p,m){Go(p,l[m],d)}),s&&s.split(" ").forEach(function(p){ed(d,p)||td(d,p)}),o){var c=d.style;for(var u in o)c[u]=o[u]}return!e&&i&&i.appendChild(d),d}function Od(t,e){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var r=e||{},n=r.className,s=n===void 0?"":n,o=r.style,d=o===void 0?{}:o,u=_d(r,["className","style"]);return{tag:t,className:s,style:d,attributes:u,children:i}}function hn(t,e,i){t!==e&&i(t,e)}function os(t,e,i){var a;i===void 0&&(i=t.data.boundArea);var r=t.distX,n=r===void 0?0:r,s=t.distY,o=s===void 0?0:s,d=t.data,u=d.startX,l=d.startY;if(e>0){var c=Math.sqrt((n*n+o*o)/(1+e*e)),p=e*c;n=(n>=0?1:-1)*p,o=(o>=0?1:-1)*c}var m=Math.abs(n),v=Math.abs(o),f=n<0?u-i.left:i.right-u,b=o<0?l-i.top:i.bottom-l;a=id([m,v],[0,0],[f,b],!!e),m=a[0],v=a[1],n=(n>=0?1:-1)*m,o=(o>=0?1:-1)*v;var C=Math.min(0,n),k=Math.min(0,o),F=u+C,_=l+k;return{left:F,top:_,right:F+m,bottom:_+v,width:m,height:v}}function va(t){var e=t.getBoundingClientRect(),i=e.left,a=e.top,r=e.width,n=e.height;return{pos1:[i,a],pos2:[i+r,a],pos3:[i,a+n],pos4:[i+r,a+n]}}function ls(t,e,i){var a=Da(t,e),r=a.list,n=a.prevList,s=a.added,o=a.removed,d=a.maintained;return Ui(Ui(Ui([],s.map(function(u){return r[u]}),!0),o.map(function(u){return n[u]}),!0),i?d.map(function(u){var l=u[1];return r[l]}):[],!0)}function us(t){for(var e=0,i=t.length,a=1;a<i;++a)e=Math.max(rd(t[a],t[a-1]),e);return e}var Yo=qu(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),xd="selecto-selection ".concat(Yo.className),lr=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],ds=Ui(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],lr,!0),Id=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],Ad=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],Md=function(t){qo(e,t);function e(a){a===void 0&&(a={});var r=t.call(this)||this;r.selectedTargets=[],r.dragScroll=new Gu,r._onDragStart=function(o,d){var u=o.data,l=o.clientX,c=o.clientY,p=o.inputEvent,m=r.options,v=m.selectFromInside,f=m.selectByClick,b=m.rootContainer,C=m.boundContainer,k=m.preventDragFromInside,F=k===void 0?!0:k,_=m.clickBySelectEnd,N=m.dragCondition;if(N&&!N(o)){o.stop();return}u.data={},u.innerWidth=window.innerWidth,u.innerHeight=window.innerHeight,r.findSelectableTargets(u),u.startSelectedTargets=r.selectedTargets,u.scaleMatrix=Yu(),u.containerX=0,u.containerY=0;var y={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(b){var D=r.container.getBoundingClientRect();u.containerX=D.left,u.containerY=D.top,u.scaleMatrix=Xu(r.container,b)}if(C){var x=Zr(C)&&"element"in C?De({left:!0,top:!0,bottom:!0,right:!0},C):{element:C,left:!0,top:!0,bottom:!0,right:!0},$=x.element,z=void 0;if($){zn($)?z=document.querySelector($):$===!0?z=r.container:z=$;var X=z.getBoundingClientRect();x.left&&(y.left=X.left),x.top&&(y.top=X.top),x.right&&(y.right=X.right),x.bottom&&(y.bottom=X.bottom)}}u.boundArea=y;var W={left:l,top:c,right:l,bottom:c,width:0,height:0},V=[];if(!v||f&&!_){var ae=r._findElement(d||ss(l,c),u.selectableTargets);V=ae?[ae]:[]}var K=V.length>0,ee=!v&&K;if(ee&&!f)return o.stop(),!1;var A=p.type,q=A==="mousedown"||A==="touchstart",Z=!o.isClick&&q?r.emit("dragStart",De(De({},o),{data:u.data})):!0;if(!Z)return o.stop(),!1;if(r.continueSelect?(V=ls(r.selectedTargets,V,r.continueSelectWithoutDeselect),u.startPassedTargets=r.selectedTargets):u.startPassedTargets=[],r._select(V,W,o,!0),u.startX=l,u.startY=c,u.selectFlag=!1,u.preventDragFromInside=!1,p.target){var ce=ln(u.scaleMatrix,[l-u.containerX,c-u.containerY]);r.target.style.cssText+="position: ".concat(b?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(ce[0],"px, ").concat(ce[1],"px)")}if(ee&&f&&!_)p.preventDefault(),F&&(r._selectEnd(u.startSelectedTargets,u.startPassedTargets,W,o),u.preventDragFromInside=!0);else{u.selectFlag=!0,A==="touchstart"&&p.preventDefault();var fe=r.options,me=fe.scrollOptions,H=fe.innerScrollOptions,ke=!1;if(H){for(var _e=o.inputEvent,Qe=_e.target,we=null,Je=Qe;Je&&Je!==document.body;){var pi=getComputedStyle(Je).overflow!=="visible";if(pi){we=Je;break}Je=Je.parentElement}we&&(u.innerScrollOptions=De({container:we,checkScrollEvent:!0},H===!0?{}:H),r.dragScroll.dragStart(o,u.innerScrollOptions),ke=!0)}!ke&&me&&me.container&&r.dragScroll.dragStart(o,me),_&&(u.selectFlag=!1,o.preventDrag())}return!0},r._onDrag=function(o){if(o.data.selectFlag){var d=r.scrollOptions,u=o.data.innerScrollOptions,l=u||(d==null?void 0:d.container);if(l&&!o.isScroll&&r.dragScroll.drag(o,u||d))return}r._checkSelected(o)},r._onDragEnd=function(o){var d=o.data,u=o.inputEvent,l=os(o,r.options.ratio),c=d.selectFlag;if(u&&r.emit("dragEnd",De(De({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:c},o),{data:d.data,rect:l})),r.target.style.cssText+="display: none;",c)d.selectFlag=!1,r.dragScroll.dragEnd();else if(r.selectByClick&&r.clickBySelectEnd){var p=r._findElement(ss(o.clientX,o.clientY),d.selectableTargets);r._select(p?[p]:[],l,o)}d.preventDragFromInside||r._selectEnd(d.startSelectedTargets,d.startPassedTargets,l,o)},r._onKeyDown=function(o){var d=r.options,u=!1;if(!r._keydownContinueSelect){var l=r._sameCombiKey(o,d.toggleContinueSelect);r._keydownContinueSelect=l,u=l}if(!r._keydownContinueSelectWithoutDeselection){var l=r._sameCombiKey(o,d.toggleContinueSelectWithoutDeselect);r._keydownContinueSelectWithoutDeselection=l,u=u||l}!u||r.emit("keydown",{keydownContinueSelect:r._keydownContinueSelect,keydownContinueSelectWithoutDeselection:r._keydownContinueSelectWithoutDeselection})},r._onKeyUp=function(o){var d=r.options,u=!1;if(r._keydownContinueSelect){var l=r._sameCombiKey(o,d.toggleContinueSelect,!0);r._keydownContinueSelect=!l,u=l}if(r._keydownContinueSelectWithoutDeselection){var l=r._sameCombiKey(o,d.toggleContinueSelectWithoutDeselect,!0);r._keydownContinueSelectWithoutDeselection=!l,u=u||l}!u||r.emit("keyup",{keydownContinueSelect:r._keydownContinueSelect,keydownContinueSelectWithoutDeselection:r._keydownContinueSelectWithoutDeselection})},r._onBlur=function(){(r._keydownContinueSelect||r._keydownContinueSelectWithoutDeselection)&&(r._keydownContinueSelect=!1,r._keydownContinueSelectWithoutDeselection=!1,r.emit("keyup",{keydownContinueSelect:r._keydownContinueSelect,keydownContinueSelectWithoutDeselection:r._keydownContinueSelectWithoutDeselection}))},r._onDocumentSelectStart=function(o){if(!!r.gesto.isFlag()){var d=r.dragContainer;d===window&&(d=document.documentElement);var u=d instanceof Element?[d]:[].slice.call(d),l=o.target;u.some(function(c){if(c===l||c.contains(l))return o.preventDefault(),!0})}},r.target=a.portalContainer;var n=a.container;r.options=De({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:va,cspNonce:"",ratio:0},a);var s=r.options.portalContainer;return s&&(n=s.parentElement),r.container=n||document.body,r.initElement(),r.initDragScroll(),r.setKeyController(),r}var i=e.prototype;return i.setSelectedTargets=function(a){var r=this.selectedTargets,n=Da(r,a),s=n.added,o=n.removed,d=n.prevList,u=n.list;return this.selectedTargets=a,{added:s.map(function(l){return u[l]}),removed:o.map(function(l){return d[l]}),beforeSelected:r,selected:a}},i.setSelectedTargetsByPoints=function(a,r){var n=Math.min(a[0],r[0]),s=Math.min(a[1],r[1]),o=Math.max(a[0],r[0]),d=Math.max(a[1],r[1]),u={left:n,top:s,right:o,bottom:d,width:o-n,height:d-s},l={ignoreClick:!0};this.findSelectableTargets(l);var c=this.hitTest(u,l),p=this.setSelectedTargets(c);return De(De({},p),{rect:u})},i.selectTargetsByPoints=function(a,r){var n=new MouseEvent("mousedown",{clientX:a[0],clientY:a[1],cancelable:!0,bubbles:!0}),s=new MouseEvent("mousemove",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:r[0],clientY:r[1],cancelable:!0,bubbles:!0}),d=this.gesto,u=d.onDragStart(n);u!==!1&&(d.onDrag(s),d.onDragEnd(o))},i.getSelectedTargets=function(){return this.selectedTargets},i.triggerDragStart=function(a){return this.gesto.triggerDragStart(a),this},i.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),ka(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},i.getElementPoints=function(a){var r=this.getElementRect||va,n=r(a),s=[n.pos1,n.pos2,n.pos4,n.pos3];if(r!==va){var o=a.getBoundingClientRect();return Ku(s,o)}return s},i.getSelectableElements=function(){var a=[];return this.options.selectableTargets.forEach(function(r){if(Zu(r)){var n=r();n&&a.push.apply(a,[].slice.call(n))}else if(r instanceof Node)a.push(r);else if(Zr(r))a.push(r.value||r.current);else{var s=[].slice.call(document.querySelectorAll(r));a.push.apply(a,s)}}),a},i.checkScroll=function(){if(!!this.gesto.isFlag()){var a=this.scrollOptions,r=this.gesto.getEventData().innerScrollOptions,n=r||(a==null?void 0:a.container);n&&this.dragScroll.checkScroll(De({inputEvent:this.gesto.getCurrentEvent()},r||a))}},i.findSelectableTargets=function(a){var r=this;a===void 0&&(a=this.gesto.getEventData());var n=this.getSelectableElements(),s=n.map(function(l){return r.getElementPoints(l)});a.selectableTargets=n,a.selectablePoints=s,a.selectableParentMap=null;var o=this.options,d=o.checkOverflow||o.innerScrollOptions;if(d){var u=new Map;a.selectableInnerScrollParentMap=u,a.selectableInnerScrollPathsList=n.map(function(l,c){for(var p=l.parentElement,m=[],v=[],f=function(){var b=u.get(p);if(!b){var C=getComputedStyle(p).overflow!=="visible";if(C){var k=va(p);b={parentElement:p,indexes:[],points:[k.pos1,k.pos2,k.pos4,k.pos3],paths:Ui([],v,!0)},m.push(p),m.forEach(function(F){u.set(F,b)}),m=[]}}b?(p=b.parentElement,u.get(p).indexes.push(c),v.push(p)):m.push(p),p=p.parentElement};p&&p!==document.body;)f();return v})}return o.checkOverflow||(a.selectableInners=n.map(function(){return!0})),this._refreshGroups(a),n},i.clickTarget=function(a,r){var n=Fd(a),s=n.clientX,o=n.clientY,d={data:{selectFlag:!1},clientX:s,clientY:o,inputEvent:a,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(d,r)&&this._onDragEnd(d),this},i.setKeyController=function(){var a=this.options,r=a.keyContainer,n=a.toggleContinueSelect,s=a.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||s)&&(this.keycon=new Wo(r||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},i.setKeyEvent=function(){var a=this.options,r=a.toggleContinueSelect,n=a.toggleContinueSelectWithoutDeselect;!r&&!n||this.keycon||this.setKeyController()},i.setKeyContainer=function(a){var r=this,n=this.options;hn(n.keyContainer,a,function(){n.keyContainer=a,r.setKeyController()})},i.getContinueSelect=function(){var a=this.options,r=a.continueSelect,n=a.toggleContinueSelect;return!n||!this._keydownContinueSelect?r:!r},i.getContinueSelectWithoutDeselect=function(){var a=this.options,r=a.continueSelectWithoutDeselect,n=a.toggleContinueSelectWithoutDeselect;return!n||!this._keydownContinueSelectWithoutDeselection?r:!r},i.setToggleContinueSelect=function(a){var r=this,n=this.options;hn(n.toggleContinueSelect,a,function(){n.toggleContinueSelect=a,r.setKeyEvent()})},i.setToggleContinueSelectWithoutDeselect=function(a){var r=this,n=this.options;hn(n.toggleContinueSelectWithoutDeselect,a,function(){n.toggleContinueSelectWithoutDeselect=a,r.setKeyEvent()})},i.setPreventDefault=function(a){this.gesto.options.preventDefault=a},i.setCheckInput=function(a){this.gesto.options.checkInput=a},i.initElement=function(){this.target=Go(Od("div",{className:xd}),this.target,this.container);var a=this.target,r=this.options,n=r.dragContainer,s=r.checkInput,o=r.preventDefault,d=r.preventClickEventOnDragStart,u=r.preventClickEventOnDrag,l=r.preventClickEventByCondition,c=r.preventRightClick,p=c===void 0?!0:c;this.dragContainer=typeof n=="string"?[].slice.call(document.querySelectorAll(n)):n||this.target.parentNode,this.gesto=new Qu(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:s,preventDefault:o,preventClickEventOnDragStart:d,preventClickEventOnDrag:u,preventClickEventByCondition:l,preventRightClick:p}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),_a(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Yo.inject(a,{nonce:this.options.cspNonce})},i.hitTest=function(a,r,n){var s=this.options,o=s.hitRate,d=s.selectByClick,u=a.left,l=a.top,c=a.right,p=a.bottom,m=r.innerGroups,v=r.innerWidth,f=r.innerHeight,b=n==null?void 0:n.clientX,C=n==null?void 0:n.clientY,k=r.ignoreClick,F=[[u,l],[c,l],[c,p],[u,p]],_=Ju("".concat(o)),N=function(q,Z){var ce=k?!1:ad([b,C],q);if(d&&ce)return!0;var fe=Qr(F,q);if(!fe.length)return!1;var me=un(fe),H=0;if(me===0&&un(q)===0?(H=us(q),me=us(fe)):H=un(q),_.unit==="px")return me>=_.value;var ke=sd(Math.round(me/H*100),0,100);return ke>=Math.min(100,_.value)},y=r.selectableTargets,D=r.selectablePoints,x=r.selectableInners;if(!m)return y.filter(function(q,Z){return x[Z]?N(D[Z],y[Z]):!1});for(var $=[],z=Math.floor(u/v),X=Math.floor(c/v),W=Math.floor(l/f),V=Math.floor(p/f),ae=z;ae<=X;++ae){var K=m[ae];if(!!K)for(var ee=W;ee<=V;++ee){var A=K[ee];!A||A.forEach(function(q){var Z=D[q],ce=x[q],fe=y[q];ce&&N(Z)&&$.push(fe)})}}return Pd($)},i.initDragScroll=function(){var a=this;this.dragScroll.on("scrollDrag",function(r){var n=r.next;n(a.gesto.getCurrentEvent())}).on("scroll",function(r){var n=r.container,s=r.direction,o=a.gesto.getEventData().innerScrollOptions;o?a.emit("innerScroll",{container:n,direction:s}):a.emit("scroll",{container:n,direction:s})}).on("move",function(r){var n=r.offsetX,s=r.offsetY,o=r.inputEvent,d=a.gesto;if(!(!d||!d.isFlag())){var u=a.gesto.getEventData(),l=u.boundArea;u.startX-=n,u.startY-=s;var c=a.gesto.getEventData().innerScrollOptions,p=c==null?void 0:c.container,m=!1;if(p){var v=u.selectableInnerScrollParentMap,f=v.get(p);f&&(f.paths.forEach(function(b){var C=v.get(b);C.points.forEach(function(k){k[0]-=n,k[1]-=s})}),f.indexes.forEach(function(b){u.selectablePoints[b].forEach(function(C){C[0]-=n,C[1]-=s})}),m=!0)}m||u.selectablePoints.forEach(function(b){b.forEach(function(C){C[0]-=n,C[1]-=s})}),a._refreshGroups(u),l.left-=n,l.right-=n,l.top-=s,l.bottom-=s,a.gesto.scrollBy(n,s,o.inputEvent),a._checkSelected(a.gesto.getCurrentEvent())}})},i._select=function(a,r,n,s){var o=n.inputEvent,d=n.data,u=this.setSelectedTargets(a);s&&this.emit("selectStart",De(De({},u),{rect:r,inputEvent:o,data:d.data,isTrusted:n.isTrusted})),(u.added.length||u.removed.length)&&this.emit("select",De(De({},u),{rect:r,inputEvent:o,data:d.data,isTrusted:n.isTrusted}))},i._selectEnd=function(a,r,n,s){var o=s.inputEvent,d=s.isDouble,u=s.data,l=Da(a,this.selectedTargets),c=l.added,p=l.removed,m=l.prevList,v=l.list,f=Da(r,this.selectedTargets),b=f.added,C=f.removed,k=f.prevList,F=f.list,_=o&&o.type,N=_==="mousedown"||_==="touchstart";this.emit("selectEnd",{startSelected:a,beforeSelected:r,selected:this.selectedTargets,added:c.map(function(y){return v[y]}),removed:p.map(function(y){return m[y]}),afterAdded:b.map(function(y){return F[y]}),afterRemoved:C.map(function(y){return k[y]}),isDragStart:N,isClick:!!s.isClick,isDouble:!!d,rect:n,inputEvent:o,data:u.data,isTrusted:s.isTrusted})},i._checkSelected=function(a,r){r===void 0&&(r=os(a,this.options.ratio));var n=a.data,s=r.top,o=r.left,d=r.width,u=r.height,l=n.selectFlag,c=n.containerX,p=n.containerY,m=n.scaleMatrix,v=ln(m,[o-c,s-p]),f=ln(m,[d,u]),b=[];if(l){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(v[0],"px, ").concat(v[1],"px);")+"width:".concat(f[0],"px;height:").concat(f[1],"px;");var C=this.hitTest(r,n,a);b=ls(n.startPassedTargets,C,this.continueSelect&&this.continueSelectWithoutDeselect)}var k=this.emit("drag",De(De({},a),{data:n.data,isSelect:l,rect:r}));if(k===!1){this.target.style.cssText+="display: none;",a.stop();return}l&&this._select(b,r,a)},i._sameCombiKey=function(a,r,n){if(!r)return!1;var s=Ho(a.inputEvent,a.key),o=[].concat(r),d=Ln(o[0])?o:[o];if(n){var u=a.key;return d.some(function(l){return l.some(function(c){return c===u})})}return d.some(function(l){return l.every(function(c){return s.indexOf(c)>-1})})},i._findElement=function(a,r){for(var n=a;n&&!(r.indexOf(n)>-1);)n=n.parentElement;return n},i._refreshGroups=function(a){var r,n=a.innerWidth,s=a.innerHeight,o=a.selectablePoints;if(this.options.checkOverflow){var d=(r=this.gesto.getEventData().innerScrollOptions)===null||r===void 0?void 0:r.container,u=a.selectableInnerScrollParentMap,l=a.selectableInnerScrollPathsList;a.selectableInners=l.map(function(m,v){var f=!1;return m.every(function(b){if(f)return!0;if(b===d)return f=!0,!0;var C=u.get(b);if(C){var k=o[v],F=C.points,_=Qr(k,F);if(!_.length)return!1}return!0})})}if(!n||!s)a.innerGroups=null;else{var c=a.selectablePoints,p={};c.forEach(function(m,v){var f=1/0,b=-1/0,C=1/0,k=-1/0;m.forEach(function(N){var y=Math.floor(N[0]/n),D=Math.floor(N[1]/s);f=Math.min(y,f),b=Math.max(y,b),C=Math.min(D,C),k=Math.max(D,k)});for(var F=f;F<=b;++F)for(var _=C;_<=k;++_)p[F]=p[F]||{},p[F][_]=p[F][_]||[],p[F][_].push(v)}),a.innerGroups=p}},e=Dd([nd(lr,function(a,r){var n={enumerable:!0,configurable:!0,get:function(){return this.options[r]}},s=Jr("get ".concat(r));a[s]?n.get=function(){return this[s]()}:n.get=function(){return this.options[r]};var o=Jr("set ".concat(r));a[o]?n.set=function(u){this[o](u)}:n.set=function(u){this.options[r]=u},Object.defineProperty(a,r,n)})],e),e}(Uo),Bd=function(t){qo(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Md),Nd=Bd,Li=function(){return Li=Object.assign||function(e){for(var i,a=1,r=arguments.length;a<r;a++){i=arguments[a];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Li.apply(this,arguments)},Xo={};Ad.forEach(function(t){Xo[t]=function(){for(var e,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return(e=this.$_selecto)[t].apply(e,i)}});var Ko={};lr.forEach(function(t){Ko[t]=function(e){return this.$_selecto[t]=e}});var ur={name:"selecto",methods:Xo,props:ds,watch:Ko,mounted:function(){var t=this,e=this.$props,i={};ds.forEach(function(r){var n=e[r];$o(n)||(i[r]=n)});var a=new Nd(Li(Li({},i),{portalContainer:this.$refs.selectoElement}));this.$_selecto=a,Id.forEach(function(r){a.on(r,function(n){t.$emit(r,Li({},n))})})},beforeUnmount:function(){this.$_selecto.destroy()}};const Rd={ref:"selectoElement"};function $d(t,e,i,a,r,n){return I(),J("div",Rd,null,512)}ur.render=$d;ur.__file="src/Selecto.vue";var za={exports:{}};za.exports=Zo;za.exports.addWheelListener=Zo;za.exports.removeWheelListener=Ud;function Zo(t,e,i){t.addEventListener("wheel",e,i)}function Ud(t,e,i){t.removeEventListener("wheel",e,i)}var ja={exports:{}},Ld=4,zd=.001,jd=1e-7,Vd=10,Bi=11,ya=1/(Bi-1),Hd=typeof Float32Array=="function";function Qo(t,e){return 1-3*e+3*t}function Jo(t,e){return 3*e-6*t}function el(t){return 3*t}function Ia(t,e,i){return((Qo(e,i)*t+Jo(e,i))*t+el(e))*t}function tl(t,e,i){return 3*Qo(e,i)*t*t+2*Jo(e,i)*t+el(e)}function Wd(t,e,i,a,r){var n,s,o=0;do s=e+(i-e)/2,n=Ia(s,a,r)-t,n>0?i=s:e=s;while(Math.abs(n)>jd&&++o<Vd);return s}function qd(t,e,i,a){for(var r=0;r<Ld;++r){var n=tl(e,i,a);if(n===0)return e;var s=Ia(e,i,a)-t;e-=s/n}return e}function Gd(t){return t}var Yd=function(e,i,a,r){if(!(0<=e&&e<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===i&&a===r)return Gd;for(var n=Hd?new Float32Array(Bi):new Array(Bi),s=0;s<Bi;++s)n[s]=Ia(s*ya,e,a);function o(d){for(var u=0,l=1,c=Bi-1;l!==c&&n[l]<=d;++l)u+=ya;--l;var p=(d-n[l])/(n[l+1]-n[l]),m=u+p*ya,v=tl(m,e,a);return v>=zd?qd(d,m,e,a):v===0?m:Wd(d,u,u+ya,e,a)}return function(u){return u===0?0:u===1?1:Ia(o(u),i,r)}},wi=Yd,cs={ease:wi(.25,.1,.25,1),easeIn:wi(.42,0,1,1),easeOut:wi(0,0,.58,1),easeInOut:wi(.42,0,.58,1),linear:wi(0,0,1,1)};ja.exports=Xd;ja.exports.makeAggregateRaf=il;ja.exports.sharedScheduler=il();function Xd(t,e,i){var a=Object.create(null),r=Object.create(null);i=i||{};var n=typeof i.easing=="function"?i.easing:cs[i.easing];n||(i.easing&&console.warn("Unknown easing function in amator: "+i.easing),n=cs.ease);var s=typeof i.step=="function"?i.step:hs,o=typeof i.done=="function"?i.done:hs,d=Kd(i.scheduler),u=Object.keys(e);u.forEach(function(C){a[C]=t[C],r[C]=e[C]-t[C]});var l=typeof i.duration=="number"?i.duration:400,c=Math.max(1,l*.06),p,m=0;return p=d.next(f),{cancel:v};function v(){d.cancel(p),p=0}function f(){var C=n(m/c);m+=1,b(C),m<=c?(p=d.next(f),s(t)):(p=0,setTimeout(function(){o(t)},0))}function b(C){u.forEach(function(k){t[k]=r[k]*C+a[k]})}}function hs(){}function Kd(t){if(!t){var e=typeof window!="undefined"&&window.requestAnimationFrame;return e?Zd():Qd()}if(typeof t.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof t.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return t}function Zd(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function Qd(){return{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}}}function il(){var t=new Set,e=new Set,i=0;return{next:r,cancel:r,clearAll:a};function a(){t.clear(),e.clear(),cancelAnimationFrame(i),i=0}function r(o){e.add(o),n()}function n(){i||(i=requestAnimationFrame(s))}function s(){i=0;var o=e;e=t,t=o,t.forEach(function(d){d()}),t.clear()}}var Jd=function(e){tc(e);var i=ec(e);return e.on=i.on,e.off=i.off,e.fire=i.fire,e};function ec(t){var e=Object.create(null);return{on:function(i,a,r){if(typeof a!="function")throw new Error("callback is expected to be a function");var n=e[i];return n||(n=e[i]=[]),n.push({callback:a,ctx:r}),t},off:function(i,a){var r=typeof i=="undefined";if(r)return e=Object.create(null),t;if(e[i]){var n=typeof a!="function";if(n)delete e[i];else for(var s=e[i],o=0;o<s.length;++o)s[o].callback===a&&s.splice(o,1)}return t},fire:function(i){var a=e[i];if(!a)return t;var r;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var n=0;n<a.length;++n){var s=a[n];s.callback.apply(s.ctx,r)}return t}}}function tc(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],i=0;i<e.length;++i)if(t.hasOwnProperty(e[i]))throw new Error("Subject cannot be eventified, since it already has property '"+e[i]+"'")}var ic=ac;function ac(t,e,i){typeof i!="object"&&(i={});var a=typeof i.minVelocity=="number"?i.minVelocity:5,r=typeof i.amplitude=="number"?i.amplitude:.25,n=typeof i.cancelAnimationFrame=="function"?i.cancelAnimationFrame:nc(),s=typeof i.requestAnimationFrame=="function"?i.requestAnimationFrame:rc(),o,d,u=342,l,c,p,m,v,f,b,C;return{start:F,stop:N,cancel:k};function k(){n(l),n(C)}function F(){o=t(),m=b=c=v=0,d=new Date,n(l),n(C),l=s(_)}function _(){var D=Date.now(),x=D-d;d=D;var $=t(),z=$.x-o.x,X=$.y-o.y;o=$;var W=1e3/(1+x);c=.8*z*W+.2*c,v=.8*X*W+.2*v,l=s(_)}function N(){n(l),n(C);var D=t();p=D.x,f=D.y,d=Date.now(),(c<-a||c>a)&&(m=r*c,p+=m),(v<-a||v>a)&&(b=r*v,f+=b),C=s(y)}function y(){var D=Date.now()-d,x=!1,$=0,z=0;m&&($=-m*Math.exp(-D/u),$>.5||$<-.5?x=!0:$=m=0),b&&(z=-b*Math.exp(-D/u),z>.5||z<-.5?x=!0:z=b=0),x&&(e(p+$,f+z),C=s(y))}}function nc(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function rc(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(t){return setTimeout(t,16)}}var sc=oc;function oc(t){if(t)return{capture:fs,release:fs};var e,i,a,r=!1;return{capture:n,release:s};function n(o){r=!0,i=window.document.onselectstart,a=window.document.ondragstart,window.document.onselectstart=ps,e=o,e.ondragstart=ps}function s(){!r||(r=!1,window.document.onselectstart=i,e&&(e.ondragstart=a))}}function ps(t){return t.stopPropagation(),!1}function fs(){}var lc=uc;function uc(){this.x=0,this.y=0,this.scale=1}var dr={exports:{}};dr.exports=dc;dr.exports.canAttach=al;function dc(t,e){if(!al(t))throw new Error("svg element is required for svg.panzoom to work");var i=t.ownerSVGElement;if(!i)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");e.disableKeyboardInteraction||i.setAttribute("tabindex",0);var a={getBBox:n,getScreenCTM:s,getOwner:r,applyTransform:d,initTransform:o};return a;function r(){return i}function n(){var u=t.getBBox();return{left:u.x,top:u.y,width:u.width,height:u.height}}function s(){var u=i.getCTM();return u||i.getScreenCTM()}function o(u){var l=t.getCTM();l===null&&(l=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),u.x=l.e,u.y=l.f,u.scale=l.a,i.removeAttributeNS(null,"viewBox")}function d(u){t.setAttribute("transform","matrix("+u.scale+" 0 0 "+u.scale+" "+u.x+" "+u.y+")")}}function al(t){return t&&t.ownerSVGElement&&t.getCTM}var cr={exports:{}};cr.exports=cc;cr.exports.canAttach=nl;function cc(t,e){var i=nl(t);if(!i)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var a=t.parentElement;t.scrollTop=0,e.disableKeyboardInteraction||a.setAttribute("tabindex",0);var r={getBBox:s,getOwner:n,applyTransform:o};return r;function n(){return a}function s(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function o(d){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+d.scale+", 0, 0, "+d.scale+", "+d.x+", "+d.y+")"}}function nl(t){return t&&t.parentElement&&t.style}var ms=za.exports,pn=ja.exports,hc=Jd,pc=ic,rl=sc,fc=rl(),mc=rl(!0),gc=lc,gs=dr.exports,vs=cr.exports,vc=1,yc=1.75,ys=300,bs=200,bc=sl;function sl(t,e){e=e||{};var i=e.controller;if(i||(gs.canAttach(t)?i=gs(t,e):vs.canAttach(t)&&(i=vs(t,e))),!i)throw new Error("Cannot create panzoom for the current type of dom element");var a=i.getOwner(),r={x:0,y:0},n=!1,s=new gc;i.initTransform&&i.initTransform(s);var o=typeof e.filterKey=="function"?e.filterKey:oi,d=typeof e.pinchSpeed=="number"?e.pinchSpeed:1,u=e.bounds,l=typeof e.maxZoom=="number"?e.maxZoom:Number.POSITIVE_INFINITY,c=typeof e.minZoom=="number"?e.minZoom:0,p=typeof e.boundsPadding=="number"?e.boundsPadding:.05,m=typeof e.zoomDoubleClickSpeed=="number"?e.zoomDoubleClickSpeed:yc,v=e.beforeWheel||oi,f=e.beforeMouseDown||oi,b=typeof e.zoomSpeed=="number"?e.zoomSpeed:vc,C=ws(e.transformOrigin),k=e.enableTextSelection?mc:fc;wc(u),e.autocenter&&Ya();var F,_=0,N=0,y=0,D=null,x=new Date,$,z=!1,X=!1,W,V,ae,K,ee,A;"smoothScroll"in e&&!e.smoothScroll?A=Sc():A=pc(an,T,e.smoothScroll);var q,Z,ce,fe=!1;L();var me={dispose:B,moveBy:g,moveTo:mi,smoothMoveTo:ca,centerOn:da,zoomTo:fa,zoomAbs:Ht,smoothZoom:pa,smoothZoomAbs:Tu,showRectangle:pi,pause:Qe,resume:we,isPaused:Je,getTransform:Xa,getMinZoom:Ka,setMinZoom:Za,getMaxZoom:Qa,setMaxZoom:Ja,getTransformOrigin:en,setTransformOrigin:tn,getZoomSpeed:fi,setZoomSpeed:na};hc(me);var H=typeof e.initialX=="number"?e.initialX:s.x,ke=typeof e.initialY=="number"?e.initialY:s.y,_e=typeof e.initialZoom=="number"?e.initialZoom:s.scale;return(H!=s.x||ke!=s.y||_e!=s.scale)&&Ht(H,ke,_e),me;function Qe(){te(),fe=!0}function we(){fe&&(L(),fe=!1)}function Je(){return fe}function pi(w){var P=a.getBoundingClientRect(),O=nt(P.width,P.height),M=w.right-w.left,Y=w.bottom-w.top;if(!Number.isFinite(M)||!Number.isFinite(Y))throw new Error("Invalid rectangle");var re=O.x/M,se=O.y/Y,Oe=Math.min(re,se);s.x=-(w.left+M/2)*Oe+O.x/2,s.y=-(w.top+Y/2)*Oe+O.y/2,s.scale=Oe}function nt(w,P){if(i.getScreenCTM){var O=i.getScreenCTM(),M=O.a,Y=O.d,re=O.e,se=O.f;r.x=w*M-re,r.y=P*Y-se}else r.x=w,r.y=P;return r}function Ya(){var w,P,O=0,M=0,Y=sa();if(Y)O=Y.left,M=Y.top,w=Y.right-Y.left,P=Y.bottom-Y.top;else{var re=a.getBoundingClientRect();w=re.width,P=re.height}var se=i.getBBox();if(!(se.width===0||se.height===0)){var Oe=P/se.height,Yt=w/se.width,Dt=Math.min(Yt,Oe);s.x=-(se.left+se.width/2)*Dt+w/2+O,s.y=-(se.top+se.height/2)*Dt+P/2+M,s.scale=Dt}}function Xa(){return s}function Ka(){return c}function Za(w){c=w}function Qa(){return l}function Ja(w){l=w}function en(){return C}function tn(w){C=ws(w)}function fi(){return b}function na(w){if(!Number.isFinite(w))throw new Error("Zoom speed should be a number");b=w}function an(){return{x:s.x,y:s.y}}function mi(w,P){s.x=w,s.y=P,Vt(),Gt("pan"),gi()}function ra(w,P){mi(s.x+w,s.y+P)}function Vt(){var w=sa();if(!!w){var P=!1,O=oa(),M=w.left-O.right;return M>0&&(s.x+=M,P=!0),M=w.right-O.left,M<0&&(s.x+=M,P=!0),M=w.top-O.bottom,M>0&&(s.y+=M,P=!0),M=w.bottom-O.top,M<0&&(s.y+=M,P=!0),P}}function sa(){if(!!u){if(typeof u=="boolean"){var w=a.getBoundingClientRect(),P=w.width,O=w.height;return{left:P*p,top:O*p,right:P*(1-p),bottom:O*(1-p)}}return u}}function oa(){var w=i.getBBox(),P=la(w.left,w.top);return{left:P.x,top:P.y,right:w.width*s.scale+P.x,bottom:w.height*s.scale+P.y}}function la(w,P){return{x:w*s.scale+s.x,y:P*s.scale+s.y}}function gi(){n=!0,F=window.requestAnimationFrame(et)}function ua(w,P,O){if(fn(w)||fn(P)||fn(O))throw new Error("zoom requires valid numbers");var M=s.scale*O;if(M<c){if(s.scale===c)return;O=c/s.scale}if(M>l){if(s.scale===l)return;O=l/s.scale}var Y=nt(w,P);if(s.x=Y.x-O*(Y.x-s.x),s.y=Y.y-O*(Y.y-s.y),u&&p===1&&c===1)s.scale*=O,Vt();else{var re=Vt();re||(s.scale*=O)}Gt("zoom"),gi()}function Ht(w,P,O){var M=O/s.scale;ua(w,P,M)}function da(w){var P=w.ownerSVGElement;if(!P)throw new Error("ui element is required to be within the scene");var O=w.getBoundingClientRect(),M=O.left+O.width/2,Y=O.top+O.height/2,re=P.getBoundingClientRect(),se=re.width/2-M,Oe=re.height/2-Y;g(se,Oe,!0)}function ca(w,P){g(w-s.x,P-s.y,!0)}function g(w,P,O){if(!O)return ra(w,P);q&&q.cancel();var M={x:0,y:0},Y={x:w,y:P},re=0,se=0;q=pn(M,Y,{step:function(Oe){ra(Oe.x-re,Oe.y-se),re=Oe.x,se=Oe.y}})}function T(w,P){ma(),mi(w,P)}function B(){te()}function L(){a.addEventListener("mousedown",xr,{passive:!1}),a.addEventListener("dblclick",Or,{passive:!1}),a.addEventListener("touchstart",kr,{passive:!1}),a.addEventListener("keydown",qt,{passive:!1}),ms.addWheelListener(a,Nr,{passive:!1}),gi()}function te(){ms.removeWheelListener(a,Nr),a.removeEventListener("mousedown",xr),a.removeEventListener("keydown",qt),a.removeEventListener("dblclick",Or),a.removeEventListener("touchstart",kr),F&&(window.cancelAnimationFrame(F),F=0),A.cancel(),Mr(),Br(),k.release(),rn()}function et(){n&&Wt()}function Wt(){n=!1,i.applyTransform(s),Gt("transform"),F=0}function qt(w){var P=0,O=0,M=0;if(w.keyCode===38?O=1:w.keyCode===40?O=-1:w.keyCode===37?P=1:w.keyCode===39?P=-1:w.keyCode===189||w.keyCode===109?M=1:(w.keyCode===187||w.keyCode===107)&&(M=-1),!o(w,P,O,M)){if(P||O){w.preventDefault(),w.stopPropagation();var Y=a.getBoundingClientRect(),re=Math.min(Y.width,Y.height),se=.05,Oe=re*se*P,Yt=re*se*O;g(Oe,Yt)}if(M){var Dt=Rr(M*100),re=C?yi():nn();fa(re.x,re.y,Dt)}}}function nn(){var w=a.getBoundingClientRect();return{x:w.width/2,y:w.height/2}}function kr(w){if(Su(w),vi(),w.touches.length===1)return Eu(w,w.touches[0]);w.touches.length===2&&(ee=Pr(w.touches[0],w.touches[1]),ce=!0,_r())}function Su(w){e.onTouch&&!e.onTouch(w)||(w.stopPropagation(),w.preventDefault())}function Cu(w){vi(),!(e.onDoubleClick&&!e.onDoubleClick(w))&&(w.preventDefault(),w.stopPropagation())}function Eu(w){N=new Date;var P=w.touches[0],O=rt(P);$=O;var M=nt(O.x,O.y);W=M.x,V=M.y,ae=W,K=V,A.cancel(),_r()}function _r(){z||(z=!0,document.addEventListener("touchmove",Dr),document.addEventListener("touchend",ha),document.addEventListener("touchcancel",ha))}function Dr(w){if(w.touches.length===1){w.stopPropagation();var P=w.touches[0],O=rt(P),M=nt(O.x,O.y),Y=M.x-W,re=M.y-V;Y!==0&&re!==0&&$r(),W=M.x,V=M.y,g(Y,re)}else if(w.touches.length===2){ce=!0;var se=w.touches[0],Oe=w.touches[1],Yt=Pr(se,Oe),Dt=1+(Yt/ee-1)*d,Ur=rt(se),Lr=rt(Oe);if(W=(Ur.x+Lr.x)/2,V=(Ur.y+Lr.y)/2,C){var O=yi();W=O.x,V=O.y}fa(W,V,Dt),ee=Yt,w.stopPropagation(),w.preventDefault()}}function vi(){y&&(clearTimeout(y),y=0)}function Fr(w){if(!!e.onClick){vi();var P=W-ae,O=V-K,M=Math.sqrt(P*P+O*O);M>5||(y=setTimeout(function(){y=0,e.onClick(w)},ys))}}function ha(w){if(vi(),w.touches.length>0){var P=rt(w.touches[0]),O=nt(P.x,P.y);W=O.x,V=O.y}else{var M=new Date;if(M-_<ys)if(C){var P=yi();pa(P.x,P.y,m)}else pa($.x,$.y,m);else M-N<bs&&Fr(w);_=M,rn(),Br()}}function Pr(w,P){var O=w.clientX-P.clientX,M=w.clientY-P.clientY;return Math.sqrt(O*O+M*M)}function Or(w){Cu(w);var P=rt(w);C&&(P=yi()),pa(P.x,P.y,m)}function xr(w){if(vi(),!f(w)){if(D=w,x=new Date,z)return w.stopPropagation(),!1;var P=w.button===1&&window.event!==null||w.button===0;if(!!P){A.cancel();var O=rt(w),M=nt(O.x,O.y);return ae=W=M.x,K=V=M.y,document.addEventListener("mousemove",Ir),document.addEventListener("mouseup",Ar),k.capture(w.target||w.srcElement),!1}}}function Ir(w){if(!z){$r();var P=rt(w),O=nt(P.x,P.y),M=O.x-W,Y=O.y-V;W=O.x,V=O.y,g(M,Y)}}function Ar(){var w=new Date;w-x<bs&&Fr(D),k.release(),rn(),Mr()}function Mr(){document.removeEventListener("mousemove",Ir),document.removeEventListener("mouseup",Ar),X=!1}function Br(){document.removeEventListener("touchmove",Dr),document.removeEventListener("touchend",ha),document.removeEventListener("touchcancel",ha),X=!1,ce=!1,z=!1}function Nr(w){if(!v(w)){A.cancel();var P=w.deltaY;w.deltaMode>0&&(P*=100);var O=Rr(P);if(O!==1){var M=C?yi():rt(w);fa(M.x,M.y,O),w.preventDefault()}}}function rt(w){var P,O,M=a.getBoundingClientRect();return P=w.clientX-M.left,O=w.clientY-M.top,{x:P,y:O}}function pa(w,P,O){var M=s.scale,Y={scale:M},re={scale:O*M};A.cancel(),ma(),Z=pn(Y,re,{step:function(se){Ht(w,P,se.scale)},done:ku})}function Tu(w,P,O){var M=s.scale,Y={scale:M},re={scale:O};A.cancel(),ma(),Z=pn(Y,re,{step:function(se){Ht(w,P,se.scale)}})}function yi(){var w=a.getBoundingClientRect();return{x:w.width*C.x,y:w.height*C.y}}function fa(w,P,O){return A.cancel(),ma(),ua(w,P,O)}function ma(){Z&&(Z.cancel(),Z=null)}function Rr(w){var P=Math.sign(w),O=Math.min(.25,Math.abs(b*w/128));return 1-P*O}function $r(){X||(Gt("panstart"),X=!0,A.start())}function rn(){X&&(ce||A.stop(),Gt("panend"))}function ku(){Gt("zoomend")}function Gt(w){me.fire(w,me)}}function ws(t){if(!!t){if(typeof t=="object")return(!Qt(t.x)||!Qt(t.y))&&Ss(t),t;Ss()}}function Ss(t){throw console.error(t),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function oi(){}function wc(t){var e=typeof t;if(!(e==="undefined"||e==="boolean")){var i=Qt(t.left)&&Qt(t.top)&&Qt(t.bottom)&&Qt(t.right);if(!i)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function Qt(t){return Number.isFinite(t)}function fn(t){return Number.isNaN?Number.isNaN(t):t!==t}function Sc(){return{start:oi,stop:oi,cancel:oi}}function Cc(){if(typeof document=="undefined")return;var t=document.getElementsByTagName("script");if(!t)return;for(var e,i=0;i<t.length;++i){var a=t[i];if(a.src&&a.src.match(/\bpanzoom(\.min)?\.js/)){e=a;break}}if(!e)return;var r=e.getAttribute("query");if(!r)return;var n=e.getAttribute("name")||"pz",s=Date.now();o();function o(){var l=document.querySelector(r);if(!l){var c=Date.now(),p=c-s;if(p<2e3){setTimeout(o,100);return}console.error("Cannot find the panzoom element",n);return}var m=d(e);console.log(m),window[n]=sl(l,m)}function d(l){for(var c=l.attributes,p={},m=0;m<c.length;++m){var v=c[m],f=u(v);f&&(p[f.name]=f.value)}return p}function u(l){if(!!l.name){var c=l.name[0]==="p"&&l.name[1]==="z"&&l.name[2]==="-";if(!!c){var p=l.name.substr(3),m=JSON.parse(l.value);return{name:p,value:m}}}}}Cc();const Ec=He({name:"DuctEl"}),Tc={viewBox:"29.11 -4.312 470.89 47.466",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",width:"100%",height:"100%"},kc=pe("g",{style:{},transform:"matrix(0.894879, 0, 0, 0.632443, -173.045822, -2.156334)"},[pe("path",{d:"M 225.903 35.245 L 250 71.643 L 752.108 71.643 L 735.361 35.245 L 752.108 -3.408 L 250 -1.153 L 225.903 35.245 Z",style:{fill:"rgb(166, 166, 166)"}})],-1),_c=[kc];function Dc(t,e,i,a,r,n){return I(),J("svg",Tc,_c)}var Fc=We(Ec,[["render",Dc]]);const Pc=He({name:"FanEl",props:{active:{type:Boolean,required:!1,default:!1},inAlarm:{type:Boolean,required:!1,default:!1}}}),Oc=Qi('<g fill="#659dc5" transform="matrix(1, 0, 0, 1, -0.231, -4.151388)" data-v-48423e73><g class="fan" data-v-48423e73><g id="g8" data-v-48423e73><path class="fan-background" d="m12.297 5.154c-6.117 0-11.066 4.9492-11.066 11.066 0 6.117 4.9492 11.066 11.066 11.066 5.7137 0 10.408-4.3091 11.003-9.8647h7.525v-12.268h-18.148c-0.12601-0.0043-0.25236 0-0.37941 0z" fill-rule="evenodd" stroke="#000" stroke-width="1px" fill="inherit" data-v-48423e73></path></g><g id="g4148" transform="translate(12.464 16.395)" data-v-48423e73><g id="g4162" stroke="#000" stroke-width="1.5" fill="none" class="rotating-middle" data-v-48423e73><path id="use3009" d="m-1.8112-3.9787 3.6227-4.4971" data-v-48423e73></path><path id="use3011" d="m0.87376-4.2835 5.5741-1.5089" data-v-48423e73></path><path id="use3013" d="m3.2243-2.9521 5.3965 2.0557" data-v-48423e73></path><path id="use3015" d="m4.3433-0.4935 3.1575 4.835" data-v-48423e73></path><path id="use3017" d="m3.8043 2.1547-0.28747 5.7676" data-v-48423e73></path><path id="use3019" d="m1.8113 3.9787-3.6227 4.4971" data-v-48423e73></path><path id="use3021" d="m-0.87324 4.2837-5.5741 1.5089" data-v-48423e73></path><path id="use3023" d="m-3.2242 2.9527-5.3965-2.0559" data-v-48423e73></path><path id="use3025" d="m-4.3432 0.4935-3.158-4.8353" data-v-48423e73></path><path id="use3027" d="m-3.8032-2.1541 0.2875-5.7676" data-v-48423e73></path></g></g></g></g>',1),xc=[Oc];function Ic(t,e,i,a,r,n){return I(),J("svg",{height:"100%",width:"100%",viewBox:"0 0 32 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",class:Zi({active:t.active,"in-alarm":t.inAlarm})},xc,2)}var Ac=We(Pc,[["render",Ic],["__scopeId","data-v-48423e73"]]);const Mc=He({name:"CoolingCoil",props:{active:{type:Boolean,required:!1,default:!1},inAlarm:{type:Boolean,required:!1,default:!1}}}),Bc=Qi('<g stroke="#000" transform="matrix(1, 0, 0, 1, -6.058399, -1.3729)" data-v-7495a0c9><rect id="rect4367" height="27.246" width="17.868" x="7.066" y="2.3772" fill="#659dc5" data-v-7495a0c9></rect><g transform="translate(24.9334,29.6232) rotate(180)" data-v-7495a0c9><rect id="rect4367" class="cooling-coil" height="27.246" width="17.875" x="0" y="0" fill="#659dc5" stroke="none" data-v-7495a0c9></rect></g><rect id="rect4367" height="27.246" width="17.868" x="7.066" y="2.3772" fill="none" data-v-7495a0c9></rect><path id="path3001" d="m7.322 2.3729 17.424 27.254" stroke-width="1px" fill="none" data-v-7495a0c9></path><path id="path3003" d="m24.929 2.3734-17.642 27.182" stroke-width="1px" fill="none" data-v-7495a0c9></path></g>',1),Nc=[Bc];function Rc(t,e,i,a,r,n){return I(),J("svg",{viewBox:"0 0 20 29",height:"100%",width:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg",class:Zi({active:t.active,"in-alarm":t.inAlarm})},Nc,2)}var $c=We(Mc,[["render",Rc],["__scopeId","data-v-7495a0c9"]]);const Uc=He({name:"HeatingCoil",props:{active:{type:Boolean,required:!1,default:!1},inAlarm:{type:Boolean,required:!1,default:!1}}}),Lc=Qi('<defs id="defs3" data-v-255f5864><rect id="heating-coil-rect" height="27.246" width="17.868" x="0" y="0" data-v-255f5864></rect></defs><g stroke="#000000" id="g15" transform="translate(-6.129206,-1.5327875)" data-v-255f5864><use xlink:href="#heating-coil-rect" fill="#659dc5" stroke="none" x="7.066" y="2.3771999" id="use6" data-v-255f5864></use><g transform="rotate(180,12.4667,14.8116)" id="g10" data-v-255f5864><use xlink:href="#heating-coil-rect" class="heating-coil" x="0" y="0" fill="#659dc5" stroke="none" id="use8" data-v-255f5864></use></g><use xlink:href="#heating-coil-rect" stroke-width="1" fill="none" x="7.066" y="2.3771999" id="use12" data-v-255f5864></use><path id="path3003" stroke-linejoin="miter" d="M 24.929,2.3734 7.2868,29.555" stroke="#000000" stroke-linecap="butt" stroke-width="1px" fill="none" data-v-255f5864></path></g>',2),zc=[Lc];function jc(t,e,i,a,r,n){return I(),J("svg",{viewBox:"0 0 19.526541 28.758413",height:"100%",width:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg",class:Zi({active:t.active,"in-alarm":t.inAlarm})},zc,2)}var Vc=We(Uc,[["render",jc],["__scopeId","data-v-255f5864"]]);const Hc=He({name:"FilterEl"}),Wc={viewBox:"0 0 13 29",height:"100%",width:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},qc=pe("g",{stroke:"#000","stroke-width":"1",transform:"matrix(1, 0, 0, 1, -9.37, -1.3252)"},[pe("rect",{id:"rect4367",height:"27.35",width:"11.26",y:"2.3252",x:"10.37",fill:"#659dc5"}),pe("path",{id:"path3756","stroke-linejoin":"miter",d:"m11.892,2.6997,8.2165,4.4334-8.2165,4.4334,8.2165,4.4334-8.2165,4.4334,8.2165,4.4334-8.2165,4.4334","stroke-linecap":"round","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-width":"1.2694304",fill:"none"})],-1),Gc=[qc];function Yc(t,e,i,a,r,n){return I(),J("svg",Wc,Gc)}var Xc=We(Hc,[["render",Yc]]);const Kc=He({name:"HumidifierEl",props:{active:{type:Boolean,required:!1,default:!1},inAlarm:{type:Boolean,required:!1,default:!1}}}),Zc=Qi('<g class="duct-humidifier" transform="matrix(1, 0, 0, 1, -3.324199, -7.877)" data-v-451def2c><g id="g11" transform="translate(0 5.1505)" data-v-451def2c><g id="g13" stroke="#000" stroke-width=".5" class="water-drops" fill="#00f0ff" data-v-451def2c><path id="path4150" d="m14.291 6.7851c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path><g id="g4236" transform="translate(0 .17167)" data-v-451def2c><path id="path4150-7" d="m18.179 5.3612c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path><path id="path4150-7-1" d="m18.234 7.8656c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path></g></g><g id="g19" transform="translate(0,8)" data-v-451def2c><g id="g21" stroke="#000" stroke-width=".5" class="water-drops water-drops-2" fill="#00f0ff" data-v-451def2c><path id="path23" d="m14.291 6.7851c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path><g id="g25" transform="translate(0 .17167)" data-v-451def2c><path id="path27" d="m18.179 5.3612c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path><path id="path29" d="m18.234 7.8656c0.46542-0.0958 0.69019-0.27099 0.99164-0.49615 0.10429-0.07789 0.23068-0.12587 0.37088-0.12587 0.34281 0 0.62078 0.27918 0.62078 0.62199s-0.27796 0.61956-0.62078 0.61956c-0.13834 0-0.26988-0.0428-0.37088-0.1222-0.29895-0.23498-0.52493-0.40696-0.99168-0.49732z" data-v-451def2c></path></g></g></g></g><path id="rect4136-6" class="humidifier-body" d="m4.3242 8.877v22.586h4.0059v-9.883h4.3789v-2.617h-4.3789v-5.721h4.3789v-2.617h-4.3789v-1.748h-4.0059z" stroke="#000" fill="#659dc5" data-v-451def2c></path></g>',1),Qc=[Zc];function Jc(t,e,i,a,r,n){return I(),J("svg",{viewBox:"0 0 18 25",height:"100%",width:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:bx":"https://boxy-svg.com",class:Zi({inactive:!t.active,active:t.active,"in-alarm":t.inAlarm})},Qc,2)}var eh=We(Kc,[["render",Jc],["__scopeId","data-v-451def2c"]]);const th=He({name:"DamperEl",props:{inAlarm:{type:Boolean,required:!1,default:!1}}}),ih=Qi('<rect id="rect4367" class="damper" height="27.5" width="12" stroke="#000000" stroke-miterlimit="4" x="0.69481522" y="0.67645228" stroke-dasharray="none" stroke-width="1" fill="#659dc5" data-v-5ff604df></rect><g stroke="#000000" stroke-width="1.5px" id="g19" transform="translate(-9.3051848,-1.5735477)" data-v-5ff604df><g transform="translate(16,7)" id="g5" data-v-5ff604df><line x1="-5" x2="5" y1="0" y2="0" transform="rotate(-35)" class="damper-line" id="line3" data-v-5ff604df></line></g><g transform="translate(16,13)" id="g9" data-v-5ff604df><line x1="-5" x2="5" y1="0" y2="0" transform="rotate(-35)" class="damper-line" id="line7" data-v-5ff604df></line></g><g transform="translate(16,19)" id="g13" data-v-5ff604df><line x1="-5" x2="5" y1="0" y2="0" transform="rotate(-35)" class="damper-line" id="line11" data-v-5ff604df></line></g><g transform="translate(16,25)" id="g17" data-v-5ff604df><line x1="-5" x2="5" y1="0" y2="0" transform="rotate(-35)" class="damper-line" id="line15" data-v-5ff604df></line></g></g><g id="g4877" stroke-linejoin="miter" transform="matrix(1.2268237,0,0,0.94845469,-13.299764,-1.1862851)" stroke="#000000" stroke-linecap="butt" fill="none" data-v-5ff604df><path id="path4317" stroke-width="1.06273px" d="m 16.298,2.2402 v 28.442" data-v-5ff604df></path></g>',3),ah=[ih];function nh(t,e,i,a,r,n){return I(),J("svg",{viewBox:"0 0 13.431694 28.950886",height:"100%",width:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg",class:Zi({"in-alarm":t.inAlarm})},ah,2)}var rh=We(th,[["render",nh],["__scopeId","data-v-5ff604df"]]);const sh=He({name:"TextEl",props:{content:{type:String,default:"Text element"},fontSize:{type:Number,default:16},color:{type:String,default:"black"}},setup(){const t=ye(!1),e=ye(null);return sr(()=>{e.value.focus()}),{editable:t,editableElement:e}}});function oh(t,e,i,a,r,n){return I(),J("div",{ref:"editableElement",contenteditable:!0,style:Bo(`font-size: ${t.fontSize}px; color: ${t.color}`)},si(t.content),5)}var lh=We(sh,[["render",oh],["__scopeId","data-v-4471ed3f"]]);const uh=He({name:"TemperatureEl"}),dh={height:"100%",width:"100%",version:"1.1",viewBox:"0 0 10.423067 22.852614",xmlns:"http://www.w3.org/2000/svg"},ch=pe("g",{id:"layer1",stroke:"#000000","stroke-width":"1px",transform:"translate(-10.804626,-9.2243756)"},[pe("rect",{id:"rect3012",height:"14.505",width:"2.901",y:"9.9127998",x:"14.557",fill:"#ffff00"}),pe("path",{id:"path3010","stroke-width":"1.2px",transform:"matrix(0.74098,0,0,0.74098,7.3047,15.679)",fill:"#659dc5",d:"m 17.949,15.898 -3.1021,5.373 H 8.6427 L 5.5406,15.898 8.6427,10.525 h 6.2042 z"})],-1),hh=pe("g",{id:"g4141",transform:"translate(-1.2033861,-8.1217684)"},[pe("circle",{r:"0.77312505",cy:"28.129852",cx:"6.4061227",id:"path4137",style:{fill:"none","fill-opacity":"1",stroke:"#000000","stroke-width":"0.5","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}}),pe("path",{"inkscape:connector-curvature":"0",id:"path4139",d:"M 6.4061205,27.157211 V 23.65349",style:{fill:"none","fill-rule":"evenodd",stroke:"#000000","stroke-width":"0.5","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}})],-1),ph=[ch,hh];function fh(t,e,i,a,r,n){return I(),J("svg",dh,ph)}var mh=We(uh,[["render",fh]]);const gh=He({name:"ObjectType",components:{Duct:Fc,Fan:Ac,CoolingCoil:$c,HeatingCoil:Vc,FilterEl:Xc,Humidifier:eh,Damper:rh,TextEl:lh,Temperature:mh},props:{item:{type:Object,required:!0}},setup(t){return{range:be(()=>{if(t.item.t3Entry.range){const i=jn.find(a=>a.id===t.item.t3Entry.range);if(i)return i.label}return"Unused"})}}}),vh={key:0,class:"object-title"},yh={key:0},bh={class:"ml-2 text-lg"},wh={key:1},Sh={key:2},Ch={key:3},Eh={key:4},Th={key:5},kh={key:6},_h={key:7},Dh={key:8},Fh={key:9},Ph={key:10},Oh=["innerHTML"];function xh(t,e,i,a,r,n){const s=Me("fan"),o=Me("duct"),d=Me("cooling-coil"),u=Me("heating-coil"),l=Me("filter-el"),c=Me("humidifier"),p=Me("damper"),m=Me("text-el"),v=Me("temperature");return I(),J(Mi,null,[t.item.t3Entry?(I(),J("div",vh,[Q(si(t.item.t3Entry[t.item.t3EntryDisplayField]||"N/A")+" - "+si(t.range)+" ",1),t.item.t3Entry.hw_switch_status!==1?(I(),J("span",yh," - "+si(t.item.t3Entry.type==="OUTPUT"&&t.item.t3Entry.hw_switch_status!==1?t.item.t3Entry.hw_switch_status?"MAN-ON":"MAN-OFF":""),1)):je("",!0),pe("span",bh,[t.item.t3Entry.auto_manual?(I(),j(pt,{key:1,name:"swipe_up"},{default:E(()=>[S(Zt,{anchor:"top middle",self:"center middle"},{default:E(()=>[Q(" In manual mode ")]),_:1})]),_:1})):(I(),j(pt,{key:0,name:"motion_photos_auto"},{default:E(()=>[S(Zt,{anchor:"top middle",self:"center middle"},{default:E(()=>[Q(" In auto mode ")]),_:1})]),_:1}))])])):je("",!0),t.item.type==="Fan"?(I(),J("div",wh,[S(s,gt({class:"movable-item fan"},t.item.props),null,16)])):t.item.type==="Duct"?(I(),J("div",Sh,[S(o,{class:"movable-item duct"})])):t.item.type==="CoolingCoil"?(I(),J("div",Ch,[S(d,gt({class:"movable-item cooling-coil"},t.item.props),null,16)])):t.item.type==="HeatingCoil"?(I(),J("div",Eh,[S(u,gt({class:"movable-item heating-coil"},t.item.props),null,16)])):t.item.type==="Filter"?(I(),J("div",Th,[S(l,gt({class:"movable-item filter"},t.item.props),null,16)])):t.item.type==="Humidifier"?(I(),J("div",kh,[S(c,gt({class:"movable-item humidifier"},t.item.props),null,16)])):t.item.type==="Damper"?(I(),J("div",_h,[S(p,gt({class:"movable-item damper"},t.item.props),null,16)])):t.item.type==="Text"?(I(),J("div",Dh,[S(m,gt({class:"movable-item text"},t.item.props),null,16)])):t.item.type==="Temperature"?(I(),J("div",Fh,[S(v,gt({class:"movable-item temperature"},t.item.props),null,16)])):t.item.type.startsWith("Custom-")?(I(),J("div",Ph,[pe("div",{innerHTML:t.item.svg},null,8,Oh)])):je("",!0)],64)}var Ih=We(gh,[["render",xh],["__scopeId","data-v-25770a0c"]]),ea,ge,ol,ci,Bt,Cs,ll,Aa={},ul=[],Ah=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ft(t,e){for(var i in e)t[i]=e[i];return t}function dl(t){var e=t.parentNode;e&&e.removeChild(t)}function h(t,e,i){var a,r,n,s={};for(n in e)n=="key"?a=e[n]:n=="ref"?r=e[n]:s[n]=e[n];if(arguments.length>2&&(s.children=arguments.length>3?ea.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)s[n]===void 0&&(s[n]=t.defaultProps[n]);return zi(t,s,a,r,null)}function zi(t,e,i,a,r){var n={type:t,props:e,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r==null?++ol:r};return r==null&&ge.vnode!=null&&ge.vnode(n),n}function Mh(){return{current:null}}function kt(t){return t.children}function Bh(t,e,i,a,r){var n;for(n in i)n==="children"||n==="key"||n in e||Ma(t,n,null,i[n],a);for(n in e)r&&typeof e[n]!="function"||n==="children"||n==="key"||n==="value"||n==="checked"||i[n]===e[n]||Ma(t,n,e[n],i[n],a)}function Es(t,e,i){e[0]==="-"?t.setProperty(e,i==null?"":i):t[e]=i==null?"":typeof i!="number"||Ah.test(e)?i:i+"px"}function Ma(t,e,i,a,r){var n;e:if(e==="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof a=="string"&&(t.style.cssText=a=""),a)for(e in a)i&&e in i||Es(t.style,e,"");if(i)for(e in i)a&&i[e]===a[e]||Es(t.style,e,i[e])}else if(e[0]==="o"&&e[1]==="n")n=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=i,i?a||t.addEventListener(e,n?ks:Ts,n):t.removeEventListener(e,n?ks:Ts,n);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=i==null?"":i;break e}catch{}typeof i=="function"||(i==null||i===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,i))}}function Ts(t){ci=!0;try{return this.l[t.type+!1](ge.event?ge.event(t):t)}finally{ci=!1}}function ks(t){ci=!0;try{return this.l[t.type+!0](ge.event?ge.event(t):t)}finally{ci=!1}}function Ve(t,e){this.props=t,this.context=e}function Hi(t,e){if(e==null)return t.__?Hi(t.__,t.__.__k.indexOf(t)+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?Hi(t):null}function cl(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return cl(t)}}function Nh(t){ci?setTimeout(t):ll(t)}function _s(t){(!t.__d&&(t.__d=!0)&&Bt.push(t)&&!Ba.__r++||Cs!==ge.debounceRendering)&&((Cs=ge.debounceRendering)||Nh)(Ba)}function Ba(){var t,e,i,a,r,n,s,o;for(Bt.sort(function(d,u){return d.__v.__b-u.__v.__b});t=Bt.shift();)t.__d&&(e=Bt.length,a=void 0,r=void 0,s=(n=(i=t).__v).__e,(o=i.__P)&&(a=[],(r=ft({},n)).__v=n.__v+1,hr(o,n,r,i.__n,o.ownerSVGElement!==void 0,n.__h!=null?[s]:null,a,s==null?Hi(n):s,n.__h),gl(a,n),n.__e!=s&&cl(n)),Bt.length>e&&Bt.sort(function(d,u){return d.__v.__b-u.__v.__b}));Ba.__r=0}function hl(t,e,i,a,r,n,s,o,d,u){var l,c,p,m,v,f,b,C=a&&a.__k||ul,k=C.length;for(i.__k=[],l=0;l<e.length;l++)if((m=i.__k[l]=(m=e[l])==null||typeof m=="boolean"?null:typeof m=="string"||typeof m=="number"||typeof m=="bigint"?zi(null,m,null,null,m):Array.isArray(m)?zi(kt,{children:m},null,null,null):m.__b>0?zi(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)!=null){if(m.__=i,m.__b=i.__b+1,(p=C[l])===null||p&&m.key==p.key&&m.type===p.type)C[l]=void 0;else for(c=0;c<k;c++){if((p=C[c])&&m.key==p.key&&m.type===p.type){C[c]=void 0;break}p=null}hr(t,m,p=p||Aa,r,n,s,o,d,u),v=m.__e,(c=m.ref)&&p.ref!=c&&(b||(b=[]),p.ref&&b.push(p.ref,null,m),b.push(c,m.__c||v,m)),v!=null?(f==null&&(f=v),typeof m.type=="function"&&m.__k===p.__k?m.__d=d=pl(m,d,t):d=fl(t,m,p,C,v,d),typeof i.type=="function"&&(i.__d=d)):d&&p.__e==d&&d.parentNode!=t&&(d=Hi(p))}for(i.__e=f,l=k;l--;)C[l]!=null&&(typeof i.type=="function"&&C[l].__e!=null&&C[l].__e==i.__d&&(i.__d=ml(a).nextSibling),yl(C[l],C[l]));if(b)for(l=0;l<b.length;l++)vl(b[l],b[++l],b[++l])}function pl(t,e,i){for(var a,r=t.__k,n=0;r&&n<r.length;n++)(a=r[n])&&(a.__=t,e=typeof a.type=="function"?pl(a,e,i):fl(i,a,a,r,a.__e,e));return e}function bt(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(i){bt(i,e)}):e.push(t)),e}function fl(t,e,i,a,r,n){var s,o,d;if(e.__d!==void 0)s=e.__d,e.__d=void 0;else if(i==null||r!=n||r.parentNode==null)e:if(n==null||n.parentNode!==t)t.appendChild(r),s=null;else{for(o=n,d=0;(o=o.nextSibling)&&d<a.length;d+=1)if(o==r)break e;t.insertBefore(r,n),s=n}return s!==void 0?s:r.nextSibling}function ml(t){var e,i,a;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((i=t.__k[e])&&(a=ml(i)))return a}return null}function hr(t,e,i,a,r,n,s,o,d){var u,l,c,p,m,v,f,b,C,k,F,_,N,y,D,x=e.type;if(e.constructor!==void 0)return null;i.__h!=null&&(d=i.__h,o=e.__e=i.__e,e.__h=null,n=[o]),(u=ge.__b)&&u(e);try{e:if(typeof x=="function"){if(b=e.props,C=(u=x.contextType)&&a[u.__c],k=u?C?C.props.value:u.__:a,i.__c?f=(l=e.__c=i.__c).__=l.__E:("prototype"in x&&x.prototype.render?e.__c=l=new x(b,k):(e.__c=l=new Ve(b,k),l.constructor=x,l.render=$h),C&&C.sub(l),l.props=b,l.state||(l.state={}),l.context=k,l.__n=a,c=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),x.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=ft({},l.__s)),ft(l.__s,x.getDerivedStateFromProps(b,l.__s))),p=l.props,m=l.state,l.__v=e,c)x.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(x.getDerivedStateFromProps==null&&b!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(b,k),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(b,l.__s,k)===!1||e.__v===i.__v){for(e.__v!==i.__v&&(l.props=b,l.state=l.__s,l.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.forEach(function($){$&&($.__=e)}),F=0;F<l._sb.length;F++)l.__h.push(l._sb[F]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(b,l.__s,k),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,m,v)})}if(l.context=k,l.props=b,l.__P=t,_=ge.__r,N=0,"prototype"in x&&x.prototype.render){for(l.state=l.__s,l.__d=!1,_&&_(e),u=l.render(l.props,l.state,l.context),y=0;y<l._sb.length;y++)l.__h.push(l._sb[y]);l._sb=[]}else do l.__d=!1,_&&_(e),u=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(a=ft(ft({},a),l.getChildContext())),c||l.getSnapshotBeforeUpdate==null||(v=l.getSnapshotBeforeUpdate(p,m)),D=u!=null&&u.type===kt&&u.key==null?u.props.children:u,hl(t,Array.isArray(D)?D:[D],e,i,a,r,n,s,o,d),l.base=e.__e,e.__h=null,l.__h.length&&s.push(l),f&&(l.__E=l.__=null),l.__e=!1}else n==null&&e.__v===i.__v?(e.__k=i.__k,e.__e=i.__e):e.__e=Rh(i.__e,e,i,a,r,n,s,d);(u=ge.diffed)&&u(e)}catch($){e.__v=null,(d||n!=null)&&(e.__e=o,e.__h=!!d,n[n.indexOf(o)]=null),ge.__e($,e,i)}}function gl(t,e){ge.__c&&ge.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(a){a.call(i)})}catch(a){ge.__e(a,i.__v)}})}function Rh(t,e,i,a,r,n,s,o){var d,u,l,c=i.props,p=e.props,m=e.type,v=0;if(m==="svg"&&(r=!0),n!=null){for(;v<n.length;v++)if((d=n[v])&&"setAttribute"in d==!!m&&(m?d.localName===m:d.nodeType===3)){t=d,n[v]=null;break}}if(t==null){if(m===null)return document.createTextNode(p);t=r?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,p.is&&p),n=null,o=!1}if(m===null)c===p||o&&t.data===p||(t.data=p);else{if(n=n&&ea.call(t.childNodes),u=(c=i.props||Aa).dangerouslySetInnerHTML,l=p.dangerouslySetInnerHTML,!o){if(n!=null)for(c={},v=0;v<t.attributes.length;v++)c[t.attributes[v].name]=t.attributes[v].value;(l||u)&&(l&&(u&&l.__html==u.__html||l.__html===t.innerHTML)||(t.innerHTML=l&&l.__html||""))}if(Bh(t,p,c,r,o),l)e.__k=[];else if(v=e.props.children,hl(t,Array.isArray(v)?v:[v],e,i,a,r&&m!=="foreignObject",n,s,n?n[0]:i.__k&&Hi(i,0),o),n!=null)for(v=n.length;v--;)n[v]!=null&&dl(n[v]);o||("value"in p&&(v=p.value)!==void 0&&(v!==t.value||m==="progress"&&!v||m==="option"&&v!==c.value)&&Ma(t,"value",v,c.value,!1),"checked"in p&&(v=p.checked)!==void 0&&v!==t.checked&&Ma(t,"checked",v,c.checked,!1))}return t}function vl(t,e,i){try{typeof t=="function"?t(e):t.current=e}catch(a){ge.__e(a,i)}}function yl(t,e,i){var a,r;if(ge.unmount&&ge.unmount(t),(a=t.ref)&&(a.current&&a.current!==t.__e||vl(a,null,e)),(a=t.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(n){ge.__e(n,e)}a.base=a.__P=null,t.__c=void 0}if(a=t.__k)for(r=0;r<a.length;r++)a[r]&&yl(a[r],e,i||typeof t.type!="function");i||t.__e==null||dl(t.__e),t.__=t.__e=t.__d=void 0}function $h(t,e,i){return this.constructor(t,i)}function Ds(t,e,i){var a,r,n;ge.__&&ge.__(t,e),r=(a=typeof i=="function")?null:i&&i.__k||e.__k,n=[],hr(e,t=(!a&&i||e).__k=h(kt,null,[t]),r||Aa,Aa,e.ownerSVGElement!==void 0,!a&&i?[i]:r?null:e.firstChild?ea.call(e.childNodes):null,n,!a&&i?i:r?r.__e:e.firstChild,a),gl(n,t)}function bl(t,e,i){var a,r,n,s=ft({},t.props);for(n in e)n=="key"?a=e[n]:n=="ref"?r=e[n]:s[n]=e[n];return arguments.length>2&&(s.children=arguments.length>3?ea.call(arguments,2):i),zi(t.type,s,a||t.key,r||t.ref,null)}ea=ul.slice,ge={__e:function(t,e,i,a){for(var r,n,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(t)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,a||{}),s=r.__d),s)return r.__E=r}catch(o){t=o}throw t}},ol=0,ci=!1,Ve.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ft({},this.state),typeof t=="function"&&(t=t(ft({},i),this.props)),t&&ft(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),_s(this))},Ve.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),_s(this))},Ve.prototype.render=kt,Bt=[],ll=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ba.__r=0;function Uh(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Fs(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Lh=0;function zh(t){return"__private_"+Lh+++"_"+t}function jh(t,e,i){const a=[];return t.forEach(r=>typeof r!="string"?a.push(r):e[Symbol.split](r).forEach((n,s,o)=>{n!==""&&a.push(n),s<o.length-1&&a.push(i)})),a}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param {string} phrase that needs interpolation, with placeholders
 * @param {object} options with values that will be used to replace placeholders
 * @returns {any[]} interpolated
 */function Ps(t,e){const i=/\$/g,a="$$$$";let r=[t];if(e==null)return r;for(const n of Object.keys(e))if(n!=="_"){let s=e[n];typeof s=="string"&&(s=i[Symbol.replace](s,a)),r=jh(r,new RegExp(`%\\{${n}\\}`,"g"),s)}return r}var Si=zh("apply");class wl{constructor(e){Object.defineProperty(this,Si,{value:Vh}),this.locale={strings:{},pluralize(i){return i===1?0:1}},Array.isArray(e)?e.forEach(Fs(this,Si)[Si],this):Fs(this,Si)[Si](e)}translate(e,i){return this.translateArray(e,i).join("")}translateArray(e,i){if(!Uh(this.locale.strings,e))throw new Error(`missing string: ${e}`);const a=this.locale.strings[e];if(typeof a=="object"){if(i&&typeof i.smart_count!="undefined"){const n=this.locale.pluralize(i.smart_count);return Ps(a[n],i)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return Ps(a,i)}}function Vh(t){if(!(t!=null&&t.strings))return;const e=this.locale;this.locale={...e,strings:{...e.strings,...t.strings}},this.locale.pluralize=t.pluralize||e.pluralize}var Hh=function(){var e={},i=e._fns={};e.emit=function(s,o,d,u,l,c,p){var m=a(s);m.length&&r(s,m,[o,d,u,l,c,p])},e.on=function(s,o){i[s]||(i[s]=[]),i[s].push(o)},e.once=function(s,o){function d(){o.apply(this,arguments),e.off(s,d)}this.on(s,d)},e.off=function(s,o){var d=[];if(s&&o){var u=this._fns[s],l=0,c=u?u.length:0;for(l;l<c;l++)u[l]!==o&&d.push(u[l])}d.length?this._fns[s]=d:delete this._fns[s]};function a(n){var s=i[n]?i[n]:[],o=n.indexOf(":"),d=o===-1?[n]:[n.substring(0,o),n.substring(o+1)],u=Object.keys(i),l=0,c=u.length;for(l;l<c;l++){var p=u[l];if(p==="*"&&(s=s.concat(i[p])),d.length===2&&d[0]===p){s=s.concat(i[p]);break}}return s}function r(n,s,o){var d=0,u=s.length;for(d;d<u&&s[d];d++)s[d].event=n,s[d].apply(s[d],o)}return e};let Wh="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",pr=(t=21)=>{let e="",i=t;for(;i--;)e+=Wh[Math.random()*64|0];return e};var Sl="Expected a function",Os=0/0,qh="[object Symbol]",Gh=/^\s+|\s+$/g,Yh=/^[-+]0x[0-9a-f]+$/i,Xh=/^0b[01]+$/i,Kh=/^0o[0-7]+$/i,Zh=parseInt,Qh=typeof St=="object"&&St&&St.Object===Object&&St,Jh=typeof self=="object"&&self&&self.Object===Object&&self,ep=Qh||Jh||Function("return this")(),tp=Object.prototype,ip=tp.toString,ap=Math.max,np=Math.min,mn=function(){return ep.Date.now()};function rp(t,e,i){var a,r,n,s,o,d,u=0,l=!1,c=!1,p=!0;if(typeof t!="function")throw new TypeError(Sl);e=xs(e)||0,Na(i)&&(l=!!i.leading,c="maxWait"in i,n=c?ap(xs(i.maxWait)||0,e):n,p="trailing"in i?!!i.trailing:p);function m(y){var D=a,x=r;return a=r=void 0,u=y,s=t.apply(x,D),s}function v(y){return u=y,o=setTimeout(C,e),l?m(y):s}function f(y){var D=y-d,x=y-u,$=e-D;return c?np($,n-x):$}function b(y){var D=y-d,x=y-u;return d===void 0||D>=e||D<0||c&&x>=n}function C(){var y=mn();if(b(y))return k(y);o=setTimeout(C,f(y))}function k(y){return o=void 0,p&&a?m(y):(a=r=void 0,s)}function F(){o!==void 0&&clearTimeout(o),u=0,a=d=r=o=void 0}function _(){return o===void 0?s:k(mn())}function N(){var y=mn(),D=b(y);if(a=arguments,r=this,d=y,D){if(o===void 0)return v(d);if(c)return o=setTimeout(C,e),m(d)}return o===void 0&&(o=setTimeout(C,e)),s}return N.cancel=F,N.flush=_,N}function sp(t,e,i){var a=!0,r=!0;if(typeof t!="function")throw new TypeError(Sl);return Na(i)&&(a="leading"in i?!!i.leading:a,r="trailing"in i?!!i.trailing:r),rp(t,e,{leading:a,maxWait:e,trailing:r})}function Na(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function op(t){return!!t&&typeof t=="object"}function lp(t){return typeof t=="symbol"||op(t)&&ip.call(t)==qh}function xs(t){if(typeof t=="number")return t;if(lp(t))return Os;if(Na(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Na(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Gh,"");var i=Xh.test(t);return i||Kh.test(t)?Zh(t.slice(2),i?2:8):Yh.test(t)?Os:+t}var Cl=sp;function Fa(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var up=0;function El(t){return"__private_"+up+++"_"+t}const dp={version:"3.0.2"};var Nt=El("callbacks"),gn=El("publish");class Tl{constructor(){Object.defineProperty(this,gn,{value:cp}),Object.defineProperty(this,Nt,{writable:!0,value:new Set}),this.state={}}getState(){return this.state}setState(e){const i={...this.state},a={...this.state,...e};this.state=a,Fa(this,gn)[gn](i,a,e)}subscribe(e){return Fa(this,Nt)[Nt].add(e),()=>{Fa(this,Nt)[Nt].delete(e)}}}function cp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Fa(this,Nt)[Nt].forEach(a=>{a(...e)})}Tl.VERSION=dp.version;function kl(t){const e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}var Is={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function hp(t){var e;if(t.type)return t.type;const i=t.name?(e=kl(t.name).extension)==null?void 0:e.toLowerCase():null;return i&&i in Is?Is[i]:"application/octet-stream"}function pp(t){return t.charCodeAt(0).toString(32)}function As(t){let e="";return t.replace(/[^A-Z0-9]/ig,i=>(e+=`-${pp(i)}`,"/"))+e}function fp(t){let e="uppy";return typeof t.name=="string"&&(e+=`-${As(t.name.toLowerCase())}`),t.type!==void 0&&(e+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(e+=`-${As(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(e+=`-${t.data.size}`),t.data.lastModified!==void 0&&(e+=`-${t.data.lastModified}`),e}function mp(t){if(t==null&&typeof navigator!="undefined"&&(t=navigator.userAgent),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const i=e[1];let[a,r]=i.split(".");return a=parseInt(a,10),r=parseInt(r,10),a<15||a===15&&r<15063||a>18||a===18&&r>=18218}function gp(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}function vn(t){return t<10?`0${t}`:t.toString()}function Pa(){const t=new Date,e=vn(t.getHours()),i=vn(t.getMinutes()),a=vn(t.getSeconds());return`${e}:${i}:${a}`}const vp={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.error(`[Uppy] [${Pa()}]`,...e)}},yp={debug:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.debug(`[Uppy] [${Pa()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.warn(`[Uppy] [${Pa()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return console.error(`[Uppy] [${Pa()}]`,...e)}};var ji=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const i=e<0,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i&&(e=-e),e<1)return`${(i?"-":"")+e} B`;const r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),a.length-1);e=Number(e/Math.pow(1024,r));const n=a[r];return e>=10||e%1===0?`${(i?"-":"")+e.toFixed(0)} ${n}`:`${(i?"-":"")+e.toFixed(1)} ${n}`};function _l(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}_l.prototype.match=function(t){var e=!0,i=this.parts,a,r=i.length,n;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(n=(t||"").split(this.separator),a=0;e&&a<r;a++)i[a]!=="*"&&(a<n.length?e=i[a]===n[a]:e=!1);e=e&&n}else if(typeof t.splice=="function")for(e=[],a=t.length;a--;)this.match(t[a])&&(e[e.length]=t[a]);else if(typeof t=="object"){e={};for(var s in t)this.match(s)&&(e[s]=t[s])}return e};var bp=function(t,e,i){var a=new _l(t,i||/[\/\.]/);return typeof e!="undefined"?a.match(e):a},wp=bp,Sp=/[\/\+\.]/,Cp=function(t,e){function i(a){var r=wp(a,t,Sp);return r&&r.length>=2}return e?i(e.split(";")[0]):i};const Ep={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Ge extends Error{constructor(){super(...arguments),this.isRestriction=!0}}class Tp{constructor(e,i){this.i18n=i,this.getOpts=()=>{const a=e();if(a.restrictions.allowedFileTypes!=null&&!Array.isArray(a.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return a}}validate(e,i){const{maxFileSize:a,minFileSize:r,maxTotalFileSize:n,maxNumberOfFiles:s,allowedFileTypes:o}=this.getOpts().restrictions;if(s&&i.filter(u=>!u.isGhost).length+1>s)throw new Ge(`${this.i18n("youCanOnlyUploadX",{smart_count:s})}`);if(o&&!o.some(u=>u.includes("/")?e.type?Cp(e.type.replace(/;.*?$/,""),u):!1:u[0]==="."&&e.extension?e.extension.toLowerCase()===u.slice(1).toLowerCase():!1)){const u=o.join(", ");throw new Ge(this.i18n("youCanOnlyUploadFileTypes",{types:u}))}if(n&&e.size!=null&&i.reduce((u,l)=>u+l.size,e.size)>n)throw new Ge(this.i18n("exceedsSize",{size:ji(n),file:e.name}));if(a&&e.size!=null&&e.size>a)throw new Ge(this.i18n("exceedsSize",{size:ji(a),file:e.name}));if(r&&e.size!=null&&e.size<r)throw new Ge(this.i18n("inferiorSize",{size:ji(r)}))}validateMinNumberOfFiles(e){const{minNumberOfFiles:i}=this.getOpts().restrictions;if(Object.keys(e).length<i)throw new Ge(this.i18n("youHaveToAtLeastSelectX",{smart_count:i}))}getMissingRequiredMetaFields(e){const i=new Ge(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:a}=this.getOpts().restrictions,r=[];for(const n of a)(!Object.hasOwn(e.meta,n)||e.meta[n]==="")&&r.push(n);return{missingFields:r,error:i}}}var kp={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};let Dl,Fl;function R(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var _p=0;function Te(t){return"__private_"+_p+++"_"+t}const Dp={version:"3.0.6"};var xe=Te("plugins"),Ye=Te("restricter"),Ci=Te("storeUnsubscribe"),st=Te("emitter"),Rt=Te("preProcessors"),$t=Te("uploaders"),ht=Te("postProcessors"),$e=Te("informAndEmit"),Wi=Te("checkRequiredMetaFieldsOnFile"),yn=Te("checkRequiredMetaFields"),Ei=Te("assertNewUploadAllowed"),Ti=Te("checkAndCreateFileStateObject"),ki=Te("startIfAutoProceed"),bn=Te("addListeners"),Xe=Te("updateOnlineStatus"),ot=Te("createUpload"),wn=Te("getUpload"),Ut=Te("removeUpload"),lt=Te("runUpload");Dl=Symbol.for("uppy test: getPlugins");Fl=Symbol.for("uppy test: createUpload");class Pl{constructor(e){Object.defineProperty(this,lt,{value:$p}),Object.defineProperty(this,Ut,{value:Rp}),Object.defineProperty(this,wn,{value:Np}),Object.defineProperty(this,ot,{value:Bp}),Object.defineProperty(this,bn,{value:Mp}),Object.defineProperty(this,ki,{value:Ap}),Object.defineProperty(this,Ti,{value:Ip}),Object.defineProperty(this,Ei,{value:xp}),Object.defineProperty(this,yn,{value:Op}),Object.defineProperty(this,Wi,{value:Pp}),Object.defineProperty(this,$e,{value:Fp}),Object.defineProperty(this,xe,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,Ci,{writable:!0,value:void 0}),Object.defineProperty(this,st,{writable:!0,value:Hh()}),Object.defineProperty(this,Rt,{writable:!0,value:new Set}),Object.defineProperty(this,$t,{writable:!0,value:new Set}),Object.defineProperty(this,ht,{writable:!0,value:new Set}),Object.defineProperty(this,Xe,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=kp;const i={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Ep,meta:{},onBeforeFileAdded:a=>a,onBeforeUpload:a=>a,store:new Tl,logger:vp,infoTimeout:5e3};this.opts={...i,...e,restrictions:{...i.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=yp),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.calculateProgress=Cl(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:mp(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),R(this,Ye)[Ye]=new Tp(()=>this.opts,this.i18n),R(this,Ci)[Ci]=this.store.subscribe((a,r,n)=>{this.emit("state-update",a,r,n),this.updateAll(r)}),this.opts.debug&&typeof window!="undefined"&&(window[this.opts.id]=this),R(this,bn)[bn]()}emit(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];R(this,st)[st].emit(e,...a)}on(e,i){return R(this,st)[st].on(e,i),this}once(e,i){return R(this,st)[st].once(e,i),this}off(e,i){return R(this,st)[st].off(e,i),this}updateAll(e){this.iteratePlugins(i=>{i.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}setFileState(e,i){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.setState({files:{...this.getState().files,[e]:{...this.getState().files[e],...i}}})}i18nInit(){const e=new wl([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(i=>{i.setOptions()}),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},i={...this.getState().files},a={};Object.keys(i).forEach(r=>{const n={...i[r]};n.progress={...n.progress,...e},a[r]=n}),this.setState({files:a,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){R(this,Rt)[Rt].add(e)}removePreProcessor(e){return R(this,Rt)[Rt].delete(e)}addPostProcessor(e){R(this,ht)[ht].add(e)}removePostProcessor(e){return R(this,ht)[ht].delete(e)}addUploader(e){R(this,$t)[$t].add(e)}removeUploader(e){return R(this,$t)[$t].delete(e)}setMeta(e){const i={...this.getState().meta,...e},a={...this.getState().files};Object.keys(a).forEach(r=>{a[r]={...a[r],meta:{...a[r].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:i,files:a})}setFileMeta(e,i){const a={...this.getState().files};if(!a[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const r={...a[e].meta,...i};a[e]={...a[e],meta:r},this.setState({files:a})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:i,error:a}=this.getState(),r=Object.values(e),n=r.filter(v=>{let{progress:f}=v;return!f.uploadComplete&&f.uploadStarted}),s=r.filter(v=>!v.progress.uploadStarted),o=r.filter(v=>v.progress.uploadStarted||v.progress.preprocess||v.progress.postprocess),d=r.filter(v=>v.progress.uploadStarted),u=r.filter(v=>v.isPaused),l=r.filter(v=>v.progress.uploadComplete),c=r.filter(v=>v.error),p=n.filter(v=>!v.isPaused),m=r.filter(v=>v.progress.preprocess||v.progress.postprocess);return{newFiles:s,startedFiles:o,uploadStartedFiles:d,pausedFiles:u,completeFiles:l,erroredFiles:c,inProgressFiles:n,inProgressNotPausedFiles:p,processingFiles:m,isUploadStarted:d.length>0,isAllComplete:i===100&&l.length===r.length&&m.length===0,isAllErrored:!!a&&c.length===r.length,isAllPaused:n.length!==0&&u.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:r.some(v=>v.isGhost)}}validateRestrictions(e,i){i===void 0&&(i=this.getFiles());try{R(this,Ye)[Ye].validate(e,i)}catch(a){return a}return null}checkIfFileAlreadyExists(e){const{files:i}=this.getState();return!!(i[e]&&!i[e].isGhost)}addFile(e){R(this,Ei)[Ei](e);const{files:i}=this.getState();let a=R(this,Ti)[Ti](i,e);return i[a.id]&&i[a.id].isGhost&&(a={...i[a.id],data:e.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`)),this.setState({files:{...i,[a.id]:a}}),this.emit("file-added",a),this.emit("files-added",[a]),this.log(`Added file: ${a.name}, ${a.id}, mime type: ${a.type}`),R(this,ki)[ki](),a.id}addFiles(e){R(this,Ei)[Ei]();const i={...this.getState().files},a=[],r=[];for(let n=0;n<e.length;n++)try{let s=R(this,Ti)[Ti](i,e[n]);i[s.id]&&i[s.id].isGhost&&(s={...i[s.id],data:e[n].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${s.name}, ${s.id}`)),i[s.id]=s,a.push(s)}catch(s){s.isRestriction||r.push(s)}if(this.setState({files:i}),a.forEach(n=>{this.emit("file-added",n)}),this.emit("files-added",a),a.length>5?this.log(`Added batch of ${a.length} files`):Object.keys(a).forEach(n=>{this.log(`Added file: ${a[n].name}
 id: ${a[n].id}
 type: ${a[n].type}`)}),a.length>0&&R(this,ki)[ki](),r.length>0){let n=`Multiple errors occurred while adding files:
`;if(r.forEach(s=>{n+=`
 * ${s.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:r.length}),details:n},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(r,n);{const s=new Error(n);throw s.errors=r,s}}}removeFiles(e,i){const{files:a,currentUploads:r}=this.getState(),n={...a},s={...r},o=Object.create(null);e.forEach(c=>{a[c]&&(o[c]=a[c],delete n[c])});function d(c){return o[c]===void 0}Object.keys(s).forEach(c=>{const p=r[c].fileIDs.filter(d);if(p.length===0){delete s[c];return}const{capabilities:m}=this.getState();if(p.length!==r[c].fileIDs.length&&!m.individualCancellation)throw new Error("individualCancellation is disabled");s[c]={...r[c],fileIDs:p}});const u={currentUploads:s,files:n};Object.keys(n).length===0&&(u.allowNewUpload=!0,u.error=null,u.recoveredState=null),this.setState(u),this.calculateTotalProgress();const l=Object.keys(o);l.forEach(c=>{this.emit("file-removed",o[c],i)}),l.length>5?this.log(`Removed ${l.length} files`):this.log(`Removed files: ${l.join(", ")}`)}removeFile(e,i){i===void 0&&(i=null),this.removeFiles([e],i)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const a=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:a}),this.emit("upload-pause",e,a),a}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(a=>!e[a].progress.uploadComplete&&e[a].progress.uploadStarted).forEach(a=>{const r={...e[a],isPaused:!0};e[a]=r}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(a=>!e[a].progress.uploadComplete&&e[a].progress.uploadStarted).forEach(a=>{const r={...e[a],isPaused:!1,error:null};e[a]=r}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},i=Object.keys(e).filter(r=>e[r].error);if(i.forEach(r=>{const n={...e[r],isPaused:!1,error:null};e[r]=n}),this.setState({files:e,error:null}),this.emit("retry-all",i),i.length===0)return Promise.resolve({successful:[],failed:[]});const a=R(this,ot)[ot](i,{forceAllowNewUpload:!0});return R(this,lt)[lt](a)}cancelAll(e){let{reason:i="user"}=e===void 0?{}:e;if(this.emit("cancel-all",{reason:i}),i==="user"){const{files:a}=this.getState(),r=Object.keys(a);r.length&&this.removeFiles(r,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const i=R(this,ot)[ot]([e],{forceAllowNewUpload:!0});return R(this,lt)[lt](i)}logout(){this.iteratePlugins(e=>{e.provider&&e.provider.logout&&e.provider.logout()})}calculateProgress(e,i){if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}const a=Number.isFinite(i.bytesTotal)&&i.bytesTotal>0;this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,bytesUploaded:i.bytesUploaded,bytesTotal:i.bytesTotal,percentage:a?Math.round(i.bytesUploaded/i.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const i=this.getFiles().filter(u=>u.progress.uploadStarted||u.progress.preprocess||u.progress.postprocess);if(i.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const a=i.filter(u=>u.progress.bytesTotal!=null),r=i.filter(u=>u.progress.bytesTotal==null);if(a.length===0){const u=i.length*100,l=r.reduce((p,m)=>p+m.progress.percentage,0),c=Math.round(l/u*100);this.setState({totalProgress:c});return}let n=a.reduce((u,l)=>u+l.progress.bytesTotal,0);const s=n/a.length;n+=s*r.length;let o=0;a.forEach(u=>{o+=u.progress.bytesUploaded}),r.forEach(u=>{o+=s*(u.progress.percentage||0)/100});let d=n===0?0:Math.round(o/n*100);d>100&&(d=100),this.setState({totalProgress:d}),this.emit("progress",d)}updateOnlineStatus(){(typeof window.navigator.onLine!="undefined"?window.navigator.onLine:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,i){if(typeof e!="function"){const s=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(s)}const a=new e(this,i),r=a.id;if(!r)throw new Error("Your plugin must have an id");if(!a.type)throw new Error("Your plugin must have a type");const n=this.getPlugin(r);if(n){const s=`Already found a plugin named '${n.id}'. Tried to use: '${r}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(s)}return e.VERSION&&this.log(`Using ${r} v${e.VERSION}`),a.type in R(this,xe)[xe]?R(this,xe)[xe][a.type].push(a):R(this,xe)[xe][a.type]=[a],a.install(),this}getPlugin(e){for(const i of Object.values(R(this,xe)[xe])){const a=i.find(r=>r.id===e);if(a!=null)return a}}[Dl](e){return R(this,xe)[xe][e]}iteratePlugins(e){Object.values(R(this,xe)[xe]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const i=R(this,xe)[xe][e.type],a=i.findIndex(s=>s.id===e.id);a!==-1&&i.splice(a,1);const n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}close(e){let{reason:i}=e===void 0?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:i}),R(this,Ci)[Ci](),this.iteratePlugins(a=>{this.removePlugin(a)}),typeof window!="undefined"&&window.removeEventListener&&(window.removeEventListener("online",R(this,Xe)[Xe]),window.removeEventListener("offline",R(this,Xe)[Xe]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,i,a){i===void 0&&(i="info"),a===void 0&&(a=3e3);const r=typeof e=="object";this.setState({info:[...this.getState().info,{type:i,message:r?e.message:e,details:r?e.details:null}]}),setTimeout(()=>this.hideInfo(),a),this.emit("info-visible")}log(e,i){const{logger:a}=this.opts;switch(i){case"error":a.error(e);break;case"warning":a.warn(e);break;default:a.debug(e);break}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?R(this,lt)[lt](e):(R(this,Ut)[Ut](e),Promise.reject(new Error("Nonexistent upload")))}[Fl](){return R(this,ot)[ot](...arguments)}addResultData(e,i){if(!R(this,wn)[wn](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:a}=this.getState(),r={...a[e],result:{...a[e].result,...i}};this.setState({currentUploads:{...a,[e]:r}})}upload(){var e;(e=R(this,xe)[xe].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:i}=this.getState();const a=this.opts.onBeforeUpload(i);return a===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(a&&typeof a=="object"&&(i=a,this.setState({files:i})),Promise.resolve().then(()=>R(this,Ye)[Ye].validateMinNumberOfFiles(i)).catch(r=>{throw R(this,$e)[$e](r),r}).then(()=>{if(!R(this,yn)[yn](i))throw new Ge(this.i18n("missingRequiredMetaField"))}).catch(r=>{throw r}).then(()=>{const{currentUploads:r}=this.getState(),n=Object.values(r).flatMap(d=>d.fileIDs),s=[];Object.keys(i).forEach(d=>{const u=this.getFile(d);!u.progress.uploadStarted&&n.indexOf(d)===-1&&s.push(u.id)});const o=R(this,ot)[ot](s);return R(this,lt)[lt](o)}).catch(r=>{throw this.emit("error",r),this.log(r,"error"),r}))}}function Fp(t,e){const{message:i,details:a=""}=t;t.isRestriction?this.emit("restriction-failed",e,t):this.emit("error",t),this.info({message:i,details:a},"error",this.opts.infoTimeout),this.log(t,"warning")}function Pp(t){const{missingFields:e,error:i}=R(this,Ye)[Ye].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(i.message),this.emit("restriction-failed",t,i),!1):!0}function Op(t){let e=!0;for(const i of Object.values(t))R(this,Wi)[Wi](i)||(e=!1);return e}function xp(t){const{allowNewUpload:e}=this.getState();if(e===!1){const i=new Ge(this.i18n("noMoreFilesAllowed"));throw R(this,$e)[$e](i,t),i}}function Ip(t,e){e instanceof File&&(e={name:e.name,type:e.type,size:e.size,data:e});const i=hp(e),a=gp(i,e),r=kl(a).extension,n=Boolean(e.isRemote),s=fp({...e,type:i});if(this.checkIfFileAlreadyExists(s)){const c=new Ge(this.i18n("noDuplicates",{fileName:a}));throw R(this,$e)[$e](c,e),c}const o=e.meta||{};o.name=a,o.type=i;const d=Number.isFinite(e.data.size)?e.data.size:null;let u={source:e.source||"",id:s,name:a,extension:r||"",meta:{...this.getState().meta,...o},type:i,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:d,uploadComplete:!1,uploadStarted:null},size:d,isRemote:n,remote:e.remote||"",preview:e.preview};const l=this.opts.onBeforeFileAdded(u,t);if(l===!1){const c=new Ge("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",e,c),c}else typeof l=="object"&&l!==null&&(u=l);try{const c=Object.keys(t).map(p=>t[p]);R(this,Ye)[Ye].validate(u,c)}catch(c){throw R(this,$e)[$e](c,u),c}return u}function Ap(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function Mp(){const t=(i,a,r)=>{let n=i.message||"Unknown error";i.details&&(n+=` ${i.details}`),this.setState({error:n}),a!=null&&a.id in this.getState().files&&this.setFileState(a.id,{error:n,response:r})};this.on("error",t),this.on("upload-error",(i,a,r)=>{if(t(a,i,r),typeof a=="object"&&a.message){const n=new Error(a.message);n.details=a.message,a.details&&(n.details+=` ${a.details}`),n.message=this.i18n("failedToUpload",{file:i==null?void 0:i.name}),R(this,$e)[$e](n)}else R(this,$e)[$e](a)});let e;this.on("upload-stalled",(i,a)=>{const{message:r}=i,n=a.map(s=>s.meta.name).join(", ");e||(this.info({message:r,details:n},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${r} ${n}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})}),this.on("upload-started",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}this.setFileState(i.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:i.size}})}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const r=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...r,postprocess:R(this,ht)[ht].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal},response:a,uploadURL:a.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:a.bytesUploaded||r.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:a}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.preprocess,this.setState({files:a})}),this.on("postprocess-progress",(i,a)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:a}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const a={...this.getState().files};a[i.id]={...a[i.id],progress:{...a[i.id].progress}},delete a[i.id].progress.postprocess,this.setState({files:a})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",i=>{i&&R(this,Wi)[Wi](i)}),typeof window!="undefined"&&window.addEventListener&&(window.addEventListener("online",R(this,Xe)[Xe]),window.addEventListener("offline",R(this,Xe)[Xe]),setTimeout(R(this,Xe)[Xe],3e3))}function Bp(t,e){e===void 0&&(e={});const{forceAllowNewUpload:i=!1}=e,{allowNewUpload:a,currentUploads:r}=this.getState();if(!a&&!i)throw new Error("Cannot create a new upload: already uploading.");const n=pr();return this.emit("upload",{id:n,fileIDs:t}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[n]:{fileIDs:t,step:0,result:{}}}}),n}function Np(t){const{currentUploads:e}=this.getState();return e[t]}function Rp(t){const e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function $p(t){let{currentUploads:e}=this.getState(),i=e[t];const a=i.step||0,r=[...R(this,Rt)[Rt],...R(this,$t)[$t],...R(this,ht)[ht]];try{for(let s=a;s<r.length&&i;s++){const o=r[s],d={...i,step:s};this.setState({currentUploads:{...e,[t]:d}}),await o(d.fileIDs,t),e=this.getState().currentUploads,i=e[t]}}catch(s){throw R(this,Ut)[Ut](t),s}if(i){i.fileIDs.forEach(u=>{const l=this.getFile(u);l&&l.progress.postprocess&&this.emit("postprocess-complete",l)});const s=i.fileIDs.map(u=>this.getFile(u)),o=s.filter(u=>!u.error),d=s.filter(u=>u.error);await this.addResultData(t,{successful:o,failed:d,uploadID:t}),e=this.getState().currentUploads,i=e[t]}let n;return i&&(n=i.result,this.emit("complete",n),R(this,Ut)[Ut](t)),n==null&&this.log(`Not setting result for an upload that has been removed: ${t}`),n}Pl.VERSION=Dp.version;function Ol(t){return(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE}function Up(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):Ol(t)?t:null}function xl(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}class Lp{constructor(e,i){i===void 0&&(i={}),this.uppy=e,this.opts=i}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:i}=this.uppy.getState();this.uppy.setState({plugins:{...i,[this.id]:{...i[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(),this.i18nInit()}i18nInit(){const e=new wl([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}}function Ms(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var zp=0;function jp(t){return"__private_"+zp+++"_"+t}function Vp(t){let e=null,i=null;return function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return i=r,e||(e=Promise.resolve().then(()=>(e=null,t(...i)))),e}}var _i=jp("updateUI");class mt extends Lp{constructor(){super(...arguments),Object.defineProperty(this,_i,{writable:!0,value:void 0})}getTargetPlugin(e){let i;if(typeof e=="object"&&e instanceof mt)i=e;else if(typeof e=="function"){const a=e;this.uppy.iteratePlugins(r=>{r instanceof a&&(i=r)})}return i}mount(e,i){const a=i.id,r=Up(e);if(r){this.isTargetDOMEl=!0;const o=document.createElement("div");return o.classList.add("uppy-Root"),Ms(this,_i)[_i]=Vp(d=>{!this.uppy.getPlugin(this.id)||(Ds(this.render(d),o),this.afterUpdate())}),this.uppy.log(`Installing ${a} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),Ds(this.render(this.uppy.getState()),o),this.el=o,r.appendChild(o),o.dir=this.opts.direction||xl(o)||"ltr",this.onMount(),this.el}const n=this.getTargetPlugin(e);if(n)return this.uppy.log(`Installing ${a} to ${n.id}`),this.parent=n,this.el=n.addTarget(i),this.onMount(),this.el;this.uppy.log(`Not installing ${a}`);let s=`Invalid target option given to ${a}.`;throw typeof e=="function"?s+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":s+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(s)}update(e){if(this.el!=null){var i,a;(i=(a=Ms(this,_i))[_i])==null||i.call(a,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}function Hp(t){if(!t.bytesUploaded)return 0;const e=Date.now()-t.uploadStarted;return t.bytesUploaded/(e/1e3)}function Wp(t){return t.bytesTotal-t.bytesUploaded}var ze={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},Il={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function i(){for(var a=[],r=0;r<arguments.length;r++){var n=arguments[r];if(!!n){var s=typeof n;if(s==="string"||s==="number")a.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&a.push(o)}}else if(s==="object"){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){a.push(n.toString());continue}for(var d in n)e.call(n,d)&&n[d]&&a.push(d)}}}return a.join(" ")}t.exports?(i.default=i,t.exports=i):window.classNames=i})()})(Il);var Ze=Il.exports;function Sn(t){const e=[];let i,a;for(const{progress:n}of Object.values(t)){const{preprocess:s,postprocess:o}=n;a==null&&(s||o)&&({mode:i,message:a}=s||o),(s==null?void 0:s.mode)==="determinate"&&e.push(s.value),(o==null?void 0:o.mode)==="determinate"&&e.push(o.value)}const r=e.reduce((n,s)=>n+s/e.length,0);return{mode:i,message:a,value:r}}function qp(t){const e=Math.floor(t/3600)%24,i=Math.floor(t/60)%60,a=Math.floor(t%60);return{hours:e,minutes:i,seconds:a}}function Gp(t){const e=qp(t),i=e.hours===0?"":`${e.hours}h`,a=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,r=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${i}${a}${r}`}const Yp="\xB7",Bs=()=>` ${Yp} `;function Xp(t){const{newFiles:e,isUploadStarted:i,recoveredState:a,i18n:r,uploadState:n,isSomeGhost:s,startUpload:o}=t,d=Ze("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":n===ze.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":s}),u=e&&i&&!a?r("uploadXNewFiles",{smart_count:e}):r("uploadXFiles",{smart_count:e});return h("button",{type:"button",className:d,"aria-label":r("uploadXFiles",{smart_count:e}),onClick:o,disabled:s,"data-uppy-super-focusable":!0},u)}function Kp(t){const{i18n:e,uppy:i}=t;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>i.retryAll(),"data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},h("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Zp(t){const{i18n:e,uppy:i}=t;return h("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>i.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Qp(t){const{isAllPaused:e,i18n:i,isAllComplete:a,resumableUploads:r,uppy:n}=t,s=i(e?"resume":"pause");function o(){return a?null:r?e?n.resumeAll():n.pauseAll():n.cancelAll()}return h("button",{title:s,"aria-label":s,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-uppy-super-focusable":!0},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},h("g",{fill:"none",fillRule:"evenodd"},h("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),h("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Jp(t){const{i18n:e,doneButtonHandler:i}=t;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:i,"data-uppy-super-focusable":!0},e("done"))}function Al(){return h("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},h("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function ef(t){const{progress:e}=t,{value:i,mode:a,message:r}=e,n=Math.round(i*100),s="\xB7";return h("div",{className:"uppy-StatusBar-content"},h(Al,null),a==="determinate"?`${n}% ${s} `:"",r)}function tf(t){const{numUploads:e,complete:i,totalUploadedSize:a,totalSize:r,totalETA:n,i18n:s}=t,o=e>1;return h("div",{className:"uppy-StatusBar-statusSecondary"},o&&s("filesUploadedOfTotal",{complete:i,smart_count:e}),h("span",{className:"uppy-StatusBar-additionalInfo"},o&&Bs(),s("dataUploadedOfTotal",{complete:ji(a),total:ji(r)}),Bs(),s("xTimeLeft",{time:Gp(n)})))}function Ml(t){const{i18n:e,complete:i,numUploads:a}=t;return h("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:i,smart_count:a}))}function af(t){const{i18n:e,newFiles:i,startUpload:a}=t,r=Ze("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return h("div",{className:"uppy-StatusBar-statusSecondary"},h("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:i})),h("button",{type:"button",className:r,"aria-label":e("uploadXFiles",{smart_count:i}),onClick:a},e("upload")))}const nf=Cl(tf,500,{leading:!0,trailing:!0});function rf(t){const{i18n:e,supportsUploadProgress:i,totalProgress:a,showProgressDetails:r,isUploadStarted:n,isAllComplete:s,isAllPaused:o,newFiles:d,numUploads:u,complete:l,totalUploadedSize:c,totalSize:p,totalETA:m,startUpload:v}=t,f=d&&n;if(!n||s)return null;const b=e(o?"paused":"uploading");function C(){return!o&&!f&&r?i?h(nf,{numUploads:u,complete:l,totalUploadedSize:c,totalSize:p,totalETA:m,i18n:e}):h(Ml,{i18n:e,complete:l,numUploads:u}):null}return h("div",{className:"uppy-StatusBar-content","aria-label":b,title:b},o?null:h(Al,null),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},i?`${b}: ${a}%`:b),C(),f?h(af,{i18n:e,newFiles:d,startUpload:v}):null))}function sf(t){const{i18n:e}=t;return h("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},h("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function of(t){const{error:e,i18n:i,complete:a,numUploads:r}=t;function n(){const s=`${i("uploadFailed")} 

 ${e}`;alert(s)}return h("div",{className:"uppy-StatusBar-content",title:i("uploadFailed")},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),h("div",{className:"uppy-StatusBar-status"},h("div",{className:"uppy-StatusBar-statusPrimary"},i("uploadFailed"),h("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":i("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:n,type:"button"},"?")),h(Ml,{i18n:i,complete:a,numUploads:r})))}const{STATE_ERROR:Ns,STATE_WAITING:Rs,STATE_PREPROCESSING:Cn,STATE_UPLOADING:ba,STATE_POSTPROCESSING:En,STATE_COMPLETE:wa}=ze;function lf(t){const{newFiles:e,allowNewUpload:i,isUploadInProgress:a,isAllPaused:r,resumableUploads:n,error:s,hideUploadButton:o,hidePauseResumeButton:d,hideCancelButton:u,hideRetryButton:l,recoveredState:c,uploadState:p,totalProgress:m,files:v,supportsUploadProgress:f,hideAfterFinish:b,isSomeGhost:C,doneButtonHandler:k,isUploadStarted:F,i18n:_,startUpload:N,uppy:y,isAllComplete:D,showProgressDetails:x,numUploads:$,complete:z,totalSize:X,totalETA:W,totalUploadedSize:V}=t;function ae(){switch(p){case En:case Cn:{const we=Sn(v);return we.mode==="determinate"?we.value*100:m}case Ns:return null;case ba:return f?m:null;default:return m}}function K(){switch(p){case En:case Cn:{const{mode:we}=Sn(v);return we==="indeterminate"}case ba:return!f;default:return!1}}function ee(){if(c)return!1;switch(p){case Rs:return o||e===0;case wa:return b;default:return!1}}const A=ae(),q=ee(),Z=A!=null?A:100,ce=!s&&e&&!a&&!r&&i&&!o,fe=!u&&p!==Rs&&p!==wa,me=n&&!d&&p===ba,H=s&&!D&&!l,ke=k&&p===wa,_e=Ze("uppy-StatusBar-progress",{"is-indeterminate":K()}),Qe=Ze("uppy-StatusBar",`is-${p}`,{"has-ghosts":C});return h("div",{className:Qe,"aria-hidden":q},h("div",{className:_e,style:{width:`${Z}%`},role:"progressbar","aria-label":`${Z}%`,"aria-valuetext":`${Z}%`,"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":A}),(()=>{switch(p){case Cn:case En:return h(ef,{progress:Sn(v)});case wa:return h(sf,{i18n:_});case Ns:return h(of,{error:s,i18n:_,numUploads:$,complete:z});case ba:return h(rf,{i18n:_,supportsUploadProgress:f,totalProgress:m,showProgressDetails:x,isUploadStarted:F,isAllComplete:D,isAllPaused:r,newFiles:e,numUploads:$,complete:z,totalUploadedSize:V,totalSize:X,totalETA:W,startUpload:N});default:return null}})(),h("div",{className:"uppy-StatusBar-actions"},c||ce?h(Xp,{newFiles:e,isUploadStarted:F,recoveredState:c,i18n:_,isSomeGhost:C,startUpload:N,uploadState:p}):null,H?h(Kp,{i18n:_,uppy:y}):null,me?h(Qp,{isAllPaused:r,i18n:_,isAllComplete:D,resumableUploads:n,uppy:y}):null,fe?h(Zp,{i18n:_,uppy:y}):null,ke?h(Jp,{i18n:_,doneButtonHandler:k}):null))}var uf={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};const df={version:"3.0.1"};function cf(t){let e=0;return t.forEach(i=>{e+=Hp(i.progress)}),e}function hf(t){const e=cf(t);if(e===0)return 0;const i=t.reduce((a,r)=>a+Wp(r.progress),0);return Math.round(i/e*10)/10}function pf(t,e,i,a){if(t&&!e)return ze.STATE_ERROR;if(e)return ze.STATE_COMPLETE;if(i)return ze.STATE_WAITING;let r=ze.STATE_WAITING;const n=Object.keys(a);for(let s=0;s<n.length;s++){const{progress:o}=a[n[s]];if(o.uploadStarted&&!o.uploadComplete)return ze.STATE_UPLOADING;o.preprocess&&r!==ze.STATE_UPLOADING&&(r=ze.STATE_PREPROCESSING),o.postprocess&&r!==ze.STATE_UPLOADING&&r!==ze.STATE_PREPROCESSING&&(r=ze.STATE_POSTPROCESSING)}return r}class Bl extends mt{constructor(e,i){super(e,i),this.startUpload=()=>{const{recoveredState:r}=this.uppy.getState();if(r){this.uppy.emit("restore-confirmed");return}return this.uppy.upload().catch(()=>{})},this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=uf;const a={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};this.opts={...a,...i},this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:i,files:a,allowNewUpload:r,totalProgress:n,error:s,recoveredState:o}=e,{newFiles:d,startedFiles:u,completeFiles:l,inProgressNotPausedFiles:c,isUploadStarted:p,isAllComplete:m,isAllErrored:v,isAllPaused:f,isUploadInProgress:b,isSomeGhost:C}=this.uppy.getObjectOfFilesPerState(),k=o?Object.values(a):d,F=hf(c),_=!!i.resumableUploads,N=i.uploadProgress!==!1;let y=0,D=0;return u.forEach(x=>{y+=x.progress.bytesTotal||0,D+=x.progress.bytesUploaded||0}),lf({error:s,uploadState:pf(s,m,o,e.files||{}),allowNewUpload:r,totalProgress:n,totalSize:y,totalUploadedSize:D,isAllComplete:!1,isAllPaused:f,isAllErrored:v,isUploadStarted:p,isUploadInProgress:b,isSomeGhost:C,recoveredState:o,complete:l.length,newFiles:k.length,numUploads:u.length,totalETA:F,files:a,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:_,supportsUploadProgress:N,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const e=this.el;xl(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}Bl.VERSION=df.version;const $s=300;class ff extends Ve{constructor(){super(...arguments),this.ref=Mh()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,$s)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,$s)}render(){const{children:e}=this.props;return h("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}function mf(t,e){return Object.assign(t,e)}function gf(t,e){var i;return(i=t==null?void 0:t.key)!=null?i:e}function vf(t,e){const i=t._ptgLinkedRefs||(t._ptgLinkedRefs={});return i[e]||(i[e]=a=>{t.refs[e]=a})}function Di(t){const e={};for(let i=0;i<t.length;i++)if(t[i]!=null){const a=gf(t[i],i.toString(36));e[a]=t[i]}return e}function yf(t,e){t=t||{},e=e||{};const i=s=>e.hasOwnProperty(s)?e[s]:t[s],a={};let r=[];for(const s in t)e.hasOwnProperty(s)?r.length&&(a[s]=r,r=[]):r.push(s);const n={};for(const s in e){if(a.hasOwnProperty(s))for(let o=0;o<a[s].length;o++){const d=a[s][o];n[a[s][o]]=i(d)}n[s]=i(s)}for(let s=0;s<r.length;s++)n[r[s]]=i(r[s]);return n}const bf=t=>t;class Nl extends Ve{constructor(e,i){super(e,i),this.refs={},this.state={children:Di(bt(bt(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const i in e)e[i]&&this.performAppear(i)}componentWillReceiveProps(e){const i=Di(bt(e.children)||[]),a=this.state.children;this.setState(n=>({children:yf(n.children,i)}));let r;for(r in i)if(i.hasOwnProperty(r)){const n=a&&a.hasOwnProperty(r);i[r]&&n&&this.currentlyTransitioningKeys[r]?(this.keysToEnter.push(r),this.keysToAbortLeave.push(r)):i[r]&&!n&&!this.currentlyTransitioningKeys[r]&&this.keysToEnter.push(r)}for(r in a)if(a.hasOwnProperty(r)){const n=i&&i.hasOwnProperty(r);a[r]&&!n&&!this.currentlyTransitioningKeys[r]&&this.keysToLeave.push(r)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:i}=this;this.keysToLeave=[],i.forEach(this.performLeave)}_finishAbort(e){const i=this.keysToAbortLeave.indexOf(e);i!==-1&&this.keysToAbortLeave.splice(i,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i.componentWillAppear?i.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const i=this.refs[e];i.componentDidAppear&&i.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const a=Di(bt(this.props.children)||[]);(!a||!a.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i.componentWillEnter?i.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const i=this.refs[e];i.componentDidEnter&&i.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const a=Di(bt(this.props.children)||[]);(!a||!a.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const a=this.refs[e];a.componentWillLeave?a.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const a=this.refs[e];a.componentDidLeave&&a.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const r=Di(bt(this.props.children)||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{const n=mf({},this.state.children);delete n[e],this.setState({children:n})}}render(e,i){let{childFactory:a,transitionLeave:r,transitionName:n,transitionAppear:s,transitionEnter:o,transitionLeaveTimeout:d,transitionEnterTimeout:u,transitionAppearTimeout:l,component:c,...p}=e,{children:m}=i;const v=Object.entries(m).map(f=>{let[b,C]=f;if(!C)return;const k=vf(this,b);return bl(a(C),{ref:k,key:b})}).filter(Boolean);return h(c,p,v)}}Nl.defaultProps={component:"span",childFactory:bf};const wf={version:"3.0.1"};class Rl extends mt{constructor(e,i){super(e,i),this.render=r=>h("div",{className:"uppy uppy-Informer"},h(Nl,null,r.info.map(n=>h(ff,{key:n.message},h("p",{role:"alert"},n.message," ",n.details&&h("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer";const a={};this.opts={...a,...i}}install(){const{target:e}=this.opts;e&&this.mount(e,this)}}Rl.VERSION=wf.version;const Sf=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function Cf(t,e,i){var a,r;const n=Sf.exec(t),s=(a=(r=e.mimeType)!=null?r:n==null?void 0:n[1])!=null?a:"plain/text";let o;if(n[2]!=null){const d=atob(decodeURIComponent(n[3])),u=new Uint8Array(d.length);for(let l=0;l<d.length;l++)u[l]=d.charCodeAt(l);o=[u]}else o=[decodeURIComponent(n[3])];return i?new File(o,e.name||"",{type:s}):new Blob(o,{type:s})}function Us(t){return t.startsWith("blob:")}function Ls(t){return t?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t):!1}function ie(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var $l=typeof self!="undefined"?self:global;const qi=typeof navigator!="undefined",Ef=qi&&typeof HTMLImageElement=="undefined",zs=!(typeof global=="undefined"||typeof process=="undefined"||!process.versions||!process.versions.node),Ul=$l.Buffer,Ll=!!Ul,Tf=t=>t!==void 0;function zl(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(Tf).length===0)}function Pe(t){let e=new Error(t);throw delete e.stack,e}function js(t){let e=function(i){let a=0;return i.ifd0.enabled&&(a+=1024),i.exif.enabled&&(a+=2048),i.makerNote&&(a+=2048),i.userComment&&(a+=1024),i.gps.enabled&&(a+=512),i.interop.enabled&&(a+=100),i.ifd1.enabled&&(a+=1024),a+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const Tn=t=>String.fromCharCode.apply(null,t),Vs=typeof TextDecoder!="undefined"?new TextDecoder("utf-8"):void 0;class Ke{static from(e,i){return e instanceof this&&e.le===i?e:new Ke(e,void 0,void 0,i)}constructor(e,i=0,a,r){if(typeof r=="boolean"&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){a===void 0&&(a=e.byteLength-i);let n=new DataView(e,i,a);this._swapDataView(n)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ke){a===void 0&&(a=e.byteLength-i),(i+=e.byteOffset)+a>e.byteOffset+e.byteLength&&Pe("Creating view outside of available memory in ArrayBuffer");let n=new DataView(e.buffer,i,a);this._swapDataView(n)}else if(typeof e=="number"){let n=new DataView(new ArrayBuffer(e));this._swapDataView(n)}else Pe("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,i,a=Ke){return e instanceof DataView||e instanceof Ke?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Pe("BufferView.set(): Invalid data argument."),this.toUint8().set(e,i),new a(this,i,e.byteLength)}subarray(e,i){return i=i||this._lengthToEnd(e),new Ke(this,e,i)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,i){return new Uint8Array(this.buffer,this.byteOffset+e,i)}getString(e=0,i=this.byteLength){return r=this.getUint8Array(e,i),Vs?Vs.decode(r):Ll?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(Tn(r)));var r}getLatin1String(e=0,i=this.byteLength){let a=this.getUint8Array(e,i);return Tn(a)}getUnicodeString(e=0,i=this.byteLength){const a=[];for(let r=0;r<i&&e+r<this.byteLength;r+=2)a.push(this.getUint16(e+r));return Tn(a)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,i=this.le){return this.dataView.getInt16(e,i)}getInt32(e,i=this.le){return this.dataView.getInt32(e,i)}getUint16(e,i=this.le){return this.dataView.getUint16(e,i)}getUint32(e,i=this.le){return this.dataView.getUint32(e,i)}getFloat32(e,i=this.le){return this.dataView.getFloat32(e,i)}getFloat64(e,i=this.le){return this.dataView.getFloat64(e,i)}getFloat(e,i=this.le){return this.dataView.getFloat32(e,i)}getDouble(e,i=this.le){return this.dataView.getFloat64(e,i)}getUintBytes(e,i,a){switch(i){case 1:return this.getUint8(e,a);case 2:return this.getUint16(e,a);case 4:return this.getUint32(e,a);case 8:return this.getUint64&&this.getUint64(e,a)}}getUint(e,i,a){switch(i){case 8:return this.getUint8(e,a);case 16:return this.getUint16(e,a);case 32:return this.getUint32(e,a);case 64:return this.getUint64&&this.getUint64(e,a)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Wn(t,e){Pe(`${t} '${e}' was not loaded, try using full build of exifr.`)}class fr extends Map{constructor(e){super(),this.kind=e}get(e,i){return this.has(e)||Wn(this.kind,e),i&&(e in i||function(a,r){Pe(`Unknown ${a} '${r}'.`)}(this.kind,e),i[e].enabled||Wn(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Va=new fr("file parser"),Re=new fr("segment parser"),ta=new fr("file reader");let kf=$l.fetch;function Hs(t,e){return(i=t).startsWith("data:")||i.length>1e4?Gn(t,e,"base64"):zs&&t.includes("://")?qn(t,e,"url",Ra):zs?Gn(t,e,"fs"):qi?qn(t,e,"url",Ra):void Pe("Invalid input argument");var i}async function qn(t,e,i,a){return ta.has(i)?Gn(t,e,i):a?async function(r,n){let s=await n(r);return new Ke(s)}(t,a):void Pe(`Parser ${i} is not loaded`)}async function Gn(t,e,i){let a=new(ta.get(i))(t,e);return await a.read(),a}const Ra=t=>kf(t).then(e=>e.arrayBuffer()),Gi=t=>new Promise((e,i)=>{let a=new FileReader;a.onloadend=()=>e(a.result||new ArrayBuffer),a.onerror=i,a.readAsArrayBuffer(t)});class _f extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function jl(t,e,i){let a=new _f;for(let[r,n]of i)a.set(r,n);if(Array.isArray(e))for(let r of e)t.set(r,a);else t.set(e,a);return a}function Vl(t,e,i){let a,r=t.get(e);for(a of i)r.set(a[0],a[1])}const ia=new Map,mr=new Map,gr=new Map,Jt=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ha=["jfif","xmp","icc","iptc","ihdr"],Yi=["tiff",...Ha],Se=["ifd0","ifd1","exif","gps","interop"],ei=[...Yi,...Se],ti=["makerNote","userComment"],Wa=["translateKeys","translateValues","reviveValues","multiSegment"],ii=[...Wa,"sanitize","mergeOutput","silentErrors"];class Hl{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Fi extends Hl{get needed(){return this.enabled||this.deps.size>0}constructor(e,i,a,r){if(super(),ie(this,"enabled",!1),ie(this,"skip",new Set),ie(this,"pick",new Set),ie(this,"deps",new Set),ie(this,"translateKeys",!1),ie(this,"translateValues",!1),ie(this,"reviveValues",!1),this.key=e,this.enabled=i,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=Se.includes(e),this.canBeFiltered&&(this.dict=ia.get(e)),a!==void 0)if(Array.isArray(a))this.parse=this.enabled=!0,this.canBeFiltered&&a.length>0&&this.translateTagSet(a,this.pick);else if(typeof a=="object"){if(this.enabled=!0,this.parse=a.parse!==!1,this.canBeFiltered){let{pick:n,skip:s}=a;n&&n.length>0&&this.translateTagSet(n,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(a)}else a===!0||a===!1?this.parse=this.enabled=a:Pe(`Invalid options argument: ${a}`)}applyInheritables(e){let i,a;for(i of Wa)a=e[i],a!==void 0&&(this[i]=a)}translateTagSet(e,i){if(this.dict){let a,r,{tagKeys:n,tagValues:s}=this.dict;for(a of e)typeof a=="string"?(r=s.indexOf(a),r===-1&&(r=n.indexOf(Number(a))),r!==-1&&i.add(Number(n[r]))):i.add(a)}else for(let a of e)i.add(a)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,$a(this.pick,this.deps)):this.enabled&&this.pick.size>0&&$a(this.pick,this.deps)}}var Ie={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ws=new Map;class aa extends Hl{static useCached(e){let i=Ws.get(e);return i!==void 0||(i=new this(e),Ws.set(e,i)),i}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Pe(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=qi?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Jt)this[e]=Ie[e];for(e of ii)this[e]=Ie[e];for(e of ti)this[e]=Ie[e];for(e of ei)this[e]=new Fi(e,Ie[e],void 0,this)}setupFromTrue(){let e;for(e of Jt)this[e]=Ie[e];for(e of ii)this[e]=Ie[e];for(e of ti)this[e]=!0;for(e of ei)this[e]=new Fi(e,!0,void 0,this)}setupFromArray(e){let i;for(i of Jt)this[i]=Ie[i];for(i of ii)this[i]=Ie[i];for(i of ti)this[i]=Ie[i];for(i of ei)this[i]=new Fi(i,!1,void 0,this);this.setupGlobalFilters(e,void 0,Se)}setupFromObject(e){let i;for(i of(Se.ifd0=Se.ifd0||Se.image,Se.ifd1=Se.ifd1||Se.thumbnail,Object.assign(this,e),Jt))this[i]=kn(e[i],Ie[i]);for(i of ii)this[i]=kn(e[i],Ie[i]);for(i of ti)this[i]=kn(e[i],Ie[i]);for(i of Yi)this[i]=new Fi(i,Ie[i],e[i],this);for(i of Se)this[i]=new Fi(i,Ie[i],e[i],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Se,ei),e.tiff===!0?this.batchEnableWithBool(Se,!0):e.tiff===!1?this.batchEnableWithUserValue(Se,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Se):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Se)}batchEnableWithBool(e,i){for(let a of e)this[a].enabled=i}batchEnableWithUserValue(e,i){for(let a of e){let r=i[a];this[a].enabled=r!==!1&&r!==void 0}}setupGlobalFilters(e,i,a,r=a){if(e&&e.length){for(let s of r)this[s].enabled=!1;let n=qs(e,a);for(let[s,o]of n)$a(this[s].pick,o),this[s].enabled=!0}else if(i&&i.length){let n=qs(i,a);for(let[s,o]of n)$a(this[s].skip,o)}}filterNestedSegmentTags(){let{ifd0:e,exif:i,xmp:a,iptc:r,icc:n}=this;this.makerNote?i.deps.add(37500):i.skip.add(37500),this.userComment?i.deps.add(37510):i.skip.add(37510),a.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:i,gps:a,interop:r}=this;r.needed&&(i.deps.add(40965),e.deps.add(40965)),i.needed&&e.deps.add(34665),a.needed&&e.deps.add(34853),this.tiff.enabled=Se.some(n=>this[n].enabled===!0)||this.makerNote||this.userComment;for(let n of Se)this[n].finalizeFilters()}get onlyTiff(){return!Ha.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Yi)this[e].enabled&&!Re.has(e)&&Wn("segment parser",e)}}function qs(t,e){let i,a,r,n,s=[];for(r of e){for(n of(i=ia.get(r),a=[],i))(t.includes(n[0])||t.includes(n[1]))&&a.push(n[0]);a.length&&s.push([r,a])}return s}function kn(t,e){return t!==void 0?t:e!==void 0?e:void 0}function $a(t,e){for(let i of e)t.add(i)}ie(aa,"default",Ie);class qa{constructor(e){ie(this,"parsers",{}),ie(this,"output",{}),ie(this,"errors",[]),ie(this,"pushToErrors",i=>this.errors.push(i)),this.options=aa.useCached(e)}async read(e){this.file=await function(i,a){return typeof i=="string"?Hs(i,a):qi&&!Ef&&i instanceof HTMLImageElement?Hs(i.src,a):i instanceof Uint8Array||i instanceof ArrayBuffer||i instanceof DataView?new Ke(i):qi&&i instanceof Blob?qn(i,a,"blob",Gi):void Pe("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,i=e.getUint16(0);for(let[a,r]of Va)if(r.canHandle(e,i))return this.fileParser=new r(this.options,this.file,this.parsers),e[a]=!0;this.file.close&&this.file.close(),Pe("Unknown file format")}async parse(){let{output:e,errors:i}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),i.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&i.length>0&&(e.errors=i),zl(a=e)?void 0:a;var a}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let i=Object.values(this.parsers).map(async a=>{let r=await a.parse();a.assignToOutput(e,r)});this.options.silentErrors&&(i=i.map(a=>a.catch(this.pushToErrors))),await Promise.all(i)}async extractThumbnail(){this.setup();let{options:e,file:i}=this,a=Re.get("tiff",e);var r;if(i.tiff?r={start:0,type:"tiff"}:i.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),r===void 0)return;let n=await this.fileParser.ensureSegmentChunk(r),s=this.parsers.tiff=new a(n,e,i),o=await s.extractThumbnail();return i.close&&i.close(),o}}async function Wl(t,e){let i=new qa(e);return await i.read(t),i.parse()}var Df=Object.freeze({__proto__:null,parse:Wl,Exifr:qa,fileParsers:Va,segmentParsers:Re,fileReaders:ta,tagKeys:ia,tagValues:mr,tagRevivers:gr,createDictionary:jl,extendDictionary:Vl,fetchUrlAsArrayBuffer:Ra,readBlobAsArrayBuffer:Gi,chunkedProps:Jt,otherSegments:Ha,segments:Yi,tiffBlocks:Se,segmentsAndBlocks:ei,tiffExtractables:ti,inheritables:Wa,allFormatters:ii,Options:aa});class ai{static findPosition(e,i){let a=e.getUint16(i+2)+2,r=typeof this.headerLength=="function"?this.headerLength(e,i,a):this.headerLength,n=i+r,s=a-r;return{offset:i,length:a,headerLength:r,start:n,size:s,end:n+s}}static parse(e,i={}){return new this(e,new aa({[this.type]:i}),e).parse()}normalizeInput(e){return e instanceof Ke?e:new Ke(e)}constructor(e,i={},a){ie(this,"errors",[]),ie(this,"raw",new Map),ie(this,"handleError",r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)}),this.chunk=this.normalizeInput(e),this.file=a,this.type=this.constructor.type,this.globalOptions=this.options=i,this.localOptions=i[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,i){let a=gr.get(i),r=mr.get(i),n=ia.get(i),s=this.options[i],o=s.reviveValues&&!!a,d=s.translateValues&&!!r,u=s.translateKeys&&!!n,l={};for(let[c,p]of e)o&&a.has(c)?p=a.get(c)(p):d&&r.has(c)&&(p=this.translateValue(p,r.get(c))),u&&n.has(c)&&(c=n.get(c)||c),l[c]=p;return l}translateValue(e,i){return i[e]||i.DEFAULT||e}assignToOutput(e,i){this.assignObjectToOutput(e,this.constructor.type,i)}assignObjectToOutput(e,i,a){if(this.globalOptions.mergeOutput)return Object.assign(e,a);e[i]?Object.assign(e[i],a):e[i]=a}}ie(ai,"headerLength",4),ie(ai,"type",void 0),ie(ai,"multiSegment",!1),ie(ai,"canHandle",()=>!1);function Ff(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function Pf(t){return t>=224&&t<=239}function Of(t,e,i){for(let[a,r]of Re)if(r.canHandle(t,e,i))return a}class Gs extends class{constructor(e,i,a){ie(this,"errors",[]),ie(this,"ensureSegmentChunk",async r=>{let n=r.start,s=r.size||65536;if(this.file.chunked)if(this.file.available(n,s))r.chunk=this.file.subarray(n,s);else try{r.chunk=await this.file.readChunk(n,s)}catch(o){Pe(`Couldn't read segment: ${JSON.stringify(r)}. ${o.message}`)}else this.file.byteLength>n+s?r.chunk=this.file.subarray(n,s):r.size===void 0?r.chunk=this.file.subarray(n):Pe("Segment unreachable: "+JSON.stringify(r));return r.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=i,this.parsers=a}injectSegment(e,i){this.options[e].enabled&&this.createParser(e,i)}createParser(e,i){let a=new(Re.get(e))(i,this.options,this.file);return this.parsers[e]=a}createParsers(e){for(let i of e){let{type:a,chunk:r}=i,n=this.options[a];if(n&&n.enabled){let s=this.parsers[a];s&&s.append||s||this.createParser(a,r)}}}async readSegments(e){let i=e.map(this.ensureSegmentChunk);await Promise.all(i)}}{constructor(...e){super(...e),ie(this,"appSegments",[]),ie(this,"jpegSegments",[]),ie(this,"unknownSegments",[])}static canHandle(e,i){return i===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Re.keyList())):(e=e===void 0?Re.keyList().filter(i=>this.options[i].enabled):e.filter(i=>this.options[i].enabled&&Re.has(i)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,i){this.setupSegmentFinderArgs(i);let{file:a,findAll:r,wanted:n,remaining:s}=this;if(!r&&this.file.chunked&&(r=Array.from(n).some(o=>{let d=Re.get(o),u=this.options[o];return d.multiSegment&&u.multiSegment}),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,a.byteLength),!this.options.onlyTiff&&a.chunked){let o=!1;for(;s.size>0&&!o&&(a.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=a,u=this.appSegments.some(l=>!this.file.available(l.offset||l.start,l.length||l.size));if(o=e>d&&!u?!await a.readNextChunk(e):!await a.readNextChunk(d),(e=this.findAppSegmentsInRange(e,a.byteLength))===void 0)return}}}findAppSegmentsInRange(e,i){i-=2;let a,r,n,s,o,d,{file:u,findAll:l,wanted:c,remaining:p,options:m}=this;for(;e<i;e++)if(u.getUint8(e)===255){if(a=u.getUint8(e+1),Pf(a)){if(r=u.getUint16(e+2),n=Of(u,e,r),n&&c.has(n)&&(s=Re.get(n),o=s.findPosition(u,e),d=m[n],o.type=n,this.appSegments.push(o),!l&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||p.delete(n)):p.delete(n),p.size===0)))break;m.recordUnknownSegments&&(o=ai.findPosition(u,e),o.marker=a,this.unknownSegments.push(o)),e+=r+1}else if(Ff(a)){if(r=u.getUint16(e+2),a===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:a}),e+=r+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(i=>i.multiSegment))return;let e=function(i,a){let r,n,s,o=new Map;for(let d=0;d<i.length;d++)r=i[d],n=r[a],o.has(n)?s=o.get(n):o.set(n,s=[]),s.push(r);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=e.map(([i,a])=>{let r=Re.get(i,this.options);return r.handleMultiSegments?{type:i,chunk:r.handleMultiSegments(a)}:a[0]})}getSegment(e){return this.appSegments.find(i=>i.type===e)}async getOrFindSegment(e){let i=this.getSegment(e);return i===void 0&&(await this.findAppSegments(0,[e]),i=this.getSegment(e)),i}}ie(Gs,"type","jpeg"),Va.set("jpeg",Gs);const xf=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class If extends ai{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,i,a=new Map){let{pick:r,skip:n}=this.options[i];r=new Set(r);let s=r.size>0,o=n.size===0,d=this.chunk.getUint16(e);e+=2;for(let u=0;u<d;u++){let l=this.chunk.getUint16(e);if(s){if(r.has(l)&&(a.set(l,this.parseTag(e,l,i)),r.delete(l),r.size===0))break}else!o&&n.has(l)||a.set(l,this.parseTag(e,l,i));e+=12}return a}parseTag(e,i,a){let{chunk:r}=this,n=r.getUint16(e+2),s=r.getUint32(e+4),o=xf[n];if(o*s<=4?e+=8:e=r.getUint32(e+8),(n<1||n>13)&&Pe(`Invalid TIFF value type. block: ${a.toUpperCase()}, tag: ${i.toString(16)}, type: ${n}, offset ${e}`),e>r.byteLength&&Pe(`Invalid TIFF value offset. block: ${a.toUpperCase()}, tag: ${i.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${r.byteLength}`),n===1)return r.getUint8Array(e,s);if(n===2)return(d=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(d=r.getString(e,s)).trim())===""?void 0:d;var d;if(n===7)return r.getUint8Array(e,s);if(s===1)return this.parseTagValue(n,e);{let u=new(function(c){switch(c){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(s),l=o;for(let c=0;c<s;c++)u[c]=this.parseTagValue(n,e),e+=l;return u}}parseTagValue(e,i){let{chunk:a}=this;switch(e){case 1:return a.getUint8(i);case 3:return a.getUint16(i);case 4:return a.getUint32(i);case 5:return a.getUint32(i)/a.getUint32(i+4);case 6:return a.getInt8(i);case 8:return a.getInt16(i);case 9:return a.getInt32(i);case 10:return a.getInt32(i)/a.getInt32(i+4);case 11:return a.getFloat(i);case 12:return a.getDouble(i);case 13:return a.getUint32(i);default:Pe(`Invalid tiff type ${e}`)}}}class _n extends If{static canHandle(e,i){return e.getUint8(i+1)===225&&e.getUint32(i+4)===1165519206&&e.getUint16(i+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let i=this[e]();return i.catch!==void 0&&(i=i.catch(this.handleError)),i}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),i=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(i)}}parseBlock(e,i){let a=new Map;return this[i]=a,this.parseTags(e,i,a),a}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Pe("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Pe(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,js(this.options));let i=this.parseBlock(this.ifd0Offset,"ifd0");return i.size!==0?(this.exifOffset=i.get(34665),this.interopOffset=i.get(40965),this.gpsOffset=i.get(34853),this.xmp=i.get(700),this.iptc=i.get(33723),this.icc=i.get(34675),this.options.sanitize&&(i.delete(34665),i.delete(40965),i.delete(34853),i.delete(700),i.delete(33723),i.delete(34675)),i):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,js(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,i){let a=e.get(i);a&&a.length===1&&e.set(i,a[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Ys(...e.get(2),e.get(1))),e.set("longitude",Ys(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),i=this.ifd1.get(514);return this.chunk.getUint8Array(e,i)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,i,a,r={};for(i of Se)if(e=this[i],!zl(e))if(a=this.canTranslate?this.translateBlock(e,i):Object.fromEntries(e),this.options.mergeOutput){if(i==="ifd1")continue;Object.assign(r,a)}else r[i]=a;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,i){if(this.globalOptions.mergeOutput)Object.assign(e,i);else for(let[a,r]of Object.entries(i))this.assignObjectToOutput(e,a,r)}}function Ys(t,e,i,a){var r=t+e/60+i/3600;return a!=="S"&&a!=="W"||(r*=-1),r}ie(_n,"type","tiff"),ie(_n,"headerLength",10),Re.set("tiff",_n);Object.freeze({__proto__:null,default:Df,Exifr:qa,fileParsers:Va,segmentParsers:Re,fileReaders:ta,tagKeys:ia,tagValues:mr,tagRevivers:gr,createDictionary:jl,extendDictionary:Vl,fetchUrlAsArrayBuffer:Ra,readBlobAsArrayBuffer:Gi,chunkedProps:Jt,otherSegments:Ha,segments:Yi,tiffBlocks:Se,segmentsAndBlocks:ei,tiffExtractables:ti,inheritables:Wa,allFormatters:ii,Options:aa,parse:Wl});const vr={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},vr,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},vr,{tiff:!1,ifd1:!0,mergeOutput:!1});const Af=Object.assign({},vr,{firstChunkSize:4e4,ifd0:[274]});async function Mf(t){let e=new qa(Af);await e.read(t);let i=await e.parse();if(i&&i.ifd0)return i.ifd0[274]}const Bf=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Ni=!0,Ri=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,i,a]=e;Ni=Number(i)+.1*Number(a)<13.4,Ri=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Ni=Ri=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Ni=Ri=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Ni=Ri=Number(e)<77}}async function Nf(t){let e=await Mf(t);return Object.assign({canvas:Ni,css:Ri},Bf[e])}class Rf extends Ke{constructor(...e){super(...e),ie(this,"ranges",new $f),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,i,a){if(e===0&&this.byteLength===0&&a){let r=new DataView(a.buffer||a,a.byteOffset,a.byteLength);this._swapDataView(r)}else{let r=e+i;if(r>this.byteLength){let{dataView:n}=this._extend(r);this._swapDataView(n)}}}_extend(e){let i;i=Ll?Ul.allocUnsafe(e):new Uint8Array(e);let a=new DataView(i.buffer,i.byteOffset,i.byteLength);return i.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:i,dataView:a}}subarray(e,i,a=!1){return i=i||this._lengthToEnd(e),a&&this._tryExtend(e,i),this.ranges.add(e,i),super.subarray(e,i)}set(e,i,a=!1){a&&this._tryExtend(i,e.byteLength,e);let r=super.set(e,i);return this.ranges.add(i,r.byteLength),r}async ensureChunk(e,i){this.chunked&&(this.ranges.available(e,i)||await this.readChunk(e,i))}available(e,i){return this.ranges.available(e,i)}}class $f{constructor(){ie(this,"list",[])}get length(){return this.list.length}add(e,i,a=0){let r=e+i,n=this.list.filter(s=>Xs(e,s.offset,r)||Xs(e,s.end,r));if(n.length>0){e=Math.min(e,...n.map(o=>o.offset)),r=Math.max(r,...n.map(o=>o.end)),i=r-e;let s=n.shift();s.offset=e,s.length=i,s.end=r,this.list=this.list.filter(o=>!n.includes(o))}else this.list.push({offset:e,length:i,end:r})}available(e,i){let a=e+i;return this.list.some(r=>r.offset<=e&&a<=r.end)}}function Xs(t,e,i){return t<=e&&e<=i}class Uf extends Rf{constructor(e,i){super(0),ie(this,"chunksRead",0),this.input=e,this.options=i}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let i=this.options.chunkSize,a=await this.readChunk(e,i);return!!a&&a.byteLength===i}async readChunk(e,i){if(this.chunksRead++,(i=this.safeWrapAddress(e,i))!==0)return this._readChunk(e,i)}safeWrapAddress(e,i){return this.size!==void 0&&e+i>this.size?Math.max(0,this.size-e):i}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ta.set("blob",class extends Uf{async readWhole(){this.chunked=!1;let t=await Gi(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let i=e?t+e:void 0,a=this.input.slice(t,i),r=await Gi(a);return this.set(r,t,!0)}});var Lf={strings:{generatingThumbnails:"Generating thumbnails..."}};const zf={version:"3.0.2"};function jf(t,e,i){try{t.getContext("2d").getImageData(0,0,1,1)}catch(a){if(a.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return t.toBlob?new Promise(a=>{t.toBlob(a,e,i)}).then(a=>{if(a===null)throw new Error("cannot read image, probably an svg with external resources");return a}):Promise.resolve().then(()=>Cf(t.toDataURL(e,i),{})).then(a=>{if(a===null)throw new Error("could not extract blob, probably an old browser");return a})}function Vf(t,e){let i=t.width,a=t.height;(e.deg===90||e.deg===270)&&(i=t.height,a=t.width);const r=document.createElement("canvas");r.width=i,r.height=a;const n=r.getContext("2d");return n.translate(i/2,a/2),e.canvas&&(n.rotate(e.rad),n.scale(e.scaleX,e.scaleY)),n.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),r}function Hf(t){const e=t.width/t.height,i=5e6,a=4096;let r=Math.floor(Math.sqrt(i*e)),n=Math.floor(i/Math.sqrt(i*e));if(r>a&&(r=a,n=Math.round(r/e)),n>a&&(n=a,r=Math.round(e*n)),t.width>r){const s=document.createElement("canvas");return s.width=r,s.height=n,s.getContext("2d").drawImage(t,0,0,r,n),s}return t}class ql extends mt{constructor(e,i){super(e,i),this.onFileAdded=r=>{!r.preview&&r.data&&Ls(r.type)&&!r.isRemote&&this.addToQueue(r.id)},this.onCancelRequest=r=>{const n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=r=>{const n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1),r.preview&&Us(r.preview)&&URL.revokeObjectURL(r.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||Us(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=r=>{r.forEach(s=>{const o=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const n=()=>{r.forEach(s=>{const o=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",o)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),s()}):(n(),s())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType||"image/jpeg",this.defaultLocale=Lf;const a={thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1};if(this.opts={...a,...i},this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,i,a){const r=URL.createObjectURL(e.data),n=new Promise((o,d)=>{const u=new Image;u.src=r,u.addEventListener("load",()=>{URL.revokeObjectURL(r),o(u)}),u.addEventListener("error",l=>{URL.revokeObjectURL(r),d(l.error||new Error("Could not create thumbnail"))})}),s=Nf(e.data).catch(()=>1);return Promise.all([n,s]).then(o=>{let[d,u]=o;const l=this.getProportionalDimensions(d,i,a,u.deg),c=Vf(d,u),p=this.resizeImage(c,l.width,l.height);return jf(p,this.thumbnailType,80)}).then(o=>URL.createObjectURL(o))}getProportionalDimensions(e,i,a,r){let n=e.width/e.height;return(r===90||r===270)&&(n=e.height/e.width),i!=null?{width:i,height:Math.round(i/n)}:a!=null?{width:Math.round(a*n),height:a}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/n)}}resizeImage(e,i,a){let r=Hf(e),n=Math.ceil(Math.log2(r.width/i));n<1&&(n=1);let s=i*2**(n-1),o=a*2**(n-1);const d=2;for(;n--;){const u=document.createElement("canvas");u.width=s,u.height=o,u.getContext("2d").drawImage(r,0,0,s,o),r=u,s=Math.round(s/d),o=Math.round(o/d)}return r}setPreviewURL(e,i){this.uppy.setFileState(e,{preview:i})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Ls(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(i=>{this.setPreviewURL(e.id,i),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),i)}).catch(i=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(i,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),i)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ql.VERSION=zf.version;function Ks(t){if(typeof t=="string"){const e=document.querySelectorAll(t);return e.length===0?null:Array.from(e)}return typeof t=="object"&&Ol(t)?[t]:null}var li=Array.from;function Gl(t,e,i,a){let{onSuccess:r}=a;t.readEntries(n=>{const s=[...e,...n];n.length?queueMicrotask(()=>{Gl(t,s,i,{onSuccess:r})}):r(s)},n=>{i(n),r(e)})}function Yl(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((i,a)=>t.file(i,a))},async*values(){const i=t.createReader();yield*await new Promise(r=>{Gl(i,[],e,{onSuccess:n=>r(n.map(s=>Yl(s,e)))})})}}}async function*Xl(t,e,i){if(i===void 0&&(i=void 0),t.kind==="file"){const a=await t.getFile();a!==null?(a.relativePath=e?`${e}/${t.name}`:null,yield a):i!=null&&(yield i)}else if(t.kind==="directory")for await(const a of t.values())yield*Xl(a,`${e}/${t.name}`);else i!=null&&(yield i)}async function*Wf(t,e){const i=await Promise.all(Array.from(t.items,async a=>{var r;const n=a.getAsFile(),s=(r=await(a.getAsFileSystemHandle==null?void 0:a.getAsFileSystemHandle()))!=null?r:Yl(a.webkitGetAsEntry(),e);return{lastResortFile:n,entry:s}}));for(const{lastResortFile:a,entry:r}of i)if(r!=null)try{yield*Xl(r,"",a)}catch(n){a!=null?yield a:e(n)}else a!=null&&(yield a)}function qf(t){const e=li(t.files);return Promise.resolve(e)}async function Kl(t,e){let{logDropError:i=()=>{}}=e===void 0?{}:e;try{const a=[];for await(const r of Wf(t,i))a.push(r);return a}catch{return qf(t)}}var Zs=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Gf(t,e){return!!(t===e||Zs(t)&&Zs(e))}function Yf(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!Gf(t[i],e[i]))return!1;return!0}function Qs(t,e){e===void 0&&(e=Yf);var i=null;function a(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(i&&i.lastThis===this&&e(r,i.lastArgs))return i.lastResult;var s=t.apply(this,r);return i={lastResult:s,lastArgs:r,lastThis:this},s}return a.clear=function(){i=null},a}var Zl=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function Ql(t,e){if(e){const i=t.querySelector(`[data-uppy-paneltype="${e}"]`);if(i)return i}return t}function Js(t,e){const i=e[0];i&&(i.focus(),t.preventDefault())}function Xf(t,e){const i=e[e.length-1];i&&(i.focus(),t.preventDefault())}function Kf(t){return t.contains(document.activeElement)}function Jl(t,e,i){const a=Ql(i,e),r=li(a.querySelectorAll(Zl)),n=r.indexOf(document.activeElement);Kf(a)?t.shiftKey&&n===0?Xf(t,r):!t.shiftKey&&n===r.length-1&&Js(t,r):Js(t,r)}function Zf(t,e,i){e===null||Jl(t,e,i)}var Qf="Expected a function",eo=0/0,Jf="[object Symbol]",em=/^\s+|\s+$/g,tm=/^[-+]0x[0-9a-f]+$/i,im=/^0b[01]+$/i,am=/^0o[0-7]+$/i,nm=parseInt,rm=typeof St=="object"&&St&&St.Object===Object&&St,sm=typeof self=="object"&&self&&self.Object===Object&&self,om=rm||sm||Function("return this")(),lm=Object.prototype,um=lm.toString,dm=Math.max,cm=Math.min,Dn=function(){return om.Date.now()};function hm(t,e,i){var a,r,n,s,o,d,u=0,l=!1,c=!1,p=!0;if(typeof t!="function")throw new TypeError(Qf);e=to(e)||0,Yn(i)&&(l=!!i.leading,c="maxWait"in i,n=c?dm(to(i.maxWait)||0,e):n,p="trailing"in i?!!i.trailing:p);function m(y){var D=a,x=r;return a=r=void 0,u=y,s=t.apply(x,D),s}function v(y){return u=y,o=setTimeout(C,e),l?m(y):s}function f(y){var D=y-d,x=y-u,$=e-D;return c?cm($,n-x):$}function b(y){var D=y-d,x=y-u;return d===void 0||D>=e||D<0||c&&x>=n}function C(){var y=Dn();if(b(y))return k(y);o=setTimeout(C,f(y))}function k(y){return o=void 0,p&&a?m(y):(a=r=void 0,s)}function F(){o!==void 0&&clearTimeout(o),u=0,a=d=r=o=void 0}function _(){return o===void 0?s:k(Dn())}function N(){var y=Dn(),D=b(y);if(a=arguments,r=this,d=y,D){if(o===void 0)return v(d);if(c)return o=setTimeout(C,e),m(d)}return o===void 0&&(o=setTimeout(C,e)),s}return N.cancel=F,N.flush=_,N}function Yn(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function pm(t){return!!t&&typeof t=="object"}function fm(t){return typeof t=="symbol"||pm(t)&&um.call(t)==Jf}function to(t){if(typeof t=="number")return t;if(fm(t))return eo;if(Yn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Yn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(em,"");var i=im.test(t);return i||am.test(t)?nm(t.slice(2),i?2:8):tm.test(t)?eo:+t}var mm=hm;function gm(){let t=!1;return mm((i,a)=>{const r=Ql(i,a),n=r.contains(document.activeElement);if(n&&t)return;const s=r.querySelector("[data-uppy-super-focusable]");if(!(n&&!s))if(s)s.focus({preventScroll:!0}),t=!0;else{const o=r.querySelector(Zl);o==null||o.focus({preventScroll:!0}),t=!1}},260)}function eu(){const t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}var vm=function(e,i){if(e===i)return!0;for(var a in e)if(!(a in i))return!1;for(var a in i)if(e[a]!==i[a])return!1;return!0};function ym(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#686DE0",fillRule:"evenodd"},h("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),h("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),h("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function bm(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function wm(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function Sm(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function Cm(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function Em(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("g",{fill:"#A7AFB7",fillRule:"nonzero"},h("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),h("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function Tm(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},h("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function yr(t){const e={color:"#838999",icon:Em()};if(!t)return e;const i=t.split("/")[0],a=t.split("/")[1];return i==="text"?{color:"#5a5e69",icon:Tm()}:i==="image"?{color:"#686de0",icon:ym()}:i==="audio"?{color:"#068dbb",icon:bm()}:i==="video"?{color:"#19af67",icon:wm()}:i==="application"&&a==="pdf"?{color:"#e25149",icon:Sm()}:i==="application"&&["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(a)!==-1?{color:"#00C469",icon:Cm()}:e}function tu(t){const{file:e}=t;if(e.preview)return h("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:i,icon:a}=yr(e.type);return h("div",{className:"uppy-Dashboard-Item-previewIconWrap"},h("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:i}},a),h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},h("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}const km=(t,e)=>(typeof e=="function"?e():e).filter(r=>r.id===t)[0].name;function iu(t){const{file:e,toggleFileCard:i,i18n:a,metaFields:r}=t,{missingRequiredMetaFields:n}=e;if(!(n!=null&&n.length))return null;const s=n.map(o=>km(o,r)).join(", ");return h("div",{className:"uppy-Dashboard-Item-errorMessage"},a("missingRequiredMetaFields",{smart_count:n.length,fields:s})," ",h("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>i(!0,e.id)},a("editFile")))}function _m(t){return h("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:yr(t.file.type).color}},t.showLinkToFileUploadResult&&t.file.uploadURL&&h("a",{className:"uppy-Dashboard-Item-previewLink",href:t.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.file.meta.name},h("span",{hidden:!0},t.file.meta.name)),h(tu,{file:t.file}),h(iu,{file:t.file,i18n:t.i18n,toggleFileCard:t.toggleFileCard,metaFields:t.metaFields}))}function Dm(t){if(!t.isUploaded){if(t.error&&!t.hideRetryButton){t.uppy.retryUpload(t.file.id);return}t.resumableUploads&&!t.hidePauseResumeButton?t.uppy.pauseResume(t.file.id):t.individualCancellation&&!t.hideCancelButton&&t.uppy.removeFile(t.file.id)}}function io(t){return t.isUploaded?t.i18n("uploadComplete"):t.error?t.i18n("retryUpload"):t.resumableUploads?t.file.isPaused?t.i18n("resumeUpload"):t.i18n("pauseUpload"):t.individualCancellation?t.i18n("cancelUpload"):""}function Fn(t){return h("div",{className:"uppy-Dashboard-Item-progress"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":io(t),title:io(t),onClick:()=>Dm(t)},t.children))}function Sa(t){let{children:e}=t;return h("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function Pn(t){let{progress:e}=t;const i=2*Math.PI*15;return h("g",null,h("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),h("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":i,"stroke-dashoffset":i-i/100*e}))}function Fm(t){if(!t.file.progress.uploadStarted)return null;if(t.isUploaded)return h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(Sa,null,h("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),h("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!t.recoveredState)return t.error&&!t.hideRetryButton?h(Fn,t,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},h("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),h("path",{d:"M7.9 3H10v2H7.9z"}),h("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),h("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):t.resumableUploads&&!t.hidePauseResumeButton?h(Fn,t,h(Sa,null,h(Pn,{progress:t.file.progress.percentage}),t.file.isPaused?h("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):h("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},h("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),h("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!t.resumableUploads&&t.individualCancellation&&!t.hideCancelButton?h(Fn,t,h(Sa,null,h(Pn,{progress:t.file.progress.percentage}),h("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):h("div",{className:"uppy-Dashboard-Item-progress"},h("div",{className:"uppy-Dashboard-Item-progressIndicator"},h(Sa,null,h(Pn,{progress:t.file.progress.percentage}))))}var Pm=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var i=e<0,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i&&(e=-e),e<1)return(i?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),a.length-1);e=Number(e/Math.pow(1024,r));var n=a[r];return e>=10||e%1===0?(i?"-":"")+e.toFixed(0)+" "+n:(i?"-":"")+e.toFixed(1)+" "+n};const On="...";function au(t,e){if(e===0)return"";if(t.length<=e)return t;if(e<=On.length+1)return`${t.slice(0,e-1)}\u2026`;const i=e-On.length,a=Math.ceil(i/2),r=Math.floor(i/2);return t.slice(0,a)+On+t.slice(-r)}const Om=t=>{const{author:e,name:i}=t.file.meta;function a(){return t.singleFile?200:t.containerWidth<=352?35:t.containerWidth<=576?60:e?20:30}return h("div",{className:"uppy-Dashboard-Item-name",title:i},au(i,a()))},xm=t=>{const{author:e}=t.file.meta,{providerName:i}=t.file.remote,a="\xB7";return e?h("div",{className:"uppy-Dashboard-Item-author"},h("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},au(e.name,13)),i?h(kt,null,` ${a} `,i,` ${a} `):null):null},Im=t=>t.file.size&&h("div",{className:"uppy-Dashboard-Item-statusSize"},Pm(t.file.size)),Am=t=>t.file.isGhost&&h("span",null," \u2022 ",h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:t.toggleAddFilesPanel},t.i18n("reSelect"))),Mm=t=>{let{file:e,onClick:i}=t;return e.error?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:i,type:"button"},"?"):null};function Bm(t){const{file:e}=t;return h("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},h("div",{className:"uppy-Dashboard-Item-fileName"},Om(t),h(Mm,{file:t.file,onClick:()=>alert(t.file.error)})),h("div",{className:"uppy-Dashboard-Item-status"},xm(t),Im(t),Am(t)),h(iu,{file:t.file,i18n:t.i18n,toggleFileCard:t.toggleFileCard,metaFields:t.metaFields}))}function Nm(t,e){return e===void 0&&(e="Copy the URL below"),new Promise(i=>{const a=document.createElement("textarea");a.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),a.value=t,document.body.appendChild(a),a.select();const r=()=>{document.body.removeChild(a),window.prompt(e,t),i()};try{return document.execCommand("copy")?(document.body.removeChild(a),i()):r("copy command unavailable")}catch{return document.body.removeChild(a),r()}})}function Rm(t){let{file:e,uploadInProgressOrComplete:i,metaFields:a,canEditFile:r,i18n:n,onClick:s}=t;return!i&&a&&a.length>0||!i&&r(e)?h("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFileWithFilename",{file:e.meta.name}),title:n("editFileWithFilename",{file:e.meta.name}),onClick:()=>s()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},h("g",{fillRule:"evenodd"},h("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),h("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),h("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function $m(t){let{i18n:e,onClick:i,file:a}=t;return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:a.meta.name}),title:e("removeFile",{file:a.meta.name}),onClick:()=>i()},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},h("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),h("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Um=(t,e)=>{Nm(e.file.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(()=>{e.uppy.log("Link copied to clipboard."),e.uppy.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.uppy.log).then(()=>t.target.focus({preventScroll:!0}))};function Lm(t){const{i18n:e}=t;return h("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e("copyLink"),title:e("copyLink"),onClick:i=>Um(i,t)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},h("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function zm(t){const{uppy:e,file:i,uploadInProgressOrComplete:a,canEditFile:r,metaFields:n,showLinkToFileUploadResult:s,showRemoveButton:o,i18n:d,toggleFileCard:u,openFileEditor:l}=t;return h("div",{className:"uppy-Dashboard-Item-actionWrapper"},h(Rm,{i18n:d,file:i,uploadInProgressOrComplete:a,canEditFile:r,metaFields:n,onClick:()=>{n&&n.length>0?u(!0,i.id):l(i)}}),s&&i.uploadURL?h(Lm,{file:i,uppy:e,i18n:d}):null,o?h($m,{i18n:d,file:i,uppy:e,onClick:()=>t.uppy.removeFile(i.id,"removed-by-user")}):null)}class jm extends Ve{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!vm(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,i=e.progress.preprocess||e.progress.postprocess,a=e.progress.uploadComplete&&!i&&!e.error,r=e.progress.uploadStarted||i,n=e.progress.uploadStarted&&!e.progress.uploadComplete||i,s=e.error||!1,{isGhost:o}=e;let d=(this.props.individualCancellation||!n)&&!a;a&&this.props.showRemoveButtonAfterComplete&&(d=!0);const u=Ze({"uppy-Dashboard-Item":!0,"is-inprogress":n&&!this.props.recoveredState,"is-processing":i,"is-complete":a,"is-error":!!s,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return h("div",{className:u,id:`uppy_${e.id}`,role:this.props.role},h("div",{className:"uppy-Dashboard-Item-preview"},h(_m,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),h(Fm,{uppy:this.props.uppy,file:e,error:s,isUploaded:a,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),h("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},h(Bm,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,singleFile:this.props.singleFile}),h(zm,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:d,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:r,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function Xn(){return Xn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Xn.apply(this,arguments)}const Vm={position:"relative",width:"100%",minHeight:"100%"},Hm={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class Wm extends Ve{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:i,rowHeight:a,renderRow:r,overscanCount:n=10,...s}=e;const{offset:o,height:d}=this.state;let u=Math.floor(o/a),l=Math.floor(d/a);n&&(u=Math.max(0,u-u%n),l+=n);const c=u+l+4,p=i.slice(u,c),m={...Vm,height:i.length*a},v={...Hm,top:u*a};return h("div",Xn({onScroll:this.handleScroll},s),h("div",{role:"presentation",style:m},h("div",{role:"presentation",style:v},p.map(r))))}}function Kn(){return Kn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},Kn.apply(this,arguments)}function qm(t,e){const i=[];let a=[];return t.forEach(r=>{a.length<e?a.push(r):(i.push(a),a=[r])}),a.length&&i.push(a),i}var Gm=t=>{const e=t.itemsPerRow===1?71:200,i={id:t.id,error:t.error,i18n:t.i18n,uppy:t.uppy,acquirers:t.acquirers,resumableUploads:t.resumableUploads,individualCancellation:t.individualCancellation,hideRetryButton:t.hideRetryButton,hidePauseResumeButton:t.hidePauseResumeButton,hideCancelButton:t.hideCancelButton,showLinkToFileUploadResult:t.showLinkToFileUploadResult,showRemoveButtonAfterComplete:t.showRemoveButtonAfterComplete,isWide:t.isWide,metaFields:t.metaFields,recoveredState:t.recoveredState,singleFile:t.singleFile,toggleFileCard:t.toggleFileCard,handleRequestThumbnail:t.handleRequestThumbnail,handleCancelThumbnail:t.handleCancelThumbnail},a=(o,d)=>t.files[d].isGhost-t.files[o].isGhost,r=Object.keys(t.files);t.recoveredState&&r.sort(a);const n=qm(r,t.itemsPerRow),s=o=>h("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:o[0]},o.map(d=>h(jm,Kn({key:d,uppy:t.uppy},i,{role:"listitem",openFileEditor:t.openFileEditor,canEditFile:t.canEditFile,toggleAddFilesPanel:t.toggleAddFilesPanel,file:t.files[d]}))));return t.singleFile?h("div",{class:"uppy-Dashboard-files"},s(n[0])):h(Wm,{class:"uppy-Dashboard-files",role:"list",data:n,renderRow:s,rowHeight:e})};let nu;nu=Symbol.for("uppy test: disable unused locale key warning");class ru extends Ve{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,i)=>h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:i}),this.renderHiddenCameraInput=(e,i,a)=>{const n={photo:"image/*",video:"video/*"}[e];return h("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:i,accept:n,ref:a})},this.renderMyDeviceAcquirer=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},h("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("g",{fill:"none",fillRule:"evenodd"},h("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),h("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},h("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},h("g",{fill:"none",fillRule:"evenodd"},h("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),h("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"}))),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},h("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},h("rect",{fill:"#1abc9c",width:"32",height:"32",rx:"16"}),h("path",{fill:"#FFF",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})),h("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,i)=>{const a=this.props.acquirers.length;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:i,"data-uppy-super-focusable":a===0},e)},this.renderDropPasteBrowseTagline=e=>{const i=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),a=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),r=this.props.fileManagerSelectionType,n=r.charAt(0).toUpperCase()+r.slice(1);return h("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${n}`,{browseFiles:i,browseFolders:a,browse:i}):this.props.i18nArray(`dropPaste${n}`,{browseFiles:i,browseFolders:a,browse:i}))},this.renderAcquirer=e=>h("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},e.icon(),h("div",{className:"uppy-DashboardTab-name"},e.name))),this.renderAcquirers=e=>{const i=[...e],a=i.splice(e.length-2,e.length);return h(kt,null,i.map(r=>this.renderAcquirer(r)),h("span",{role:"presentation",style:{"white-space":"nowrap"}},a.map(r=>this.renderAcquirer(r))))},this.renderSourcesList=(e,i)=>{const{showNativePhotoCameraButton:a,showNativeVideoCameraButton:r}=this.props;let n=[];const s="myDevice";i||(n.push({key:s,elements:this.renderMyDeviceAcquirer()}),a&&n.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),r&&n.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()})),n.push(...e.map(c=>({key:c.id,elements:this.renderAcquirer(c)}))),n.length===1&&n[0].key===s&&(n=[]);const d=[...n],u=d.splice(n.length-2,n.length),l=c=>c.map(p=>{let{key:m,elements:v}=p;return h(kt,{key:m},v)});return h(kt,null,this.renderDropPasteBrowseTagline(n.length),h("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},l(d),h("span",{role:"presentation",style:{"white-space":"nowrap"}},l(u))))}}[nu](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,i=h("span",null,h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},h("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),h("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),a=e("poweredBy",{uppy:i});return h("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},a)}render(){const{showNativePhotoCameraButton:e,showNativeVideoCameraButton:i,nativeCameraFacingMode:a}=this.props;return h("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,r=>{this.fileInput=r}),this.renderHiddenInput(!0,r=>{this.folderInput=r}),e&&this.renderHiddenCameraInput("photo",a,r=>{this.mobilePhotoFileInput=r}),i&&this.renderHiddenCameraInput("video",a,r=>{this.mobileVideoFileInput=r}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),h("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&h("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}const Ym=t=>h("div",{className:Ze("uppy-Dashboard-AddFilesPanel",t.className),"data-uppy-panelType":"AddFiles","aria-hidden":t.showAddFilesPanel},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18n("addingMoreFiles")),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>t.toggleAddFilesPanel(!1)},t.i18n("back"))),h(ru,t));function Ct(t){const{tagName:e}=t.target;if(e==="INPUT"||e==="TEXTAREA"){t.stopPropagation();return}t.preventDefault(),t.stopPropagation()}function Xm(t){let{activePickerPanel:e,className:i,hideAllPanels:a,i18n:r,state:n,uppy:s}=t;return h("div",{className:Ze("uppy-DashboardContent-panel",i),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:Ct,onDragLeave:Ct,onDrop:Ct,onPaste:Ct},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r("importFrom",{name:e.name})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:a},r("cancel"))),h("div",{className:"uppy-DashboardContent-panelBody"},s.getPlugin(e.id).render(n)))}function Km(t){const e=t.files[t.fileCardFor];return h("div",{className:Ze("uppy-DashboardContent-panel",t.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18nArray("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t.hideAllPanels},t.i18n("cancel")),h("button",{className:"uppy-DashboardContent-save",type:"button",onClick:t.saveFileEditor},t.i18n("save"))),h("div",{className:"uppy-DashboardContent-panelBody"},t.editors.map(i=>t.uppy.getPlugin(i.id).render(t.state))))}const tt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function Zm(t,e,i,a){if(a===void 0&&(a={}),t)return tt.STATE_ERROR;if(e)return tt.STATE_COMPLETE;if(i)return tt.STATE_PAUSED;let r=tt.STATE_WAITING;const n=Object.keys(a);for(let s=0;s<n.length;s++){const{progress:o}=a[n[s]];if(o.uploadStarted&&!o.uploadComplete)return tt.STATE_UPLOADING;o.preprocess&&r!==tt.STATE_UPLOADING&&(r=tt.STATE_PREPROCESSING),o.postprocess&&r!==tt.STATE_UPLOADING&&r!==tt.STATE_PREPROCESSING&&(r=tt.STATE_POSTPROCESSING)}return r}function Qm(t){let{files:e,i18n:i,isAllComplete:a,isAllErrored:r,isAllPaused:n,inProgressNotPausedFiles:s,newFiles:o,processingFiles:d}=t;switch(Zm(r,a,n,e)){case"uploading":return i("uploadingXFiles",{smart_count:s.length});case"preprocessing":case"postprocessing":return i("processingXFiles",{smart_count:d.length});case"paused":return i("uploadPaused");case"waiting":return i("xFilesSelected",{smart_count:o.length});case"complete":return i("uploadComplete")}}function Jm(t){const{i18n:e,isAllComplete:i,hideCancelButton:a,maxNumberOfFiles:r,toggleAddFilesPanel:n,uppy:s}=t;let{allowNewUpload:o}=t;return o&&r&&(o=t.totalFileCount<t.maxNumberOfFiles),h("div",{className:"uppy-DashboardContent-bar"},!i&&!a?h("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>s.cancelAll()},e("cancel")):h("div",null),h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h(Qm,t)),o?h("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>n(!0)},h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},h("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),h("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):h("div",null))}class eg extends Ve{constructor(e){super(e),this.form=document.createElement("form"),this.updateMeta=(n,s)=>{this.setState(o=>{let{formState:d}=o;return{formState:{...d,[s]:n}}})},this.handleSave=n=>{n.preventDefault();const s=this.props.fileCardFor;this.props.saveFileCard(this.state.formState,s)},this.handleCancel=()=>{const n=this.props.files[this.props.fileCardFor];this.props.uppy.emit("file-editor:cancel",n),this.props.toggleFileCard(!1)},this.saveOnEnter=n=>{if(n.keyCode===13){n.stopPropagation(),n.preventDefault();const s=this.props.files[this.props.fileCardFor];this.props.saveFileCard(this.state.formState,s.id)}},this.renderMetaFields=()=>{const n=this.getMetaFields()||[],s={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return n.map(o=>{const d=`uppy-Dashboard-FileCard-input-${o.id}`,u=this.props.requiredMetaFields.includes(o.id);return h("fieldset",{key:o.id,className:"uppy-Dashboard-FileCard-fieldset"},h("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:d},o.name),o.render!==void 0?o.render({value:this.state.formState[o.id],onChange:l=>this.updateMeta(l,o.id),fieldCSSClasses:s,required:u,form:this.form.id},h):h("input",{className:s.text,id:d,form:this.form.id,type:o.type||"text",required:u,value:this.state.formState[o.id],placeholder:o.placeholder,onKeyUp:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyDown:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyPress:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onInput:l=>this.updateMeta(l.target.value,o.id),"data-uppy-super-focusable":!0}))})};const i=this.props.files[this.props.fileCardFor],a=this.getMetaFields()||[],r={};a.forEach(n=>{r[n.id]=i.meta[n.id]||""}),this.state={formState:r},this.form.id=pr()}componentWillMount(){this.form.addEventListener("submit",this.handleSave),document.body.appendChild(this.form)}componentWillUnmount(){this.form.removeEventListener("submit",this.handleSave),document.body.removeChild(this.form)}getMetaFields(){return typeof this.props.metaFields=="function"?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields}render(){const e=this.props.files[this.props.fileCardFor],i=this.props.canEditFile(e);return h("div",{className:Ze("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:Ct,onDragLeave:Ct,onDrop:Ct,onPaste:Ct},h("div",{className:"uppy-DashboardContent-bar"},h("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:h("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),h("button",{className:"uppy-DashboardContent-back",type:"button",form:this.form.id,title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),h("div",{className:"uppy-Dashboard-FileCard-inner"},h("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:yr(e.type).color}},h(tu,{file:e}),i&&h("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:a=>{this.handleSave(a),this.props.openFileEditor(e)},form:this.form.id},this.props.i18n("editFile"))),h("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),h("div",{className:"uppy-Dashboard-FileCard-actions"},h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"form"in HTMLButtonElement.prototype?"submit":"button",onClick:"form"in HTMLButtonElement.prototype?void 0:this.handleSave,form:this.form.id},this.props.i18n("saveChanges")),h("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel,form:this.form.id},this.props.i18n("cancel")))))}}const Xt="uppy-transition-slideDownUp",ao=250;class Ca extends Ve{constructor(e){super(e),this.state={cachedChildren:null,className:""}}componentWillUpdate(e){const{cachedChildren:i}=this.state,a=bt(e.children)[0];if(i===a)return null;const r={cachedChildren:a};a&&!i&&(r.className=`${Xt}-enter`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${Xt}-enter ${Xt}-enter-active`}),this.enterTimeout=setTimeout(()=>{this.setState({className:""})},ao)})),i&&!a&&this.leaveTimeout===void 0&&(r.cachedChildren=i,r.className=`${Xt}-leave`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${Xt}-leave ${Xt}-leave-active`}),this.leaveTimeout=setTimeout(()=>{this.setState({cachedChildren:null,className:""})},ao)})),this.setState(r)}render(){const{cachedChildren:e,className:i}=this.state;return e?bl(e,{className:Ze(i,e.props.className)}):null}}function wt(){return wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},wt.apply(this,arguments)}const no=900,ro=700,xn=576,tg=400;function ig(t){const e=t.totalFileCount===0,i=t.totalFileCount===1,a=t.containerWidth>xn,r=Ze({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":t.disabled,"uppy-Dashboard--animateOpenClose":t.animateOpenClose,"uppy-Dashboard--isClosing":t.isClosing,"uppy-Dashboard--isDraggingOver":t.isDraggingOver,"uppy-Dashboard--modal":!t.inline,"uppy-size--md":t.containerWidth>xn,"uppy-size--lg":t.containerWidth>ro,"uppy-size--xl":t.containerWidth>no,"uppy-size--height-md":t.containerHeight>tg,"uppy-Dashboard--isAddFilesPanelVisible":t.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":t.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i});let n=1;t.containerWidth>no?n=5:t.containerWidth>ro?n=4:t.containerWidth>xn&&(n=3);const s=t.showSelectedFiles&&!e,o=t.recoveredState?Object.keys(t.recoveredState.files).length:null,d=t.files?Object.keys(t.files).filter(c=>t.files[c].isGhost).length:null,u=()=>d>0?t.i18n("recoveredXFiles",{smart_count:d}):t.i18n("recoveredAllFiles");return h("div",{className:r,"data-uppy-theme":t.theme,"data-uppy-num-acquirers":t.acquirers.length,"data-uppy-drag-drop-supported":!t.disableLocalFiles&&eu(),"aria-hidden":t.inline?"false":t.isHidden,"aria-disabled":t.disabled,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onPaste:t.handlePaste,onDragOver:t.handleDragOver,onDragLeave:t.handleDragLeave,onDrop:t.handleDrop},h("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:t.handleClickOutside}),h("div",{className:"uppy-Dashboard-inner","aria-modal":!t.inline&&"true",role:!t.inline&&"dialog",style:{width:t.inline&&t.width?t.width:"",height:t.inline&&t.height?t.height:""}},t.inline?null:h("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onClick:t.closeModal},h("span",{"aria-hidden":"true"},"\xD7")),h("div",{className:"uppy-Dashboard-innerWrap"},h("div",{className:"uppy-Dashboard-dropFilesHereHint"},t.i18n("dropHint")),s&&h(Jm,t),o&&h("div",{className:"uppy-Dashboard-serviceMsg"},h("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},h("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},h("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),h("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),h("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),h("strong",{className:"uppy-Dashboard-serviceMsg-title"},t.i18n("sessionRestored")),h("div",{className:"uppy-Dashboard-serviceMsg-text"},u())),s?h(Gm,wt({},t,{singleFile:i,itemsPerRow:n})):h(ru,wt({},t,{isSizeMD:a})),h(Ca,null,t.showAddFilesPanel?h(Ym,wt({key:"AddFiles"},t,{isSizeMD:a})):null),h(Ca,null,t.fileCardFor?h(eg,wt({key:"FileCard"},t)):null),h(Ca,null,t.activePickerPanel?h(Xm,wt({key:"Picker"},t)):null),h(Ca,null,t.showFileEditor?h(Km,wt({key:"Editor"},t)):null),h("div",{className:"uppy-Dashboard-progressindicators"},t.progressindicators.map(c=>t.uppy.getPlugin(c.id).render(t.state))))))}var ag={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function Ee(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ng=0;function _t(t){return"__private_"+ng+++"_"+t}const rg={version:"3.2.2"},In=Qs.default||Qs,so=9,sg=27;function oo(){const t={};return t.promise=new Promise((e,i)=>{t.resolve=e,t.reject=i}),t}function og(){return h("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},h("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Ot=_t("disabledNodes"),ut=_t("generateLargeThumbnailIfSingleFile"),Pi=_t("openFileEditorWhenFilesAdded"),xt=_t("attachRenderFunctionToTarget"),An=_t("isTargetSupported"),Mn=_t("getAcquirers"),Bn=_t("getProgressIndicators"),dt=_t("getEditors");class su extends mt{constructor(e,i){var a;super(e,i),a=this,Object.defineProperty(this,Ot,{writable:!0,value:null}),this.removeTarget=n=>{const o=this.getPluginState().targets.filter(d=>d.id!==n.id);this.setPluginState({targets:o})},this.addTarget=n=>{const s=n.id||n.constructor.name,o=n.title||s,d=n.type;if(d!=="acquirer"&&d!=="progressindicator"&&d!=="editor"){const p="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";this.uppy.log(p,"error");return}const u={id:s,name:o,type:d},c=this.getPluginState().targets.slice();return c.push(u),this.setPluginState({targets:c}),this.el},this.hideAllPanels=()=>{const n=this.getPluginState(),s={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};n.activePickerPanel===s.activePickerPanel&&n.showAddFilesPanel===s.showAddFilesPanel&&n.showFileEditor===s.showFileEditor&&n.activeOverlayType===s.activeOverlayType||this.setPluginState(s)},this.showPanel=n=>{const{targets:s}=this.getPluginState(),o=s.filter(d=>d.type==="acquirer"&&d.id===n)[0];this.setPluginState({activePickerPanel:o,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",n)},this.canEditFile=n=>{const{targets:s}=this.getPluginState();return Ee(this,dt)[dt](s).some(d=>this.uppy.getPlugin(d.id).canEditFile(n))},this.openFileEditor=n=>{const{targets:s}=this.getPluginState(),o=Ee(this,dt)[dt](s);this.setPluginState({showFileEditor:!0,fileCardFor:n.id||null,activeOverlayType:"FileEditor"}),o.forEach(d=>{this.uppy.getPlugin(d.id).selectFile(n)})},this.saveFileEditor=()=>{const{targets:n}=this.getPluginState();Ee(this,dt)[dt](n).forEach(o=>{this.uppy.getPlugin(o.id).save()}),this.hideAllPanels()},this.openModal=()=>{const{promise:n,resolve:s}=oo();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const o=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",o,!1),s()};this.el.addEventListener("animationend",o,!1)}else this.setPluginState({isHidden:!1}),s();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),n},this.closeModal=function(n){n===void 0&&(n={});const{manualClose:s=!0}=n,{isHidden:o,isClosing:d}=a.getPluginState();if(o||d)return;const{promise:u,resolve:l}=oo();if(a.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),a.opts.animateOpenClose){a.setPluginState({isClosing:!0});const p=()=>{a.setPluginState({isHidden:!0,isClosing:!1}),a.superFocus.cancel(),a.savedActiveElement.focus(),a.el.removeEventListener("animationend",p,!1),l()};a.el.addEventListener("animationend",p,!1)}else a.setPluginState({isHidden:!0}),a.superFocus.cancel(),a.savedActiveElement.focus(),l();if(document.removeEventListener("keydown",a.handleKeyDownInModal),s&&a.opts.browserBackButtonClose){var c;(c=history.state)!=null&&c[a.modalName]&&history.back()}return a.uppy.emit("dashboard:modal-closed"),u},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=n=>{const{capabilities:s}=this.uppy.getState();this.uppy.setState({capabilities:{...s,darkMode:n}})},this.handleSystemDarkModeChange=n=>{const s=n.matches;this.uppy.log(`[Dashboard] Dark mode is ${s?"on":"off"}`),this.setDarkModeCapability(s)},this.toggleFileCard=(n,s)=>{const o=this.uppy.getFile(s);n?this.uppy.emit("dashboard:file-edit-start",o):this.uppy.emit("dashboard:file-edit-complete",o),this.setPluginState({fileCardFor:n?s:null,activeOverlayType:n?"FileCard":null})},this.toggleAddFilesPanel=n=>{this.setPluginState({showAddFilesPanel:n,activeOverlayType:n?"AddFiles":null})},this.addFiles=n=>{const s=n.map(o=>({source:this.id,name:o.name,type:o.type,data:o,meta:{relativePath:o.relativePath||o.webkitRelativePath||null}}));try{this.uppy.addFiles(s)}catch(o){this.uppy.log(o)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(n=>{const s=n[0],{width:o,height:d}=s.contentRect;this.setPluginState({containerWidth:o,containerHeight:d,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const n=this.getPluginState(),s=!this.opts.inline&&n.isHidden;!n.areInsidesReadyToBeVisible&&!s&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=n=>{this.el.contains(n.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=n=>{var s;const o=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],d=(s=Ee(this,Ot)[Ot])!=null?s:li(this.el.querySelectorAll(o)).filter(u=>!u.classList.contains("uppy-Dashboard-close"));for(const u of d)u.tagName==="A"?u.setAttribute("aria-disabled",n):u.disabled=n;n?Ee(this,Ot)[Ot]=d:Ee(this,Ot)[Ot]=null,this.dashboardIsDisabled=n},this.updateBrowserHistory=()=>{var n;(n=history.state)!=null&&n[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=n=>{var s;this.isModalOpen()&&(!n.state||!n.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(s=n.state)!=null&&s[this.modalName]&&history.back()},this.handleKeyDownInModal=n=>{n.keyCode===sg&&this.requestCloseModal(n),n.keyCode===so&&Jl(n,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=n=>{this.uppy.iteratePlugins(o=>{o.type==="acquirer"&&(o.handleRootPaste==null||o.handleRootPaste(n))});const s=li(n.clipboardData.files);s.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(s))},this.handleInputChange=n=>{n.preventDefault();const s=li(n.target.files);s.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(s))},this.handleDragOver=n=>{var s,o;n.preventDefault(),n.stopPropagation();const d=()=>{let p=!0;return this.uppy.iteratePlugins(m=>{m.canHandleRootDrop!=null&&m.canHandleRootDrop(n)&&(p=!0)}),p},u=()=>{const{types:p}=n.dataTransfer;return p.some(m=>m==="Files")},l=d(),c=u();if(!l&&!c||this.opts.disabled||this.opts.disableLocalFiles&&(c||!l)||!this.uppy.getState().allowNewUpload){n.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}n.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(s=(o=this.opts).onDragOver)==null||s.call(o,n)},this.handleDragLeave=n=>{var s,o;n.preventDefault(),n.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(s=(o=this.opts).onDragLeave)==null||s.call(o,n)},this.handleDrop=async n=>{var s,o;n.preventDefault(),n.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(c=>{c.type==="acquirer"&&(c.handleRootDrop==null||c.handleRootDrop(n))});let d=!1;const u=c=>{this.uppy.log(c,"error"),d||(this.uppy.info(c.message,"error"),d=!0)},l=await Kl(n.dataTransfer,{logDropError:u});l.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(l)),(s=(o=this.opts).onDrop)==null||s.call(o,n)},this.handleRequestThumbnail=n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",n)},this.handleCancelThumbnail=n=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",n)},this.handleKeyDownInInline=n=>{n.keyCode===so&&Zf(n,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=n=>{this.el.contains(document.activeElement)&&this.handlePaste(n)},this.handleComplete=n=>{let{failed:s}=n;this.opts.closeAfterFinish&&s.length===0&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,ut,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;const n=600,s=this.uppy.getFiles();if(s.length===1){const o=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);o==null||o.setOptions({thumbnailWidth:n});const d={...s[0],preview:void 0};o.requestThumbnail(d).then(()=>{o==null||o.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,Pi,{writable:!0,value:n=>{const s=n[0];this.canEditFile(s)&&this.openFileEditor(s)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const n=Ks(this.opts.trigger);n?n.forEach(s=>s.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("file-editor:complete",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Ee(this,ut)[ut]),this.uppy.on("file-removed",Ee(this,ut)[ut]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.on("files-added",Ee(this,Pi)[Pi])},this.removeEvents=()=>{const n=Ks(this.opts.trigger);!this.opts.inline&&n&&n.forEach(s=>s.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("file-editor:complete",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Ee(this,ut)[ut]),this.uppy.off("file-removed",Ee(this,ut)[ut]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.off("files-added",Ee(this,Pi)[Pi])},this.superFocusOnEachUpdate=()=>{const n=this.el.contains(document.activeElement),s=document.activeElement===document.body||document.activeElement===null,o=this.uppy.getState().info.length===0,d=!this.opts.inline;o&&(d||n||s&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(n,s)=>{this.uppy.setFileMeta(s,n),this.toggleFileCard(!1,s)},Object.defineProperty(this,xt,{writable:!0,value:n=>{const s=this.uppy.getPlugin(n.id);return{...n,icon:s.icon||this.opts.defaultPickerIcon,render:s.render}}}),Object.defineProperty(this,An,{writable:!0,value:n=>{const s=this.uppy.getPlugin(n.id);return typeof s.isSupported!="function"?!0:s.isSupported()}}),Object.defineProperty(this,Mn,{writable:!0,value:In(n=>n.filter(s=>s.type==="acquirer"&&Ee(this,An)[An](s)).map(Ee(this,xt)[xt]))}),Object.defineProperty(this,Bn,{writable:!0,value:In(n=>n.filter(s=>s.type==="progressindicator").map(Ee(this,xt)[xt]))}),Object.defineProperty(this,dt,{writable:!0,value:In(n=>n.filter(s=>s.type==="editor").map(Ee(this,xt)[xt]))}),this.render=n=>{const s=this.getPluginState(),{files:o,capabilities:d,allowNewUpload:u}=n,{newFiles:l,uploadStartedFiles:c,completeFiles:p,erroredFiles:m,inProgressFiles:v,inProgressNotPausedFiles:f,processingFiles:b,isUploadStarted:C,isAllComplete:k,isAllErrored:F,isAllPaused:_}=this.uppy.getObjectOfFilesPerState(),N=Ee(this,Mn)[Mn](s.targets),y=Ee(this,Bn)[Bn](s.targets),D=Ee(this,dt)[dt](s.targets);let x;return this.opts.theme==="auto"?x=d.darkMode?"dark":"light":x=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),ig({state:n,isHidden:s.isHidden,files:o,newFiles:l,uploadStartedFiles:c,completeFiles:p,erroredFiles:m,inProgressFiles:v,inProgressNotPausedFiles:f,processingFiles:b,isUploadStarted:C,isAllComplete:k,isAllErrored:F,isAllPaused:_,totalFileCount:Object.keys(o).length,totalProgress:n.totalProgress,allowNewUpload:u,acquirers:N,theme:x,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:s.activePickerPanel,showFileEditor:s.showFileEditor,saveFileEditor:this.saveFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:s.isClosing,progressindicators:y,editors:D,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:n.recoveredState,metaFields:s.metaFields,resumableUploads:d.resumableUploads||!1,individualCancellation:d.individualCancellation,isMobileDevice:d.isMobileDevice,fileCardFor:s.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:s.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:s.containerWidth,containerHeight:s.containerHeight,areInsidesReadyToBeVisible:s.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:s.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},this.discoverProviderPlugins=()=>{this.uppy.iteratePlugins(n=>{n&&!n.target&&n.opts&&n.opts.target===this.constructor&&this.addTarget(n)})},this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:n,closeAfterFinish:s}=this.opts;if(n&&s)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:o,allowMultipleUploadBatches:d}=this.uppy.opts;(o||d)&&s&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:u}=this.opts;u&&this.mount(u,this),(this.opts.plugins||[]).forEach(p=>{const m=this.uppy.getPlugin(p);m&&m.mount(this,m)}),this.opts.disableStatusBar||this.uppy.use(Bl,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(Rl,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(ql,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window!="undefined"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const c=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${c?"on":"off"}`),this.setDarkModeCapability(c),this.opts.theme==="auto"&&this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange),this.discoverProviderPlugins(),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const s=this.uppy.getPlugin(`${this.id}:Informer`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableStatusBar){const s=this.uppy.getPlugin(`${this.id}:StatusBar`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableThumbnailGenerator){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s&&this.uppy.removePlugin(s)}(this.opts.plugins||[]).forEach(s=>{const o=this.uppy.getPlugin(s);o&&o.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.modalName=`uppy-Dashboard-${pr()}`,this.defaultLocale=ag;const r={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:og,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:()=>{this.uppy.cancelAll(),this.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:()=>this.closeModal(),showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};this.opts={...r,...i},this.i18nInit(),this.superFocus=gm(),this.ifFocusedOnUppyRecently=!1,this.makeDashboardInsidesVisibleAnywayTimeout=null,this.removeDragOverClassTimeout=null}}su.VERSION=rg.version;function lg(t,e){if(t===e)return!0;if(!t||!e)return!1;var i=Object.keys(t),a=Object.keys(e),r=i.length;if(a.length!==r)return!1;for(var n=0;n<r;n++){var s=i[n];if(t[s]!==e[s]||!Object.prototype.hasOwnProperty.call(e,s))return!1}return!0}const ug=function(){return arguments.length>0&&typeof(arguments.length<=0?void 0:arguments[0])=="function"};var dg={data(){return{plugin:{}}},props:{uppy:{required:!0},props:{type:Object},plugins:{type:Array}},mounted(){this.installPlugin()},methods:{installPlugin(){const{uppy:t}=this,e={id:"vue:Dashboard",inline:!0,plugins:this.plugins,...this.props,target:this.$refs.container};t.use(su,e),this.plugin=t.getPlugin(e.id)},uninstallPlugin(t){t.removePlugin(this.plugin)}},beforeDestroy(){this.uninstallPlugin(this.uppy)},beforeUnmount(){this.uninstallPlugin(this.uppy)},watch:{uppy(t,e){e!==t&&(this.uninstallPlugin(e),this.installPlugin())},props(t,e){lg(t,e)||this.plugin.setOptions({...t})}},render(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(ug(...e)){const[a]=e;return a("div",{ref:"container"})}return ne("div",{ref:"container"})}},cg={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}};const hg={version:"3.0.1"};class br extends mt{constructor(e,i){super(e,i),this.handleDrop=async r=>{var n,s;r.preventDefault(),r.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1});const o=u=>{this.uppy.log(u,"error")},d=await Kl(r.dataTransfer,{logDropError:o});d.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(d)),(n=(s=this.opts).onDrop)==null||n.call(s,r)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=cg;const a={target:null,inputName:"files[]",width:"100%",height:"100%",note:null};this.opts={...a,...i},this.i18nInit(),this.isDragDropSupported=eu(),this.removeDragOverClassTimeout=null,this.onInputChange=this.onInputChange.bind(this),this.handleDragOver=this.handleDragOver.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this),this.handleDrop=this.handleDrop.bind(this),this.addFiles=this.addFiles.bind(this),this.render=this.render.bind(this)}addFiles(e){const i=e.map(a=>({source:this.id,name:a.name,type:a.type,data:a,meta:{relativePath:a.relativePath||null}}));try{this.uppy.addFiles(i)}catch(a){this.uppy.log(a)}}onInputChange(e){const i=li(e.target.files);i.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(i)),e.target.value=null}handleDragOver(e){var i,a;e.preventDefault(),e.stopPropagation();const{types:r}=e.dataTransfer,n=r.some(o=>o==="Files"),{allowNewUpload:s}=this.uppy.getState();if(!n||!s){e.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(i=(a=this.opts).onDragOver)==null||i.call(a,e)}handleDragLeave(e){var i,a;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(i=(a=this.opts).onDragLeave)==null||i.call(a,e)}renderHiddenFileInput(){const{restrictions:e}=this.uppy.opts;return h("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:i=>{this.fileInputRef=i},name:this.opts.inputName,multiple:e.maxNumberOfFiles!==1,accept:e.allowedFileTypes,onChange:this.onInputChange})}static renderArrowSvg(){return h("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},h("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return h("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:h("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return h("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){const e=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,i={width:this.opts.width,height:this.opts.height};return h("button",{type:"button",className:e,style:i,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),h("div",{className:"uppy-DragDrop-inner"},br.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){const{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}}br.VERSION=hg.version;const pg={version:"3.0.1"};class fg extends mt{constructor(e,i){super(e,i),this.id=this.opts.id||"ProgressBar",this.title="Progress Bar",this.type="progressindicator";const a={target:"body",fixed:!1,hideAfterFinish:!0};this.opts={...a,...i},this.render=this.render.bind(this)}render(e){const i=e.totalProgress||0,a=(i===0||i===100)&&this.opts.hideAfterFinish;return h("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":a},h("div",{className:"uppy-ProgressBar-inner",style:{width:`${i}%`}}),h("div",{className:"uppy-ProgressBar-percentage"},i))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}fg.VERSION=pg.version;/*!
 * Cropper.js v1.5.7
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2020-05-23T05:23:00.081Z
 */function Oa(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oa=function(e){return typeof e}:Oa=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(t)}function mg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lo(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function gg(t,e,i){return e&&lo(t.prototype,e),i&&lo(t,i),t}function vg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function uo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,a)}return i}function ou(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?uo(Object(i),!0).forEach(function(a){vg(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):uo(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function lu(t){return yg(t)||bg(t)||wg(t)||Sg()}function yg(t){if(Array.isArray(t))return Zn(t)}function bg(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function wg(t,e){if(!!t){if(typeof t=="string")return Zn(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Zn(t,e)}}function Zn(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function Sg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ga=typeof window!="undefined"&&typeof window.document!="undefined",at=Ga?window:{},wr=Ga&&at.document.documentElement?"ontouchstart"in at.document.documentElement:!1,Sr=Ga?"PointerEvent"in at:!1,ue="cropper",Cr="all",uu="crop",du="move",cu="zoom",It="e",At="w",Kt="s",yt="n",Oi="ne",xi="nw",Ii="se",Ai="sw",Qn="".concat(ue,"-crop"),co="".concat(ue,"-disabled"),Be="".concat(ue,"-hidden"),ho="".concat(ue,"-hide"),Cg="".concat(ue,"-invisible"),Ua="".concat(ue,"-modal"),Jn="".concat(ue,"-move"),Xi="".concat(ue,"Action"),Ea="".concat(ue,"Preview"),Er="crop",hu="move",pu="none",er="crop",tr="cropend",ir="cropmove",ar="cropstart",po="dblclick",Eg=wr?"touchstart":"mousedown",Tg=wr?"touchmove":"mousemove",kg=wr?"touchend touchcancel":"mouseup",fo=Sr?"pointerdown":Eg,mo=Sr?"pointermove":Tg,go=Sr?"pointerup pointercancel":kg,vo="ready",yo="resize",bo="wheel",nr="zoom",wo="image/jpeg",_g=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Dg=/^data:/,Fg=/^data:image\/jpeg;base64,/,Pg=/^img|canvas$/i,So={viewMode:0,dragMode:Er,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Og='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',xg=Number.isNaN||at.isNaN;function G(t){return typeof t=="number"&&!xg(t)}var Co=function(e){return e>0&&e<1/0};function Nn(t){return typeof t=="undefined"}function zt(t){return Oa(t)==="object"&&t!==null}var Ig=Object.prototype.hasOwnProperty;function ni(t){if(!zt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&Ig.call(i,"isPrototypeOf")}catch{return!1}}function Ae(t){return typeof t=="function"}var Ag=Array.prototype.slice;function fu(t){return Array.from?Array.from(t):Ag.call(t)}function Ce(t,e){return t&&Ae(e)&&(Array.isArray(t)||G(t.length)?fu(t).forEach(function(i,a){e.call(t,i,a,t)}):zt(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var de=Object.assign||function(e){for(var i=arguments.length,a=new Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];return zt(e)&&a.length>0&&a.forEach(function(n){zt(n)&&Object.keys(n).forEach(function(s){e[s]=n[s]})}),e},Mg=/\.\d*(?:0|9){12}\d*$/;function ui(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Mg.test(t)?Math.round(t*e)/e:t}var Bg=/^width|height|left|top|marginLeft|marginTop$/;function Et(t,e){var i=t.style;Ce(e,function(a,r){Bg.test(r)&&G(a)&&(a="".concat(a,"px")),i[r]=a})}function Ng(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Fe(t,e){if(!!e){if(G(t.length)){Ce(t,function(a){Fe(a,e)});return}if(t.classList){t.classList.add(e);return}var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function it(t,e){if(!!e){if(G(t.length)){Ce(t,function(i){it(i,e)});return}if(t.classList){t.classList.remove(e);return}t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,""))}}function ri(t,e,i){if(!!e){if(G(t.length)){Ce(t,function(a){ri(a,e,i)});return}i?Fe(t,e):it(t,e)}}var Rg=/([a-z\d])([A-Z])/g;function Tr(t){return t.replace(Rg,"$1-$2").toLowerCase()}function rr(t,e){return zt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Tr(e)))}function Ki(t,e,i){zt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Tr(e)),i)}function $g(t,e){if(zt(t[e]))try{delete t[e]}catch{t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch{t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Tr(e)))}var mu=/\s\s*/,gu=function(){var t=!1;if(Ga){var e=!1,i=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(n){e=n}});at.addEventListener("test",i,a),at.removeEventListener("test",i,a)}return t}();function qe(t,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(mu).forEach(function(n){if(!gu){var s=t.listeners;s&&s[n]&&s[n][i]&&(r=s[n][i],delete s[n][i],Object.keys(s[n]).length===0&&delete s[n],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(n,r,a)})}function Ue(t,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=i;e.trim().split(mu).forEach(function(n){if(a.once&&!gu){var s=t.listeners,o=s===void 0?{}:s;r=function(){delete o[n][i],t.removeEventListener(n,r,a);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];i.apply(t,l)},o[n]||(o[n]={}),o[n][i]&&t.removeEventListener(n,o[n][i],a),o[n][i]=r,t.listeners=o}t.addEventListener(n,r,a)})}function di(t,e,i){var a;return Ae(Event)&&Ae(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(a)}function vu(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Rn=at.location,Ug=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Eo(t){var e=t.match(Ug);return e!==null&&(e[1]!==Rn.protocol||e[2]!==Rn.hostname||e[3]!==Rn.port)}function To(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Vi(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,r=t.translateX,n=t.translateY,s=[];G(r)&&r!==0&&s.push("translateX(".concat(r,"px)")),G(n)&&n!==0&&s.push("translateY(".concat(n,"px)")),G(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),G(i)&&i!==1&&s.push("scaleX(".concat(i,")")),G(a)&&a!==1&&s.push("scaleY(".concat(a,")"));var o=s.length?s.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Lg(t){var e=ou({},t),i=[];return Ce(t,function(a,r){delete e[r],Ce(e,function(n){var s=Math.abs(a.startX-n.startX),o=Math.abs(a.startY-n.startY),d=Math.abs(a.endX-n.endX),u=Math.abs(a.endY-n.endY),l=Math.sqrt(s*s+o*o),c=Math.sqrt(d*d+u*u),p=(c-l)/l;i.push(p)})}),i.sort(function(a,r){return Math.abs(a)<Math.abs(r)}),i[0]}function Ta(t,e){var i=t.pageX,a=t.pageY,r={endX:i,endY:a};return e?r:ou({startX:i,startY:a},r)}function zg(t){var e=0,i=0,a=0;return Ce(t,function(r){var n=r.startX,s=r.startY;e+=n,i+=s,a+=1}),e/=a,i/=a,{pageX:e,pageY:i}}function Tt(t){var e=t.aspectRatio,i=t.height,a=t.width,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",n=Co(a),s=Co(i);if(n&&s){var o=i*e;r==="contain"&&o>a||r==="cover"&&o<a?i=a/e:a=i*e}else n?i=a/e:s&&(a=i*e);return{width:a,height:i}}function jg(t){var e=t.width,i=t.height,a=t.degree;if(a=Math.abs(a)%180,a===90)return{width:i,height:e};var r=a%90*Math.PI/180,n=Math.sin(r),s=Math.cos(r),o=e*s+i*n,d=e*n+i*s;return a>90?{width:d,height:o}:{width:o,height:d}}function Vg(t,e,i,a){var r=e.aspectRatio,n=e.naturalWidth,s=e.naturalHeight,o=e.rotate,d=o===void 0?0:o,u=e.scaleX,l=u===void 0?1:u,c=e.scaleY,p=c===void 0?1:c,m=i.aspectRatio,v=i.naturalWidth,f=i.naturalHeight,b=a.fillColor,C=b===void 0?"transparent":b,k=a.imageSmoothingEnabled,F=k===void 0?!0:k,_=a.imageSmoothingQuality,N=_===void 0?"low":_,y=a.maxWidth,D=y===void 0?1/0:y,x=a.maxHeight,$=x===void 0?1/0:x,z=a.minWidth,X=z===void 0?0:z,W=a.minHeight,V=W===void 0?0:W,ae=document.createElement("canvas"),K=ae.getContext("2d"),ee=Tt({aspectRatio:m,width:D,height:$}),A=Tt({aspectRatio:m,width:X,height:V},"cover"),q=Math.min(ee.width,Math.max(A.width,v)),Z=Math.min(ee.height,Math.max(A.height,f)),ce=Tt({aspectRatio:r,width:D,height:$}),fe=Tt({aspectRatio:r,width:X,height:V},"cover"),me=Math.min(ce.width,Math.max(fe.width,n)),H=Math.min(ce.height,Math.max(fe.height,s)),ke=[-me/2,-H/2,me,H];return ae.width=ui(q),ae.height=ui(Z),K.fillStyle=C,K.fillRect(0,0,q,Z),K.save(),K.translate(q/2,Z/2),K.rotate(d*Math.PI/180),K.scale(l,p),K.imageSmoothingEnabled=F,K.imageSmoothingQuality=N,K.drawImage.apply(K,[t].concat(lu(ke.map(function(_e){return Math.floor(ui(_e))})))),K.restore(),ae}var yu=String.fromCharCode;function Hg(t,e,i){var a="";i+=e;for(var r=e;r<i;r+=1)a+=yu(t.getUint8(r));return a}var Wg=/^data:.*,/;function qg(t){var e=t.replace(Wg,""),i=atob(e),a=new ArrayBuffer(i.length),r=new Uint8Array(a);return Ce(r,function(n,s){r[s]=i.charCodeAt(s)}),a}function Gg(t,e){for(var i=[],a=8192,r=new Uint8Array(t);r.length>0;)i.push(yu.apply(null,fu(r.subarray(0,a)))),r=r.subarray(a);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function Yg(t){var e=new DataView(t),i;try{var a,r,n;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,o=2;o+1<s;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){r=o;break}o+=1}if(r){var d=r+4,u=r+10;if(Hg(e,d,4)==="Exif"){var l=e.getUint16(u);if(a=l===18761,(a||l===19789)&&e.getUint16(u+2,a)===42){var c=e.getUint32(u+4,a);c>=8&&(n=u+c)}}}if(n){var p=e.getUint16(n,a),m,v;for(v=0;v<p;v+=1)if(m=n+v*12+2,e.getUint16(m,a)===274){m+=8,i=e.getUint16(m,a),e.setUint16(m,1,a);break}}}catch{i=1}return i}function Xg(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:i,scaleY:a}}var Kg={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,i=this.options,a=this.container,r=this.cropper;Fe(r,Be),it(e,Be);var n={width:Math.max(a.offsetWidth,Number(i.minContainerWidth)||200),height:Math.max(a.offsetHeight,Number(i.minContainerHeight)||100)};this.containerData=n,Et(r,{width:n.width,height:n.height}),Fe(e,Be),it(r,Be)},initCanvas:function(){var e=this.containerData,i=this.imageData,a=this.options.viewMode,r=Math.abs(i.rotate)%180===90,n=r?i.naturalHeight:i.naturalWidth,s=r?i.naturalWidth:i.naturalHeight,o=n/s,d=e.width,u=e.height;e.height*o>e.width?a===3?d=e.height*o:u=e.width/o:a===3?u=e.width/o:d=e.height*o;var l={aspectRatio:o,naturalWidth:n,naturalHeight:s,width:d,height:u};l.left=(e.width-d)/2,l.top=(e.height-u)/2,l.oldLeft=l.left,l.oldTop=l.top,this.canvasData=l,this.limited=a===1||a===2,this.limitCanvas(!0,!0),this.initialImageData=de({},i),this.initialCanvasData=de({},l)},limitCanvas:function(e,i){var a=this.options,r=this.containerData,n=this.canvasData,s=this.cropBoxData,o=a.viewMode,d=n.aspectRatio,u=this.cropped&&s;if(e){var l=Number(a.minCanvasWidth)||0,c=Number(a.minCanvasHeight)||0;o>1?(l=Math.max(l,r.width),c=Math.max(c,r.height),o===3&&(c*d>l?l=c*d:c=l/d)):o>0&&(l?l=Math.max(l,u?s.width:0):c?c=Math.max(c,u?s.height:0):u&&(l=s.width,c=s.height,c*d>l?l=c*d:c=l/d));var p=Tt({aspectRatio:d,width:l,height:c});l=p.width,c=p.height,n.minWidth=l,n.minHeight=c,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(o>(u?0:1)){var m=r.width-n.width,v=r.height-n.height;n.minLeft=Math.min(0,m),n.minTop=Math.min(0,v),n.maxLeft=Math.max(0,m),n.maxTop=Math.max(0,v),u&&this.limited&&(n.minLeft=Math.min(s.left,s.left+(s.width-n.width)),n.minTop=Math.min(s.top,s.top+(s.height-n.height)),n.maxLeft=s.left,n.maxTop=s.top,o===2&&(n.width>=r.width&&(n.minLeft=Math.min(0,m),n.maxLeft=Math.max(0,m)),n.height>=r.height&&(n.minTop=Math.min(0,v),n.maxTop=Math.max(0,v))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=r.width,n.maxTop=r.height},renderCanvas:function(e,i){var a=this.canvasData,r=this.imageData;if(i){var n=jg({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),s=n.width,o=n.height,d=a.width*(s/a.naturalWidth),u=a.height*(o/a.naturalHeight);a.left-=(d-a.width)/2,a.top-=(u-a.height)/2,a.width=d,a.height=u,a.aspectRatio=s/o,a.naturalWidth=s,a.naturalHeight=o,this.limitCanvas(!0,!1)}(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCanvas(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,Et(this.canvas,de({width:a.width,height:a.height},Vi({translateX:a.left,translateY:a.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var i=this.canvasData,a=this.imageData,r=a.naturalWidth*(i.width/i.naturalWidth),n=a.naturalHeight*(i.height/i.naturalHeight);de(a,{width:r,height:n,left:(i.width-r)/2,top:(i.height-n)/2}),Et(this.image,de({width:a.width,height:a.height},Vi(de({translateX:a.left,translateY:a.top},a)))),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvasData,a=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,n={width:i.width,height:i.height};a&&(i.height*a>i.width?n.height=n.width/a:n.width=n.height*a),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*r),n.height=Math.max(n.minHeight,n.height*r),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=de({},n)},limitCropBox:function(e,i){var a=this.options,r=this.containerData,n=this.canvasData,s=this.cropBoxData,o=this.limited,d=a.aspectRatio;if(e){var u=Number(a.minCropBoxWidth)||0,l=Number(a.minCropBoxHeight)||0,c=o?Math.min(r.width,n.width,n.width+n.left,r.width-n.left):r.width,p=o?Math.min(r.height,n.height,n.height+n.top,r.height-n.top):r.height;u=Math.min(u,r.width),l=Math.min(l,r.height),d&&(u&&l?l*d>u?l=u/d:u=l*d:u?l=u/d:l&&(u=l*d),p*d>c?p=c/d:c=p*d),s.minWidth=Math.min(u,c),s.minHeight=Math.min(l,p),s.maxWidth=c,s.maxHeight=p}i&&(o?(s.minLeft=Math.max(0,n.left),s.minTop=Math.max(0,n.top),s.maxLeft=Math.min(r.width,n.left+n.width)-s.width,s.maxTop=Math.min(r.height,n.top+n.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=r.width-s.width,s.maxTop=r.height-s.height))},renderCropBox:function(){var e=this.options,i=this.containerData,a=this.cropBoxData;(a.width>a.maxWidth||a.width<a.minWidth)&&(a.left=a.oldLeft),(a.height>a.maxHeight||a.height<a.minHeight)&&(a.top=a.oldTop),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),this.limitCropBox(!1,!0),a.left=Math.min(Math.max(a.left,a.minLeft),a.maxLeft),a.top=Math.min(Math.max(a.top,a.minTop),a.maxTop),a.oldLeft=a.left,a.oldTop=a.top,e.movable&&e.cropBoxMovable&&Ki(this.face,Xi,a.width>=i.width&&a.height>=i.height?du:Cr),Et(this.cropBox,de({width:a.width,height:a.height},Vi({translateX:a.left,translateY:a.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),di(this.element,er,this.getData())}},Zg={initPreview:function(){var e=this.element,i=this.crossOrigin,a=this.options.preview,r=i?this.crossOriginUrl:this.url,n=e.alt||"The image to preview",s=document.createElement("img");if(i&&(s.crossOrigin=i),s.src=r,s.alt=n,this.viewBox.appendChild(s),this.viewBoxImage=s,!!a){var o=a;typeof a=="string"?o=e.ownerDocument.querySelectorAll(a):a.querySelector&&(o=[a]),this.previews=o,Ce(o,function(d){var u=document.createElement("img");Ki(d,Ea,{width:d.offsetWidth,height:d.offsetHeight,html:d.innerHTML}),i&&(u.crossOrigin=i),u.src=r,u.alt=n,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',d.innerHTML="",d.appendChild(u)})}},resetPreview:function(){Ce(this.previews,function(e){var i=rr(e,Ea);Et(e,{width:i.width,height:i.height}),e.innerHTML=i.html,$g(e,Ea)})},preview:function(){var e=this.imageData,i=this.canvasData,a=this.cropBoxData,r=a.width,n=a.height,s=e.width,o=e.height,d=a.left-i.left-e.left,u=a.top-i.top-e.top;!this.cropped||this.disabled||(Et(this.viewBoxImage,de({width:s,height:o},Vi(de({translateX:-d,translateY:-u},e)))),Ce(this.previews,function(l){var c=rr(l,Ea),p=c.width,m=c.height,v=p,f=m,b=1;r&&(b=p/r,f=n*b),n&&f>m&&(b=m/n,v=r*b,f=m),Et(l,{width:v,height:f}),Et(l.getElementsByTagName("img")[0],de({width:s*b,height:o*b},Vi(de({translateX:-d*b,translateY:-u*b},e))))}))}},Qg={bind:function(){var e=this.element,i=this.options,a=this.cropper;Ae(i.cropstart)&&Ue(e,ar,i.cropstart),Ae(i.cropmove)&&Ue(e,ir,i.cropmove),Ae(i.cropend)&&Ue(e,tr,i.cropend),Ae(i.crop)&&Ue(e,er,i.crop),Ae(i.zoom)&&Ue(e,nr,i.zoom),Ue(a,fo,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&Ue(a,bo,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Ue(a,po,this.onDblclick=this.dblclick.bind(this)),Ue(e.ownerDocument,mo,this.onCropMove=this.cropMove.bind(this)),Ue(e.ownerDocument,go,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&Ue(window,yo,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,i=this.options,a=this.cropper;Ae(i.cropstart)&&qe(e,ar,i.cropstart),Ae(i.cropmove)&&qe(e,ir,i.cropmove),Ae(i.cropend)&&qe(e,tr,i.cropend),Ae(i.crop)&&qe(e,er,i.crop),Ae(i.zoom)&&qe(e,nr,i.zoom),qe(a,fo,this.onCropStart),i.zoomable&&i.zoomOnWheel&&qe(a,bo,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&qe(a,po,this.onDblclick),qe(e.ownerDocument,mo,this.onCropMove),qe(e.ownerDocument,go,this.onCropEnd),i.responsive&&qe(window,yo,this.onResize)}},Jg={resize:function(){if(!this.disabled){var e=this.options,i=this.container,a=this.containerData,r=i.offsetWidth/a.width;if(r!==1||i.offsetHeight!==a.height){var n,s;e.restore&&(n=this.getCanvasData(),s=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Ce(n,function(o,d){n[d]=o*r})),this.setCropBoxData(Ce(s,function(o,d){s[d]=o*r})))}}},dblclick:function(){this.disabled||this.options.dragMode===pu||this.setDragMode(Ng(this.dragBox,Qn)?hu:Er)},wheel:function(e){var i=this,a=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*a,e)))},cropStart:function(e){var i=e.buttons,a=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(G(i)&&i!==1||G(a)&&a!==0||e.ctrlKey))){var r=this.options,n=this.pointers,s;e.changedTouches?Ce(e.changedTouches,function(o){n[o.identifier]=Ta(o)}):n[e.pointerId||0]=Ta(e),Object.keys(n).length>1&&r.zoomable&&r.zoomOnTouch?s=cu:s=rr(e.target,Xi),!!_g.test(s)&&di(this.element,ar,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===uu&&(this.cropping=!0,Fe(this.dragBox,Ua)))}},cropMove:function(e){var i=this.action;if(!(this.disabled||!i)){var a=this.pointers;e.preventDefault(),di(this.element,ir,{originalEvent:e,action:i})!==!1&&(e.changedTouches?Ce(e.changedTouches,function(r){de(a[r.identifier]||{},Ta(r,!0))}):de(a[e.pointerId||0]||{},Ta(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var i=this.action,a=this.pointers;e.changedTouches?Ce(e.changedTouches,function(r){delete a[r.identifier]}):delete a[e.pointerId||0],i&&(e.preventDefault(),Object.keys(a).length||(this.action=""),this.cropping&&(this.cropping=!1,ri(this.dragBox,Ua,this.cropped&&this.options.modal)),di(this.element,tr,{originalEvent:e,action:i}))}}},ev={change:function(e){var i=this.options,a=this.canvasData,r=this.containerData,n=this.cropBoxData,s=this.pointers,o=this.action,d=i.aspectRatio,u=n.left,l=n.top,c=n.width,p=n.height,m=u+c,v=l+p,f=0,b=0,C=r.width,k=r.height,F=!0,_;!d&&e.shiftKey&&(d=c&&p?c/p:1),this.limited&&(f=n.minLeft,b=n.minTop,C=f+Math.min(r.width,a.width,a.left+a.width),k=b+Math.min(r.height,a.height,a.top+a.height));var N=s[Object.keys(s)[0]],y={x:N.endX-N.startX,y:N.endY-N.startY},D=function($){switch($){case It:m+y.x>C&&(y.x=C-m);break;case At:u+y.x<f&&(y.x=f-u);break;case yt:l+y.y<b&&(y.y=b-l);break;case Kt:v+y.y>k&&(y.y=k-v);break}};switch(o){case Cr:u+=y.x,l+=y.y;break;case It:if(y.x>=0&&(m>=C||d&&(l<=b||v>=k))){F=!1;break}D(It),c+=y.x,c<0&&(o=At,c=-c,u-=c),d&&(p=c/d,l+=(n.height-p)/2);break;case yt:if(y.y<=0&&(l<=b||d&&(u<=f||m>=C))){F=!1;break}D(yt),p-=y.y,l+=y.y,p<0&&(o=Kt,p=-p,l-=p),d&&(c=p*d,u+=(n.width-c)/2);break;case At:if(y.x<=0&&(u<=f||d&&(l<=b||v>=k))){F=!1;break}D(At),c-=y.x,u+=y.x,c<0&&(o=It,c=-c,u-=c),d&&(p=c/d,l+=(n.height-p)/2);break;case Kt:if(y.y>=0&&(v>=k||d&&(u<=f||m>=C))){F=!1;break}D(Kt),p+=y.y,p<0&&(o=yt,p=-p,l-=p),d&&(c=p*d,u+=(n.width-c)/2);break;case Oi:if(d){if(y.y<=0&&(l<=b||m>=C)){F=!1;break}D(yt),p-=y.y,l+=y.y,c=p*d}else D(yt),D(It),y.x>=0?m<C?c+=y.x:y.y<=0&&l<=b&&(F=!1):c+=y.x,y.y<=0?l>b&&(p-=y.y,l+=y.y):(p-=y.y,l+=y.y);c<0&&p<0?(o=Ai,p=-p,c=-c,l-=p,u-=c):c<0?(o=xi,c=-c,u-=c):p<0&&(o=Ii,p=-p,l-=p);break;case xi:if(d){if(y.y<=0&&(l<=b||u<=f)){F=!1;break}D(yt),p-=y.y,l+=y.y,c=p*d,u+=n.width-c}else D(yt),D(At),y.x<=0?u>f?(c-=y.x,u+=y.x):y.y<=0&&l<=b&&(F=!1):(c-=y.x,u+=y.x),y.y<=0?l>b&&(p-=y.y,l+=y.y):(p-=y.y,l+=y.y);c<0&&p<0?(o=Ii,p=-p,c=-c,l-=p,u-=c):c<0?(o=Oi,c=-c,u-=c):p<0&&(o=Ai,p=-p,l-=p);break;case Ai:if(d){if(y.x<=0&&(u<=f||v>=k)){F=!1;break}D(At),c-=y.x,u+=y.x,p=c/d}else D(Kt),D(At),y.x<=0?u>f?(c-=y.x,u+=y.x):y.y>=0&&v>=k&&(F=!1):(c-=y.x,u+=y.x),y.y>=0?v<k&&(p+=y.y):p+=y.y;c<0&&p<0?(o=Oi,p=-p,c=-c,l-=p,u-=c):c<0?(o=Ii,c=-c,u-=c):p<0&&(o=xi,p=-p,l-=p);break;case Ii:if(d){if(y.x>=0&&(m>=C||v>=k)){F=!1;break}D(It),c+=y.x,p=c/d}else D(Kt),D(It),y.x>=0?m<C?c+=y.x:y.y>=0&&v>=k&&(F=!1):c+=y.x,y.y>=0?v<k&&(p+=y.y):p+=y.y;c<0&&p<0?(o=xi,p=-p,c=-c,l-=p,u-=c):c<0?(o=Ai,c=-c,u-=c):p<0&&(o=Oi,p=-p,l-=p);break;case du:this.move(y.x,y.y),F=!1;break;case cu:this.zoom(Lg(s),e),F=!1;break;case uu:if(!y.x||!y.y){F=!1;break}_=vu(this.cropper),u=N.startX-_.left,l=N.startY-_.top,c=n.minWidth,p=n.minHeight,y.x>0?o=y.y>0?Ii:Oi:y.x<0&&(u-=c,o=y.y>0?Ai:xi),y.y<0&&(l-=p),this.cropped||(it(this.cropBox,Be),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}F&&(n.width=c,n.height=p,n.left=u,n.top=l,this.action=o,this.renderCropBox()),Ce(s,function(x){x.startX=x.endX,x.startY=x.endY})}},tv={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Fe(this.dragBox,Ua),it(this.cropBox,Be),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=de({},this.initialImageData),this.canvasData=de({},this.initialCanvasData),this.cropBoxData=de({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(de(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),it(this.dragBox,Ua),Fe(this.cropBox,Be)),this},replace:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),i?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Ce(this.previews,function(a){a.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,it(this.cropper,co)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Fe(this.cropper,co)),this},destroy:function(){var e=this.element;return e[ue]?(e[ue]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.canvasData,r=a.left,n=a.top;return this.moveTo(Nn(e)?e:r+Number(e),Nn(i)?i:n+Number(i))},moveTo:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.canvasData,r=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(G(e)&&(a.left=e,r=!0),G(i)&&(a.top=i,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,i){var a=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(a.width*e/a.naturalWidth,null,i)},zoomTo:function(e,i,a){var r=this.options,n=this.canvasData,s=n.width,o=n.height,d=n.naturalWidth,u=n.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var l=d*e,c=u*e;if(di(this.element,nr,{ratio:e,oldRatio:s/d,originalEvent:a})===!1)return this;if(a){var p=this.pointers,m=vu(this.cropper),v=p&&Object.keys(p).length?zg(p):{pageX:a.pageX,pageY:a.pageY};n.left-=(l-s)*((v.pageX-m.left-n.left)/s),n.top-=(c-o)*((v.pageY-m.top-n.top)/o)}else ni(i)&&G(i.x)&&G(i.y)?(n.left-=(l-s)*((i.x-n.left)/s),n.top-=(c-o)*((i.y-n.top)/o)):(n.left-=(l-s)/2,n.top-=(c-o)/2);n.width=l,n.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),G(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var i=this.imageData.scaleY;return this.scale(e,G(i)?i:1)},scaleY:function(e){var i=this.imageData.scaleX;return this.scale(G(i)?i:1,e)},scale:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.imageData,r=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(G(e)&&(a.scaleX=e,r=!0),G(i)&&(a.scaleY=i,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,a=this.imageData,r=this.canvasData,n=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:n.left-r.left,y:n.top-r.top,width:n.width,height:n.height};var o=a.width/a.naturalWidth;if(Ce(s,function(l,c){s[c]=l/o}),e){var d=Math.round(s.y+s.height),u=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=u-s.x,s.height=d-s.y}}else s={x:0,y:0,width:0,height:0};return i.rotatable&&(s.rotate=a.rotate||0),i.scalable&&(s.scaleX=a.scaleX||1,s.scaleY=a.scaleY||1),s},setData:function(e){var i=this.options,a=this.imageData,r=this.canvasData,n={};if(this.ready&&!this.disabled&&ni(e)){var s=!1;i.rotatable&&G(e.rotate)&&e.rotate!==a.rotate&&(a.rotate=e.rotate,s=!0),i.scalable&&(G(e.scaleX)&&e.scaleX!==a.scaleX&&(a.scaleX=e.scaleX,s=!0),G(e.scaleY)&&e.scaleY!==a.scaleY&&(a.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var o=a.width/a.naturalWidth;G(e.x)&&(n.left=e.x*o+r.left),G(e.y)&&(n.top=e.y*o+r.top),G(e.width)&&(n.width=e.width*o),G(e.height)&&(n.height=e.height*o),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?de({},this.containerData):{}},getImageData:function(){return this.sized?de({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,i={};return this.ready&&Ce(["left","top","width","height","naturalWidth","naturalHeight"],function(a){i[a]=e[a]}),i},setCanvasData:function(e){var i=this.canvasData,a=i.aspectRatio;return this.ready&&!this.disabled&&ni(e)&&(G(e.left)&&(i.left=e.left),G(e.top)&&(i.top=e.top),G(e.width)?(i.width=e.width,i.height=e.width/a):G(e.height)&&(i.height=e.height,i.width=e.height*a),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:e.left,top:e.top,width:e.width,height:e.height}),i||{}},setCropBoxData:function(e){var i=this.cropBoxData,a=this.options.aspectRatio,r,n;return this.ready&&this.cropped&&!this.disabled&&ni(e)&&(G(e.left)&&(i.left=e.left),G(e.top)&&(i.top=e.top),G(e.width)&&e.width!==i.width&&(r=!0,i.width=e.width),G(e.height)&&e.height!==i.height&&(n=!0,i.height=e.height),a&&(r?i.height=i.width/a:n&&(i.width=i.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,a=Vg(this.image,this.imageData,i,e);if(!this.cropped)return a;var r=this.getData(),n=r.x,s=r.y,o=r.width,d=r.height,u=a.width/Math.floor(i.naturalWidth);u!==1&&(n*=u,s*=u,o*=u,d*=u);var l=o/d,c=Tt({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),p=Tt({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),m=Tt({aspectRatio:l,width:e.width||(u!==1?a.width:o),height:e.height||(u!==1?a.height:d)}),v=m.width,f=m.height;v=Math.min(c.width,Math.max(p.width,v)),f=Math.min(c.height,Math.max(p.height,f));var b=document.createElement("canvas"),C=b.getContext("2d");b.width=ui(v),b.height=ui(f),C.fillStyle=e.fillColor||"transparent",C.fillRect(0,0,v,f);var k=e.imageSmoothingEnabled,F=k===void 0?!0:k,_=e.imageSmoothingQuality;C.imageSmoothingEnabled=F,_&&(C.imageSmoothingQuality=_);var N=a.width,y=a.height,D=n,x=s,$,z,X,W,V,ae;D<=-o||D>N?(D=0,$=0,X=0,V=0):D<=0?(X=-D,D=0,$=Math.min(N,o+D),V=$):D<=N&&(X=0,$=Math.min(o,N-D),V=$),$<=0||x<=-d||x>y?(x=0,z=0,W=0,ae=0):x<=0?(W=-x,x=0,z=Math.min(y,d+x),ae=z):x<=y&&(W=0,z=Math.min(d,y-x),ae=z);var K=[D,x,$,z];if(V>0&&ae>0){var ee=v/o;K.push(X*ee,W*ee,V*ee,ae*ee)}return C.drawImage.apply(C,[a].concat(lu(K.map(function(A){return Math.floor(ui(A))})))),b},setAspectRatio:function(e){var i=this.options;return!this.disabled&&!Nn(e)&&(i.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var i=this.options,a=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var n=e===Er,s=i.movable&&e===hu;e=n||s?e:pu,i.dragMode=e,Ki(a,Xi,e),ri(a,Qn,n),ri(a,Jn,s),i.cropBoxMovable||(Ki(r,Xi,e),ri(r,Qn,n),ri(r,Jn,s))}return this}},iv=at.Cropper,bu=function(){function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mg(this,t),!e||!Pg.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=de({},So,ni(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return gg(t,[{key:"init",value:function(){var i=this.element,a=i.tagName.toLowerCase(),r;if(!i[ue]){if(i[ue]=this,a==="img"){if(this.isImg=!0,r=i.getAttribute("src")||"",this.originalUrl=r,!r)return;r=i.src}else a==="canvas"&&window.HTMLCanvasElement&&(r=i.toDataURL());this.load(r)}}},{key:"load",value:function(i){var a=this;if(!!i){this.url=i,this.imageData={};var r=this.element,n=this.options;if(!n.rotatable&&!n.scalable&&(n.checkOrientation=!1),!n.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Dg.test(i)){Fg.test(i)?this.read(qg(i)):this.clone();return}var s=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=o,s.onerror=o,s.ontimeout=o,s.onprogress=function(){s.getResponseHeader("content-type")!==wo&&s.abort()},s.onload=function(){a.read(s.response)},s.onloadend=function(){a.reloading=!1,a.xhr=null},n.checkCrossOrigin&&Eo(i)&&r.crossOrigin&&(i=To(i)),s.open("GET",i),s.responseType="arraybuffer",s.withCredentials=r.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(i){var a=this.options,r=this.imageData,n=Yg(i),s=0,o=1,d=1;if(n>1){this.url=Gg(i,wo);var u=Xg(n);s=u.rotate,o=u.scaleX,d=u.scaleY}a.rotatable&&(r.rotate=s),a.scalable&&(r.scaleX=o,r.scaleY=d),this.clone()}},{key:"clone",value:function(){var i=this.element,a=this.url,r=i.crossOrigin,n=a;this.options.checkCrossOrigin&&Eo(a)&&(r||(r="anonymous"),n=To(a)),this.crossOrigin=r,this.crossOriginUrl=n;var s=document.createElement("img");r&&(s.crossOrigin=r),s.src=n||a,s.alt=i.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),Fe(s,ho),i.parentNode.insertBefore(s,i.nextSibling)}},{key:"start",value:function(){var i=this,a=this.image;a.onload=null,a.onerror=null,this.sizing=!0;var r=at.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(at.navigator.userAgent),n=function(u,l){de(i.imageData,{naturalWidth:u,naturalHeight:l,aspectRatio:u/l}),i.sizing=!1,i.sized=!0,i.build()};if(a.naturalWidth&&!r){n(a.naturalWidth,a.naturalHeight);return}var s=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){n(s.width,s.height),r||o.removeChild(s)},s.src=a.src,r||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(s))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,a=this.options,r=this.image,n=i.parentNode,s=document.createElement("div");s.innerHTML=Og;var o=s.querySelector(".".concat(ue,"-container")),d=o.querySelector(".".concat(ue,"-canvas")),u=o.querySelector(".".concat(ue,"-drag-box")),l=o.querySelector(".".concat(ue,"-crop-box")),c=l.querySelector(".".concat(ue,"-face"));this.container=n,this.cropper=o,this.canvas=d,this.dragBox=u,this.cropBox=l,this.viewBox=o.querySelector(".".concat(ue,"-view-box")),this.face=c,d.appendChild(r),Fe(i,Be),n.insertBefore(o,i.nextSibling),this.isImg||it(r,ho),this.initPreview(),this.bind(),a.initialAspectRatio=Math.max(0,a.initialAspectRatio)||NaN,a.aspectRatio=Math.max(0,a.aspectRatio)||NaN,a.viewMode=Math.max(0,Math.min(3,Math.round(a.viewMode)))||0,Fe(l,Be),a.guides||Fe(l.getElementsByClassName("".concat(ue,"-dashed")),Be),a.center||Fe(l.getElementsByClassName("".concat(ue,"-center")),Be),a.background&&Fe(o,"".concat(ue,"-bg")),a.highlight||Fe(c,Cg),a.cropBoxMovable&&(Fe(c,Jn),Ki(c,Xi,Cr)),a.cropBoxResizable||(Fe(l.getElementsByClassName("".concat(ue,"-line")),Be),Fe(l.getElementsByClassName("".concat(ue,"-point")),Be)),this.render(),this.ready=!0,this.setDragMode(a.dragMode),a.autoCrop&&this.crop(),this.setData(a.data),Ae(a.ready)&&Ue(i,vo,a.ready,{once:!0}),di(i,vo)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),it(this.element,Be))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=iv,t}},{key:"setDefaults",value:function(i){de(So,ni(i)&&i)}}]),t}();de(bu.prototype,Kg,Zg,Qg,Jg,ev,tv);class av extends Ve{constructor(e){super(e),this.granularRotateOnChange=i=>{const{rotationAngle:a,rotationDelta:r}=this.state,n=Number(i.target.value)-r;if(cancelAnimationFrame(this.granularRotateOnInputNextFrame),n!==0){const s=a+n;this.granularRotateOnInputNextFrame=requestAnimationFrame(()=>{this.cropper.rotateTo(s)})}},this.state={rotationAngle:0,rotationDelta:0}}componentDidMount(){const{opts:e,storeCropperInstance:i}=this.props;this.cropper=new bu(this.imgElement,e.cropperOptions),i(this.cropper),e.actions.granularRotate&&this.imgElement.addEventListener("crop",a=>{const r=a.detail.rotate;this.setState({rotationAngle:r,rotationDelta:(r+405)%90-45})})}componentWillUnmount(){this.cropper.destroy()}renderGranularRotate(){const{i18n:e}=this.props,{rotationDelta:i,rotationAngle:a}=this.state;return h("label",{"data-microtip-position":"top",role:"tooltip","aria-label":`${a}\xBA`,className:"uppy-ImageCropper-rangeWrapper uppy-u-reset"},h("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.granularRotateOnChange,onChange:this.granularRotateOnChange,value:i,min:"-45",max:"44","aria-label":e("rotate")}))}renderRevert(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("revert"),"data-microtip-position":"top",onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(0)}},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0z",fill:"none"}),h("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.rotate(-90),"aria-label":e("rotate"),"data-microtip-position":"top"},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),h("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("flipHorizontal"),"data-microtip-position":"top",onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0z",fill:"none"}),h("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomIn"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(.1)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},h("path",{d:"M0 0h24v24H0V0z",fill:"none"}),h("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),h("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomOut"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(-.1)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0V0z",fill:"none"}),h("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioSquare"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(1)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M0 0h24v24H0z",fill:"none"}),h("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioLandscape"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(16/9)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),h("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){const{i18n:e}=this.props;return h("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioPortrait"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(9/16)},h("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},h("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),h("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){const{currentImage:e,opts:i}=this.props,{actions:a}=i,r=URL.createObjectURL(e.data);return h("div",{className:"uppy-ImageCropper"},h("div",{className:"uppy-ImageCropper-container"},h("img",{className:"uppy-ImageCropper-image",alt:e.name,src:r,ref:n=>{this.imgElement=n}})),h("div",{className:"uppy-ImageCropper-controls"},a.revert&&this.renderRevert(),a.rotate&&this.renderRotate(),a.granularRotate&&this.renderGranularRotate(),a.flip&&this.renderFlip(),a.zoomIn&&this.renderZoomIn(),a.zoomOut&&this.renderZoomOut(),a.cropSquare&&this.renderCropSquare(),a.cropWidescreen&&this.renderCropWidescreen(),a.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}}var nv={strings:{revert:"Revert",rotate:"Rotate",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontal",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};const rv={version:"2.1.0"};class wu extends mt{constructor(e,i){super(e,i),this.save=()=>{const s=d=>{const{currentImage:u}=this.getPluginState();this.uppy.setFileState(u.id,{data:d,size:d.size,preview:null});const l=this.uppy.getFile(u.id);this.uppy.emit("thumbnail:request",l),this.setPluginState({currentImage:l}),this.uppy.emit("file-editor:complete",l)},{currentImage:o}=this.getPluginState();this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(s,o.type,this.opts.quality)},this.storeCropperInstance=s=>{this.cropper=s},this.selectFile=s=>{this.uppy.emit("file-editor:start",s),this.setPluginState({currentImage:s})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=nv;const a={viewMode:1,background:!1,autoCropArea:1,responsive:!0,croppedCanvasOptions:{}},r={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},n={quality:.8};this.opts={...n,...i,actions:{...r,...i.actions},cropperOptions:{...a,...i.cropperOptions}},this.i18nInit()}canEditFile(e){if(!e.type||e.isRemote)return!1;const i=e.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(i)}install(){this.setPluginState({currentImage:null});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){const{currentImage:e}=this.getPluginState();if(e){const i=this.uppy.getFile(e.id);this.uppy.emit("file-editor:cancel",i)}this.unmount()}render(){const{currentImage:e}=this.getPluginState();return e===null||e.isRemote?null:h(av,{currentImage:e,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}}wu.VERSION=rv.version;const sv={components:{Dashboard:dg},props:{types:{type:Array,default:null},path:{type:String,default:"files"},maxNumberOfFiles:{type:Number,default:1}},emits:["uploaded","fileAdded","fileRemoved"],setup(t,e){Lo();const i=new Pl({autoProceed:!1,restrictions:{allowedFileTypes:t.types,maxNumberOfFiles:t.maxNumberOfFiles}});i.use(wu,{quality:1}),i.on("complete",n=>{var s,o;((s=n.successful)==null?void 0:s.length)>0&&e.emit("uploaded",(o=n.successful[0])==null?void 0:o.response)}),i.on("file-added",n=>{console.log("fileAdded",n),e.emit("fileAdded",n)}),i.on("file-removed",(n,s)=>{e.emit("fileRemoved",n)}),No(()=>{i.close()});function a(){i.upload()}function r(){i.cancelAll()}return{uppy:i,upload:a,cancel:r}}};function ov(t,e,i,a,r,n){const s=Me("dashboard");return I(),j(s,{ref:"dash",uppy:a.uppy,props:{proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,height:300,metaFields:[{id:"name",name:"Name",placeholder:"file name"},{id:"caption",name:"Caption",placeholder:"describe what the image is about"}]},plugins:["ImageEditor"]},null,8,["uppy"])}var lv=We(sv,[["render",ov],["__scopeId","data-v-05b34b9d"]]);const uv=He({name:"IndexPage",components:{VueMoveable:or,VueSelecto:ur,ObjectType:Ih,FileUpload:lv},setup(){var da,ca;od({title:"HVAC Drawer"});const e=new Wo,i=Lo(),a=ye(null),r=ye(null),n=ye(null),s=ye([]),o=ye({name:"Pointer",type:"default",svg:null}),d=ye({active:!1,data:null}),u=ye({panelsData:[],panelsList:[]}),l=ye({addedCount:0,active:!1,uploadBtnDisabled:!0,uploadBtnLoading:!1,svg:null}),c=ye([]),p=ye(u.value.panelsData);let m=null;const v={items:[],selectedTargets:[],elementGuidelines:[],itemsCount:0,activeItemIndex:null,viewportTransform:{x:0,y:0,scale:1}},f=ye(Ne.exports.cloneDeep(v)),b=ye([]),C=ye([]);let k=null;sr(()=>{var T,B,L,te;m=bc(n.value,{maxZoom:4,minZoom:.1,zoomDoubleClickSpeed:1,filterKey:function(){return!0},beforeMouseDown:function(et){var Wt=!et.altKey;return Wt}}),m.on("transform",function(et){f.value.viewportTransform=et.getTransform()});const g=document.querySelectorAll(".movable-item");Array.from(g).forEach(function(et){f.value.elementGuidelines.push(et)}),(B=(T=window.chrome)==null?void 0:T.webview)==null||B.postMessage({action:1}),(te=(L=window.chrome)==null?void 0:L.webview)!=null&&te.postMessage&&setInterval(window.chrome.webview.postMessage,1e4,{action:4})}),No(()=>{!m||m.dispose()}),(ca=(da=window.chrome)==null?void 0:da.webview)==null||ca.addEventListener("message",g=>{var T;console.log("Recieved webview message",g.data),"action"in g.data&&(g.data.action==="GET_PANELS_LIST_RES"?g.data.data&&(u.value.panelsList=g.data.data,u.value.panelsList.forEach(B=>{var L,te;(te=(L=window.chrome)==null?void 0:L.webview)==null||te.postMessage({action:0,panelId:B.pid})})):g.data.action==="UPDATE_ENTRY_RES"||(g.data.action==="GET_INITIAL_DATA_RES"?(g.data.data&&(g.data.data=JSON.parse(g.data.data)),f.value=g.data.data):g.data.action==="GET_PANEL_DATA_RES"?(u.value.panelsData=u.value.panelsData.filter(B=>B.pid!==g.data.panel_id),u.value.panelsData=u.value.panelsData.concat(g.data.data),p.value=u.value.panelsData,f.value.items.filter(B=>{var L;return(L=B.t3Entry)==null?void 0:L.type}).forEach(B=>{B.t3Entry=g.data.data.find(L=>L.index===B.t3Entry.index&&L.type===B.t3Entry.type),fi(B)})):g.data.action==="SAVE_GRAPHIC_DATA_RES"&&(((T=g.data.data)==null?void 0:T.status)===!0?i.notify({message:"Saved successfully.",color:"primary",icon:"check_circle",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]}):i.notify({message:"Error, not saved!",color:"danger",icon:"error",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]}))))});function F(g){console.log(g),C.value=[],b.value.unshift({title:g,state:Ne.exports.cloneDeep(f.value)}),b.value.length>20&&b.value.pop()}function _(g){r.value.clickTarget(g.inputEvent,g.inputTarget)}function N(g){F("Move Object")}function y(g){f.value.items.find(T=>`movable-item-${T.id}`===g.target.id),g.target.style.transform=g.transform}function D(g){if(!g.lastEvent)b.value.shift();else{const T=f.value.items.find(B=>`movable-item-${B.id}`===g.target.id);T.translate=g.lastEvent.beforeTranslate}}function x(g){F("Move Group"),g.events.forEach((T,B)=>{const L=f.value.items.findIndex(te=>`movable-item-${te.id}`===T.target.id);T.set(f.value.items[L].translate)})}function $(g){g.events.forEach((T,B)=>{const L=f.value.items.findIndex(te=>`movable-item-${te.id}`===T.target.id);f.value.items[L].translate=T.beforeTranslate})}function z(g){g.lastEvent||b.value.shift()}function X(g){const T=g.inputEvent.target;(a.value.isMoveableElement(T)||f.value.selectedTargets.some(B=>B===T||B.contains(T)))&&g.stop()}function W(g){f.value.selectedTargets=g.selected,f.value.selectedTargets.length===1?f.value.activeItemIndex=f.value.items.findIndex(T=>`movable-item-${T.id}`===f.value.selectedTargets[0].id):f.value.activeItemIndex=null,g.isDragStart&&(g.inputEvent.preventDefault(),setTimeout(()=>{this.$refs.moveable.ngDragStart(g.inputEvent)}))}function V(g){F("Resize object");const T=f.value.items.findIndex(B=>`movable-item-${B.id}`===g.target.id);g.setOrigin(["%","%"]),g.dragStart&&g.dragStart.set(f.value.items[T].translate)}function ae(g){const T=f.value.items.find(B=>`movable-item-${B.id}`===g.target.id);g.target.style.width=`${g.width}px`,g.target.style.height=`${g.height}px`,g.target.style.transform=`translate(${g.drag.beforeTranslate[0]}px, ${g.drag.beforeTranslate[1]}px) rotate(${T.rotate}deg) scaleX(${T.scaleX}) scaleY(${T.scaleY})`}function K(g){const T=f.value.items.findIndex(B=>`movable-item-${B.id}`===g.lastEvent.target.id);f.value.items[T].width=g.lastEvent.width,f.value.items[T].height=g.lastEvent.height,f.value.items[T].translate=g.lastEvent.drag.beforeTranslate}function ee(g){F("Rotate object")}function A(g){const T=f.value.items.find(B=>`movable-item-${B.id}`===g.target.id);T.rotate=g.rotate}function q(g){g.events.forEach((T,B)=>{T.dragStart&&T.dragStart.set(f.value.items[B].translate)})}function Z(g){g.events.forEach((T,B)=>{const L=f.value.items.find(te=>`movable-item-${te.id}`===T.target.id);T.target.style.width=`${T.width}px`,T.target.style.height=`${T.height}px`,T.target.style.transform=`translate(${T.drag.beforeTranslate[0]}px, ${T.drag.beforeTranslate[1]}px) rotate(${L.rotate}deg) scaleX(${L.scaleX}) scaleY(${L.scaleY}) `})}function ce(g){g.events.forEach(T=>{const B=f.value.items.findIndex(L=>`movable-item-${L.id}`===T.lastEvent.target.id);f.value.items[B].width=T.lastEvent.width,f.value.items[B].height=T.lastEvent.height,f.value.items[B].translate=T.lastEvent.drag.beforeTranslate})}function fe(g){F("Rotate Group"),g.events.forEach(T=>{const B=f.value.items.findIndex(L=>`movable-item-${L.id}`===T.target.id);T.set(f.value.items[B].rotate),T.dragStart&&T.dragStart.set(f.value.items[B].translate)})}function me(g){g.events.forEach((T,B)=>{const L=f.value.items.findIndex(te=>`movable-item-${te.id}`===T.target.id);f.value.items[L].translate=T.drag.beforeTranslate,f.value.items[L].rotate=T.rotate})}function H(g){F(`Add ${g.type}`),f.value.itemsCount++,g.id=f.value.itemsCount,f.value.items.push(g);const T=document.querySelectorAll(".movable-item");return f.value.elementGuidelines=[],Array.from(T).forEach(function(B){f.value.elementGuidelines.push(B)}),g}const ke={top:36,left:0};function _e(g){var L;if(o.value.name==="Pointer"||g.rect.width<20||g.rect.height<20)return;const T=1/f.value.viewportTransform.scale,B=H({title:null,active:!1,type:o.value.name,svg:o.value.svg,translate:[(g.rect.left-ke.left-f.value.viewportTransform.x)*T,(g.rect.top-ke.top-f.value.viewportTransform.y)*T],width:g.rect.width*T,height:g.rect.height*T,rotate:0,scaleX:1,scaleY:1,props:((L=es.find(te=>te.name===o.value.name))==null?void 0:L.props)||{},zindex:1,t3Entry:null,t3EntryDisplayField:"label"});setTimeout(()=>{f.value.activeItemIndex=f.value.items.findIndex(te=>te.id===B.id)},10),setTimeout(()=>{const te=document.querySelector(`#movable-item-${B.id}`);f.value.selectedTargets=[te]},100)}function Qe(g,T="default",B=null){o.value.name=g,o.value.type=T,o.value.svg=B}function we(){const g=Ne.exports.cloneDeep(f.value.selectedTargets);f.value.selectedTargets=[],setTimeout(()=>{f.value.selectedTargets=g},10)}function Je(g,T=!1){console.log("item",g),g&&(F("Rotate object"),T?g.rotate=g.rotate-90:g.rotate=g.rotate+90,we())}function pi(g){F("Flip object H"),g.scaleX===1?g.scaleX=-1:g.scaleX=1,we()}function nt(g){F("Flip object V"),g.scaleY===1?g.scaleY=-1:g.scaleY=1,we()}function Ya(g){F("Bring object to front"),g.zindex=g.zindex+1}function Xa(g){F("Send object to back"),g.zindex=g.zindex-1}function Ka(g){F("Remove object");const T=f.value.items.findIndex(B=>B.id===g.id);f.value.activeItemIndex=null,f.value.items.splice(T,1),f.value.selectedTargets=[]}function Za(g){f.value.activeItemIndex=null;const T=Ne.exports.cloneDeep(g);T.translate[0]=T.translate[0]+10,T.translate[1]=T.translate[1]+10;const B=H(T);f.value.selectedTargets=[],setTimeout(()=>{const L=document.querySelector(`#movable-item-${B.id}`);f.value.selectedTargets=[L],f.value.activeItemIndex=f.value.items.findIndex(te=>te.id===B.id)},10)}function Qa(g){r.value.clickTarget(g)}function Ja(g,T){var L,te;if(!T.t3Entry)return;let B=T.t3Entry[g];(g==="value"||g==="control")&&fi(T),(te=(L=window.chrome)==null?void 0:L.webview)==null||te.postMessage({action:3,field:g,value:B,panelId:1,entryIndex:T.t3Entry.index,entryType:ud[T.t3Entry.type]})}function en(g){return!g.inputEvent.altKey}function tn(){F("Link object to T3000 entry"),f.value.items[f.value.activeItemIndex].t3Entry=Ne.exports.cloneDeep(d.value.data),fi(f.value.items[f.value.activeItemIndex]),d.value.data=null,d.value.active=!1}function fi(g){var T,B,L,te,et,Wt;if(F("Change linked entry value"),((T=g.props)==null?void 0:T.active)!==void 0){if(!g.t3Entry)return;if(g.t3Entry.type==="OUTPUT"&&g.t3Entry.hw_switch_status!==1)g.props.active=!!g.t3Entry.hw_switch_status;else if(g.t3Entry.range){const qt=jn.find(nn=>nn.id===g.t3Entry.range);qt&&(g.props.active=!!(((B=g.t3Entry)==null?void 0:B.digital_analog)===0&&(((L=g.t3Entry)==null?void 0:L.control)===1&&!qt.directInvers||((te=g.t3Entry)==null?void 0:te.control)===0&&qt.directInvers)||((et=g.t3Entry)==null?void 0:et.digital_analog)===1&&((Wt=g.t3Entry)==null?void 0:Wt.value)>0))}else g.t3Entry.type==="PROGRAM"?g.props.active=!!g.t3Entry.status:g.t3Entry.type==="SCHEDULE"?g.props.active=!!g.t3Entry.output:g.t3Entry.type==="HOLIDAY"&&(g.props.active=!!g.t3Entry.value)}}function na(){var g,T;(T=(g=window.chrome)==null?void 0:g.webview)==null||T.postMessage({action:2,data:Bu(f.value)})}function an(){var g;if(((g=f.value.items)==null?void 0:g.length)>0){i.dialog({dark:!0,title:"Do you want to clear the drawing?",message:"This will also erase your undo history",cancel:!0,persistent:!0}).onOk(()=>{f.value=Ne.exports.cloneDeep(v),b.value=[],C.value=[],we()}).onCancel(()=>{});return}f.value=Ne.exports.cloneDeep(v),b.value=[],C.value=[],we()}e.keydown(g=>{f.value.selectedTargets.length<1||(["up","down","left","right"].includes(g.key)&&F("Move object"),g.key==="up"?a.value.request("draggable",{deltaX:0,deltaY:-5},!0):g.key==="down"?a.value.request("draggable",{deltaX:0,deltaY:5},!0):g.key==="left"?a.value.request("draggable",{deltaX:-5,deltaY:0},!0):g.key==="right"?a.value.request("draggable",{deltaX:5,deltaY:0},!0):g.key==="delete"&&Vt(),["up","down","left","right"].includes(g.key)&&we())}),e.keydown(["ctrl","s"],g=>{g.inputEvent.preventDefault(),na()}),e.keydown(["ctrl","z"],g=>{g.inputEvent.preventDefault(),oa()}),e.keydown(["ctrl","y"],g=>{g.inputEvent.preventDefault(),la()});function mi(){var g,T;d.value.active=!0,(g=f.value.items[f.value.activeItemIndex])!=null&&g.t3Entry&&(d.value.data=Ne.exports.cloneDeep((T=f.value.items[f.value.activeItemIndex])==null?void 0:T.t3Entry))}function ra(g){return jn.find(T=>T.id===g)}function Vt(){F("Remove selected objects"),f.value.selectedTargets.length>0&&(f.value.selectedTargets.forEach(g=>{const T=f.value.items.findIndex(B=>`movable-item-${B.id}`===g.id);T!==-1&&f.value.items.splice(T,1)}),f.value.selectedTargets=[],f.value.activeItemIndex=null)}function sa(g,T){if(g===""){T(()=>{p.value=u.value.panelsData});return}T(()=>{const B=g.toUpperCase();p.value=u.value.panelsData.filter(L=>L.command.toUpperCase().indexOf(B)>-1||L.description.toUpperCase().indexOf(B)>-1||L.label.toUpperCase().indexOf(B)>-1)})}function oa(){b.value.length<1||(C.value.unshift({title:k,state:Ne.exports.cloneDeep(f.value)}),f.value=Ne.exports.cloneDeep(b.value[0].state),b.value.shift(),we())}function la(){C.value.length<1||(b.value.unshift({title:k,state:Ne.exports.cloneDeep(f.value)}),f.value=Ne.exports.cloneDeep(C.value[0].state),C.value.shift(),we())}function gi(g){console.log("handleCustomObjectUpload",g)}async function ua(g){l.value.uploadBtnDisabled=!1;const T=await g.data.text();l.value.svg=T}function Ht(){l.value.addedCount++,l.value.active=!1,l.value.uploadBtnDisabled=!0,c.value.push({name:"Custom-"+l.value.addedCount,label:"Custom Element",svg:Ne.exports.cloneDeep(l.value.svg)}),l.value.svg=null}return{movable:a,selecto:r,appState:f,addObject:H,viewport:n,onClickGroup:_,onDragStart:N,onDrag:y,onDragEnd:D,onDragGroup:$,onSelectoDragStart:X,onDragGroupStart:x,onDragGroupEnd:z,onSelectoSelectEnd:W,targets:s,onResize:ae,onResizeEnd:K,onRotateStart:ee,onRotate:A,onResizeGroupStart:q,onResizeGroup:Z,onRotateGroupStart:fe,onResizeGroupEnd:ce,onRotateGroup:me,onResizeStart:V,onSelectoDragEnd:_e,selectTool:Qe,tools:es,selectedTool:o,rotate90:Je,flipH:pi,flipV:nt,bringToFront:Ya,sendToBack:Xa,removeObject:Ka,selectByRightClick:Qa,T3UpdateEntryField:Ja,selectoDragCondition:en,duplicateObject:Za,linkT3EntrySave:tn,newProject:an,save:na,refreshSelecto:we,linkT3EntryDialog:d,linkT3EntryDialogAction:mi,T3000_Data:u,selectPanelOptions:p,getRangeById:ra,selectPanelFilterFn:sa,undoHistory:b,redoHistory:C,undoAction:oa,redoAction:la,deleteSelected:Vt,uploadObjectDialog:l,handleCustomObjectUpload:gi,customObjectFileAdded:ua,saveCustomObject:Ht,customTools:c}}}),dv={class:"tools flex column"},cv={class:"viewport-wrapper"},hv={class:"viewport"},pv={ref:"viewport"},fv=["id"],mv={key:0,class:"item-config flex flex-nowrap column"},gv={class:"item-config-inner"},vv={class:"grid gap-4 grid-cols-2 mb-4"},yv={key:1},bv=pe("div",{class:"text-h6"},"Link Entry",-1),wv=pe("div",{class:"text-h6"},"Upload custom SVG",-1);function Sv(t,e,i,a,r,n){const s=Me("vue-selecto"),o=Me("vue-moveable"),d=Me("object-type"),u=Me("file-upload");return I(),J(Mi,null,[S(ld,null,{default:E(()=>[pe("div",null,[pe("div",dv,[S(bi,{class:"rounded-borders text-primary"},{default:E(()=>[(I(!0),J(Mi,null,sn(t.tools,l=>oe((I(),j(le,{key:l.name,onClick:c=>t.selectTool(l.name),clickable:"",active:t.selectedTool.name===l.name,"active-class":"active-tool"},{default:E(()=>[S(Zt,{anchor:"center right",self:"center left"},{default:E(()=>[Q(si(l.label),1)]),_:2},1024),S(U,null,{default:E(()=>[S(pt,{name:l.icon,size:"sm"},null,8,["name"])]),_:2},1024)]),_:2},1032,["onClick","active"])),[[on]])),128)),(I(!0),J(Mi,null,sn(t.customTools,l=>oe((I(),j(le,{key:l.name,onClick:c=>t.selectTool(l.name,"custom",l.svg),clickable:"",active:t.selectedTool.name===l.name,"active-class":"active-tool"},{default:E(()=>[S(Zt,{anchor:"center right",self:"center left"},{default:E(()=>[Q(si(l.label),1)]),_:2},1024),S(U,null,{default:E(()=>[S(pt,{name:"dashboard_customize",size:"sm"})]),_:1})]),_:2},1032,["onClick","active"])),[[on]])),128)),oe((I(),j(le,{onClick:e[0]||(e[0]=l=>t.uploadObjectDialog.active=!0),clickable:""},{default:E(()=>[S(Zt,{anchor:"center right",self:"center left"},{default:E(()=>[Q(" Add custom SVG ")]),_:1}),S(U,null,{default:E(()=>[S(pt,{name:"add_circle_outline",size:"sm"})]),_:1})]),_:1})),[[on]])]),_:1})]),pe("div",cv,[S(gd,{class:"toolbar text-white shadow-2"},{default:E(()=>[S(cn,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",label:"File"},{default:E(()=>[S(bi,null,{default:E(()=>[oe((I(),j(le,{dense:"",clickable:"",onClick:t.newProject},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"assignment",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[S(Mt,null,{default:E(()=>[Q("New Project")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]]),S(Le,{inset:"",spaced:""}),oe((I(),j(le,{dense:"",clickable:"",onClick:t.save},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"assignment",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[S(Mt,null,{default:E(()=>[Q("Save")]),_:1})]),_:1}),S(U,{side:""},{default:E(()=>[S(dn,null,{default:E(()=>[Q("Ctrl + S")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[he]])]),_:1})]),_:1}),S(cn,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",label:"Edit"},{default:E(()=>[S(bi,null,{default:E(()=>[oe((I(),j(le,{dense:"",clickable:"",onClick:t.undoAction,disable:t.undoHistory.length<1},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"undo",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[S(Mt,null,{default:E(()=>[Q("Undo")]),_:1})]),_:1}),S(U,{side:""},{default:E(()=>[S(dn,null,{default:E(()=>[Q("Ctrl + Z")]),_:1})]),_:1})]),_:1},8,["onClick","disable"])),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:t.redoAction,disable:t.redoHistory.length<1},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"redo",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[S(Mt,null,{default:E(()=>[Q("Redo")]),_:1})]),_:1}),S(U,{side:""},{default:E(()=>[S(dn,null,{default:E(()=>[Q("Ctrl + Y")]),_:1})]),_:1})]),_:1},8,["onClick","disable"])),[[he]]),S(Le,{inset:"",spaced:""}),oe((I(),j(le,{dense:"",clickable:"",onClick:t.deleteSelected,disable:t.appState.selectedTargets.length<1},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"delete",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[S(Mt,null,{default:E(()=>[Q("Delete selected")]),_:1})]),_:1})]),_:1},8,["onClick","disable"])),[[he]])]),_:1})]),_:1}),S(cn,{"no-caps":"",stretch:"",flat:"","content-class":"menu-dropdown",label:"Object",disable:t.appState.activeItemIndex===null},{default:E(()=>[S(bi,null,{default:E(()=>[oe((I(),j(le,{dense:"",clickable:"",onClick:e[1]||(e[1]=l=>t.duplicateObject(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"file_copy",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Duplicate")]),_:1})]),_:1})),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:e[2]||(e[2]=l=>t.rotate90(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"autorenew",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Rotate 90\xB0")]),_:1})]),_:1})),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:e[3]||(e[3]=l=>t.rotate90(t.appState.items[t.appState.activeItemIndex],!0))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"sync",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Rotate -90\xB0")]),_:1})]),_:1})),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:e[4]||(e[4]=l=>t.flipH(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Flip horizontal")]),_:1})]),_:1})),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:e[5]||(e[5]=l=>t.flipV(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip",color:"grey-7","text-color":"white",style:{transform:"rotate(90deg)"}})]),_:1}),S(U,null,{default:E(()=>[Q("Flip vertical")]),_:1})]),_:1})),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:e[6]||(e[6]=l=>t.bringToFront(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip_to_front",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Bring to front")]),_:1})]),_:1})),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:e[7]||(e[7]=l=>t.sendToBack(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip_to_back",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Send to Back")]),_:1})]),_:1})),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:e[8]||(e[8]=l=>t.removeObject(t.appState.items[t.appState.activeItemIndex]))},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"remove",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Remove")]),_:1})]),_:1})),[[he]])]),_:1})]),_:1},8,["disable"])]),_:1}),pe("div",hv,[S(s,{ref:"selecto",dragContainer:".viewport",selectableTargets:t.targets,hitRate:100,selectByClick:!0,selectFromInside:!0,toggleContinueSelect:["shift"],ratio:0,boundContainer:!0,onDragStart:t.onSelectoDragStart,onSelectEnd:t.onSelectoSelectEnd,onDragEnd:t.onSelectoDragEnd,dragCondition:t.selectoDragCondition},null,8,["selectableTargets","onDragStart","onSelectEnd","onDragEnd","dragCondition"]),pe("div",pv,[S(o,{ref:"movable",draggable:!0,resizable:!0,rotatable:!0,target:t.appState.selectedTargets,snappable:!0,snapThreshold:10,isDisplaySnapDigit:!0,snapGap:!0,snapDirections:{top:!0,right:!0,bottom:!0,left:!0},elementSnapDirections:{top:!0,right:!0,bottom:!0,left:!0},snapDigit:0,elementGuidelines:t.appState.elementGuidelines,origin:!0,throttleResize:0,throttleRotate:0,rotationPosition:"top",originDraggable:!0,originRelative:!0,defaultGroupRotate:0,defaultGroupOrigin:"50% 50%",padding:{left:0,top:0,right:0,bottom:0},onClickGroup:t.onClickGroup,onDragStart:t.onDragStart,onDrag:t.onDrag,onDragEnd:t.onDragEnd,onDragGroupStart:t.onDragGroupStart,onDragGroup:t.onDragGroup,onDragGroupEnd:t.onDragGroupEnd,onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeEnd:t.onResizeEnd,onRotateStart:t.onRotateStart,onRotate:t.onRotate,onResizeGroupStart:t.onResizeGroupStart,onResizeGroup:t.onResizeGroup,onResizeGroupEnd:t.onResizeGroupEnd,onRotateGroupStart:t.onRotateGroupStart,onRotateGroup:t.onRotateGroup},null,8,["target","elementGuidelines","onClickGroup","onDragStart","onDrag","onDragEnd","onDragGroupStart","onDragGroup","onDragGroupEnd","onResizeStart","onResize","onResizeEnd","onRotateStart","onRotate","onResizeGroupStart","onResizeGroup","onResizeGroupEnd","onRotateGroupStart","onRotateGroup"]),(I(!0),J(Mi,null,sn(t.appState.items,l=>(I(),J("div",{key:l.id,ref_for:!0,ref:"targets",style:Bo(`position: absolute; transform: translate(${l.translate[0]}px, ${l.translate[1]}px) rotate(${l.rotate}deg) scaleX(${l.scaleX}) scaleY(${l.scaleY}); width: ${l.width}px; height: ${l.height}px; z-index: ${l.zindex};`),id:`movable-item-${l.id}`,onMousedown:e[9]||(e[9]=Nu((...c)=>t.selectByRightClick&&t.selectByRightClick(...c),["right"])),class:"movable-item-wrapper"},[S(Ro,{"touch-position":"","context-menu":""},{default:E(()=>[S(bi,null,{default:E(()=>[oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.duplicateObject(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"file_copy",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Duplicate")]),_:1})]),_:2},1032,["onClick"])),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.rotate90(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"autorenew",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Rotate 90\xB0")]),_:1})]),_:2},1032,["onClick"])),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.rotate90(l,!0)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"sync",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Rotate -90\xB0")]),_:1})]),_:2},1032,["onClick"])),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.flipH(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Flip horizontal")]),_:1})]),_:2},1032,["onClick"])),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.flipV(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip",color:"grey-7","text-color":"white",style:{transform:"rotate(90deg)"}})]),_:1}),S(U,null,{default:E(()=>[Q("Flip vertical")]),_:1})]),_:2},1032,["onClick"])),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.bringToFront(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip_to_front",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Bring to front")]),_:1})]),_:2},1032,["onClick"])),[[he]]),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.sendToBack(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"flip_to_back",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Send to Back")]),_:1})]),_:2},1032,["onClick"])),[[he]]),S(Le),oe((I(),j(le,{dense:"",clickable:"",onClick:c=>t.removeObject(l)},{default:E(()=>[S(U,{avatar:""},{default:E(()=>[S(ve,{size:"sm",icon:"remove",color:"grey-7","text-color":"white"})]),_:1}),S(U,null,{default:E(()=>[Q("Remove")]),_:1})]),_:2},1032,["onClick"])),[[he]])]),_:2},1024)]),_:2},1024),S(d,{item:l},null,8,["item"])],44,fv))),128))],512)])]),t.appState.activeItemIndex||t.appState.activeItemIndex===0?(I(),J("div",mv,[pe("div",gv,[S(ts,{class:"mb-2 border border-solid border-gray-700",dark:"","default-opened":"",label:"General"},{default:E(()=>{var l,c;return[pe("div",vv,[S(vt,{"input-style":"width: 60px","onUpdate:modelValue":[t.refreshSelecto,e[10]||(e[10]=p=>t.appState.items[t.appState.activeItemIndex].translate[0]=p)],label:"X",modelValue:t.appState.items[t.appState.activeItemIndex].translate[0],modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),S(vt,{"input-style":"width: 60px","onUpdate:modelValue":[t.refreshSelecto,e[11]||(e[11]=p=>t.appState.items[t.appState.activeItemIndex].translate[1]=p)],label:"Y",modelValue:t.appState.items[t.appState.activeItemIndex].translate[1],modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),S(vt,{"input-style":"width: 60px","onUpdate:modelValue":[t.refreshSelecto,e[12]||(e[12]=p=>t.appState.items[t.appState.activeItemIndex].width=p)],label:"Width",modelValue:t.appState.items[t.appState.activeItemIndex].width,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),S(vt,{"input-style":"width: 60px","onUpdate:modelValue":[t.refreshSelecto,e[13]||(e[13]=p=>t.appState.items[t.appState.activeItemIndex].height=p)],label:"Height",modelValue:t.appState.items[t.appState.activeItemIndex].height,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),S(vt,{"input-style":"width: 60px","onUpdate:modelValue":[t.refreshSelecto,e[14]||(e[14]=p=>t.appState.items[t.appState.activeItemIndex].rotate=p)],label:"Rotate",modelValue:t.appState.items[t.appState.activeItemIndex].rotate,modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["onUpdate:modelValue","modelValue"]),t.appState.items[t.appState.activeItemIndex].props.fontSize!==void 0?(I(),j(vt,{key:0,"input-style":"width: 60px",label:"Font size",modelValue:t.appState.items[t.appState.activeItemIndex].props.fontSize,"onUpdate:modelValue":e[15]||(e[15]=p=>t.appState.items[t.appState.activeItemIndex].props.fontSize=p),modelModifiers:{number:!0},dark:"",filled:"",type:"number"},null,8,["modelValue"])):je("",!0),t.appState.items[t.appState.activeItemIndex].props.color!==void 0?(I(),j(vt,{key:1,dark:"",filled:"",modelValue:t.appState.items[t.appState.activeItemIndex].props.color,"onUpdate:modelValue":e[17]||(e[17]=p=>t.appState.items[t.appState.activeItemIndex].props.color=p),label:"Color"},{append:E(()=>[S(pt,{name:"colorize",class:"cursor-pointer"},{default:E(()=>[S(dd,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:E(()=>[S(cd,{modelValue:t.appState.items[t.appState.activeItemIndex].props.color,"onUpdate:modelValue":e[16]||(e[16]=p=>t.appState.items[t.appState.activeItemIndex].props.color=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):je("",!0)]),!t.appState.items[t.appState.activeItemIndex].t3Entry&&t.appState.items[t.appState.activeItemIndex].props.active!==void 0?(I(),j(Hr,{key:0,dark:"",filled:"",modelValue:t.appState.items[t.appState.activeItemIndex].props.active,"onUpdate:modelValue":e[18]||(e[18]=p=>t.appState.items[t.appState.activeItemIndex].props.active=p),class:"text-white w-full",label:"Active",disable:t.appState.items[t.appState.activeItemIndex].t3Entry&&((l=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:l.auto_manual)===0||((c=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:c.digital_analog)===1},{default:E(()=>{var p;return[((p=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:p.auto_manual)===0?(I(),j(Zt,{key:0,anchor:"center left",self:"center end"},{default:E(()=>[Q(" Can't activate it because the linked entry is in auto mode ")]),_:1})):je("",!0)]}),_:1},8,["modelValue","disable"])):je("",!0),t.appState.items[t.appState.activeItemIndex].props.inAlarm!==void 0?(I(),j(Hr,{key:1,dark:"",filled:"",modelValue:t.appState.items[t.appState.activeItemIndex].props.inAlarm,"onUpdate:modelValue":e[19]||(e[19]=p=>t.appState.items[t.appState.activeItemIndex].props.inAlarm=p),class:"text-white w-full",label:"In alarm"},null,8,["modelValue"])):je("",!0)]}),_:1}),pe("div",null,[S(ct,{dark:"",outline:"","no-caps":"",stretch:"",icon:t.appState.items[t.appState.activeItemIndex].t3Entry?"dataset_linked":void 0,class:"text-white w-full",label:t.appState.items[t.appState.activeItemIndex].t3Entry?`Linked with ${t.appState.items[t.appState.activeItemIndex].t3Entry.description}`:"Link with an entry",onClick:t.linkT3EntryDialogAction},null,8,["icon","label","onClick"]),t.appState.items[t.appState.activeItemIndex].t3Entry?(I(),j(ts,{key:0,class:"mt-2 border border-solid border-gray-700",dark:"","default-opened":"",label:"Entry settings"},{default:E(()=>{var l,c,p,m,v,f;return[S(Ft,{class:"mb-1",filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.auto_manual,"onUpdate:modelValue":[e[20]||(e[20]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.auto_manual=b),e[21]||(e[21]=b=>t.T3UpdateEntryField("auto_manual",t.appState.items[t.appState.activeItemIndex]))],options:[{label:"Auto",value:0},{label:"Manual",value:1}],label:"Auto/Manual","emit-value":"","map-options":""},null,8,["modelValue"]),t.appState.items[t.appState.activeItemIndex].t3Entry.digital_analog===0&&t.appState.items[t.appState.activeItemIndex].t3Entry.range?(I(),j(Ft,{key:0,class:"mb-1",disable:((l=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:l.auto_manual)===0,filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.control,"onUpdate:modelValue":[e[22]||(e[22]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.control=b),e[23]||(e[23]=b=>t.T3UpdateEntryField("control",t.appState.items[t.appState.activeItemIndex]))],options:[{label:t.getRangeById(t.appState.items[t.appState.activeItemIndex].t3Entry.range).off,value:0},{label:t.getRangeById(t.appState.items[t.appState.activeItemIndex].t3Entry.range).on,value:1}],label:"Value","emit-value":"","map-options":""},null,8,["disable","modelValue","options"])):je("",!0),t.appState.items[t.appState.activeItemIndex].t3Entry.type==="PROGRAM"?(I(),j(Ft,{key:1,class:"mb-1",disable:((c=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:c.auto_manual)===0,filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.status,"onUpdate:modelValue":[e[24]||(e[24]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.status=b),e[25]||(e[25]=b=>t.T3UpdateEntryField("status",t.appState.items[t.appState.activeItemIndex]))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Status","emit-value":"","map-options":""},null,8,["disable","modelValue"])):t.appState.items[t.appState.activeItemIndex].t3Entry.type==="SCHEDULE"?(I(),j(Ft,{key:2,class:"mb-1",disable:((p=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:p.auto_manual)===0,filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.output,"onUpdate:modelValue":[e[26]||(e[26]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.output=b),e[27]||(e[27]=b=>t.T3UpdateEntryField("output",t.appState.items[t.appState.activeItemIndex]))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Output","emit-value":"","map-options":""},null,8,["disable","modelValue"])):t.appState.items[t.appState.activeItemIndex].t3Entry.type==="HOLIDAY"?(I(),j(Ft,{key:3,class:"mb-1",disable:((m=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:m.auto_manual)===0,filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.value,"onUpdate:modelValue":[e[28]||(e[28]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.value=b),e[29]||(e[29]=b=>t.T3UpdateEntryField("value",t.appState.items[t.appState.activeItemIndex]))],options:[{label:"OFF",value:0},{label:"ON",value:1}],label:"Value","emit-value":"","map-options":""},null,8,["disable","modelValue"])):je("",!0),t.appState.items[t.appState.activeItemIndex].t3Entry.digital_analog===1?(I(),j(vt,{key:4,class:"mb-1",disable:((v=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:v.auto_manual)===0,filled:"",dark:"",type:"number",modelValue:t.appState.items[t.appState.activeItemIndex].t3Entry.value,"onUpdate:modelValue":[e[30]||(e[30]=b=>t.appState.items[t.appState.activeItemIndex].t3Entry.value=b),e[31]||(e[31]=b=>t.T3UpdateEntryField("value",t.appState.items[t.appState.activeItemIndex]))],modelModifiers:{number:!0},label:"Value"},null,8,["disable","modelValue"])):je("",!0),S(Ft,{filled:"",dark:"",modelValue:t.appState.items[t.appState.activeItemIndex].t3EntryDisplayField,"onUpdate:modelValue":e[32]||(e[32]=b=>t.appState.items[t.appState.activeItemIndex].t3EntryDisplayField=b),options:[{label:"Value",value:((f=t.appState.items[t.appState.activeItemIndex].t3Entry)==null?void 0:f.digital_analog)===1?"value":"control"},{label:"Label",value:"label"},{label:"Description",value:"description"}],label:"Display field","emit-value":"","map-options":""},null,8,["modelValue","options"])]}),_:1})):je("",!0)])])])):(I(),J("div",yv))])]),_:1}),S(Vr,{modelValue:t.linkT3EntryDialog.active,"onUpdate:modelValue":e[34]||(e[34]=l=>t.linkT3EntryDialog.active=l)},{default:E(()=>[S(Wr,{style:{"min-width":"600px"}},{default:E(()=>[S(ga,{class:"row items-center q-pb-none"},{default:E(()=>[bv,S(hd),oe(S(ct,{icon:"close",flat:"",round:"",dense:""},null,512),[[he]])]),_:1}),S(Le),S(ga,{style:{height:"70vh"},class:"scroll"},{default:E(()=>[S(Ft,{"option-label":"description","option-value":"id",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",modelValue:t.linkT3EntryDialog.data,"onUpdate:modelValue":e[33]||(e[33]=l=>t.linkT3EntryDialog.data=l),options:t.selectPanelOptions,onFilter:t.selectPanelFilterFn,label:"Select Entry"},null,8,["modelValue","options","onFilter"])]),_:1}),S(Le),S(qr,{align:"right"},{default:E(()=>[oe(S(ct,{flat:"",label:"Cancel",color:"primary"},null,512),[[he]]),S(ct,{flat:"",label:"Save",disable:!t.linkT3EntryDialog.data,color:"primary",onClick:t.linkT3EntrySave},null,8,["disable","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(Vr,{modelValue:t.uploadObjectDialog.active,"onUpdate:modelValue":e[38]||(e[38]=l=>t.uploadObjectDialog.active=l)},{default:E(()=>[S(Wr,{style:{"min-width":"450px"}},{default:E(()=>[S(ga,null,{default:E(()=>[wv]),_:1}),S(ga,{class:"q-pt-none"},{default:E(()=>[S(u,{types:["image/svg+xml"],onUploaded:t.handleCustomObjectUpload,onFileAdded:t.customObjectFileAdded,onFileRemoved:e[35]||(e[35]=l=>t.uploadObjectDialog.uploadBtnDisabled=!0)},null,8,["onUploaded","onFileAdded"])]),_:1}),S(qr,{align:"right",class:"text-primary"},{default:E(()=>[S(ct,{flat:"",label:"Cancel",onClick:e[36]||(e[36]=l=>t.uploadObjectDialog.active=!1)}),S(ct,{disabled:t.uploadObjectDialog.uploadBtnDisabled,loading:t.uploadObjectDialog.uploadBtnLoading,flat:"",label:"Save",onClick:e[37]||(e[37]=l=>t.saveCustomObject())},null,8,["disabled","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var kv=We(uv,[["render",Sv]]);export{kv as default};
